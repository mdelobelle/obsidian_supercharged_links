/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');
var view = require('@codemirror/view');
var rangeset = require('@codemirror/rangeset');
var language = require('@codemirror/language');
var streamParser = require('@codemirror/stream-parser');
var state = require('@codemirror/state');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
}

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

class Field {
    constructor(name = "", values = {}, id = "", isMulti = false, isCycle = false, valuesListNotePath = "") {
        this.name = name;
        this.values = values;
        this.id = id;
        this.isCycle = isCycle;
        this.isMulti = isMulti;
        this.valuesListNotePath = valuesListNotePath;
        this.insertNewValue.bind(this);
    }
    insertNewValue(value) {
        return __awaiter(this, void 0, void 0, function* () {
            let newKey = 1;
            Object.keys(this.values).forEach(key => {
                if (parseInt(key) && parseInt(key) >= newKey) {
                    newKey = parseInt(key) + 1;
                }
            });
            this.values[newKey.toString()] = value;
            return newKey.toString();
        });
    }
    static copyProperty(target, source) {
        target.id = source.id;
        target.name = source.name;
        target.isCycle = source.isCycle;
        target.isMulti = source.isMulti;
        target.valuesListNotePath = source.valuesListNotePath;
        Object.keys(source.values).forEach(k => {
            target.values[k] = source.values[k];
        });
        Object.keys(target.values).forEach(k => {
            if (!Object.keys(source.values).includes(k)) {
                delete target.values[k];
            }
        });
    }
}

class FieldSetting extends obsidian.Setting {
    constructor(containerEl, property, app, plugin) {
        super(containerEl);
        this.containerEl = containerEl;
        this.property = property;
        this.app = app;
        this.plugin = plugin;
        this.setTextContentWithname();
        this.addEditButton();
        this.addDeleteButton();
    }
    setTextContentWithname() {
        this.infoEl.textContent =
            `${this.property.name}: [${Object.keys(this.property.values).map(k => this.property.values[k]).join(', ')}]`;
    }
    addEditButton() {
        this.addButton((b) => {
            b.setIcon("pencil")
                .setTooltip("Edit")
                .onClick(() => {
                let modal = new FieldSettingsModal(this.app, this.plugin, this.containerEl, this, this.property);
                modal.open();
            });
        });
    }
    addDeleteButton() {
        this.addButton((b) => {
            b.setIcon("trash")
                .setTooltip("Delete")
                .onClick(() => {
                const currentExistingProperty = this.plugin.initialProperties.filter(p => p.id == this.property.id)[0];
                if (currentExistingProperty) {
                    this.plugin.initialProperties.remove(currentExistingProperty);
                }
                this.settingEl.parentElement.removeChild(this.settingEl);
                this.plugin.saveSettings();
            });
        });
    }
    static getValuesListFromNote(notePath, app) {
        return new Promise((resolve, reject) => {
            let values = [];
            const files = app.vault.getMarkdownFiles().filter(mdFile => mdFile.path == notePath);
            if (files.length > 0) {
                const file = files[0];
                app.vault.read(file).then((result) => {
                    result.split('\n').forEach(line => {
                        if (/^(.*)$/.test(line)) {
                            values.push(line.trim());
                        }
                    });
                    resolve(values);
                });
            }
            else {
                resolve([]);
            }
        });
    }
}

class FieldSettingsModal extends obsidian.Modal {
    constructor(app, plugin, parentSettingContainer, parentSetting, property) {
        super(app);
        this.valuesPromptComponents = [];
        this.saved = false;
        this.new = true;
        this.plugin = plugin;
        this.parentSetting = parentSetting;
        this.initialProperty = new Field();
        this.parentSettingContainer = parentSettingContainer;
        if (property) {
            this.new = false;
            this.property = property;
            this.initialProperty.name = property.name;
            this.initialProperty.id = property.id;
            Object.keys(property.values).forEach(k => {
                this.initialProperty.values[k] = property.values[k];
            });
        }
        else {
            let newId = 1;
            this.plugin.initialProperties.forEach(prop => {
                if (parseInt(prop.id) && parseInt(prop.id) >= newId) {
                    newId = parseInt(prop.id) + 1;
                }
            });
            this.property = new Field();
            this.property.id = newId.toString();
            this.initialProperty.id = newId.toString();
        }
    }
    onOpen() {
        if (this.property.name == "") {
            this.titleEl.setText(`Add a property and set predefined`);
        }
        else {
            this.titleEl.setText(`Manage settings values for ${this.property.name}`);
        }
        this.createForm();
    }
    onClose() {
        Object.assign(this.property, this.initialProperty);
        if (!this.new) {
            this.parentSetting.infoEl.textContent =
                `${this.property.name}: [${Object.keys(this.property.values).map(k => this.property.values[k]).join(', ')}]`;
        }
        else if (this.saved) {
            new FieldSetting(this.parentSettingContainer, this.property, this.app, this.plugin);
        }
    }
    setValueListText(header) {
        header.setText(`Preset values: ${Object.values(this.property.values).join(', ')}`);
    }
    createnameInputContainer(parentNode) {
        const propertyNameContainerLabel = parentNode.createDiv();
        propertyNameContainerLabel.setText(`Property Name:`);
        const input = new obsidian.TextComponent(parentNode);
        const name = this.property.name;
        input.setValue(name);
        input.setPlaceholder("Name of the property");
        input.onChange(value => {
            this.property.name = value;
            this.titleEl.setText(`Manage predefined values for ${this.property.name}`);
            FieldSettingsModal.removeValidationError(input);
        });
        return input;
    }
    createTogglerContainer(parentNode, label) {
        const propertyContainerLabel = parentNode.createDiv({
            cls: 'frontmatter-checkbox-toggler'
        });
        propertyContainerLabel.setText(label);
        const toggler = new obsidian.ToggleComponent(parentNode);
        return toggler;
    }
    createListNoteContainer(parentNode) {
        const listNoteContainerLabel = parentNode.createDiv();
        listNoteContainerLabel.setText(`Path of the note containing the values:`);
        const input = new obsidian.TextComponent(parentNode);
        const listNotePath = this.property.valuesListNotePath;
        input.setValue(listNotePath);
        input.setPlaceholder("Path/of/the/note.md");
        input.onChange(value => this.property.valuesListNotePath = value);
        return input;
    }
    removePresetValue(key) {
        let newValues = {};
        for (let _key in this.property.values) {
            if (key !== _key) {
                newValues[_key] = this.property.values[_key];
            }
        }
        this.property.values = newValues;
    }
    createValueContainer(parentNode, header, key) {
        const values = this.property.values;
        const presetValue = values[key];
        const valueContainer = parentNode.createDiv({
            cls: 'frontmatter-prompt-container',
        });
        const input = new obsidian.TextComponent(valueContainer);
        input.setValue(presetValue);
        input.onChange(value => {
            this.property.values[key] = value;
            this.setValueListText(header);
            FieldSettingsModal.removeValidationError(input);
        });
        const valueRemoveButton = new obsidian.ButtonComponent(valueContainer);
        valueRemoveButton.setIcon("trash")
            .onClick((evt) => {
            evt.preventDefault;
            this.removePresetValue(key);
            this.setValueListText(header);
            parentNode.removeChild(valueContainer);
            this.valuesPromptComponents.remove(input);
        });
        if (key != Object.keys(this.property.values)[0]) {
            const valueUpgradeButton = new obsidian.ButtonComponent(valueContainer);
            valueUpgradeButton.setButtonText("â–²");
            valueUpgradeButton.onClick((evt) => {
                const thisValue = values[key];
                const upperComponent = this.valuesPromptComponents[this.valuesPromptComponents.indexOf(input) - 1];
                if (upperComponent) {
                    const upperValue = upperComponent.inputEl.value;
                    const upperKey = Object.keys(values).filter(k => values[k] == upperValue)[0];
                    if (upperKey) {
                        upperComponent.setValue(thisValue);
                        values[upperKey] = thisValue;
                        input.setValue(upperValue);
                        values[key] = upperValue;
                    }
                }
            });
        }
        return input;
    }
    createForm() {
        const div = this.contentEl.createDiv({
            cls: "frontmatter-prompt-div"
        });
        const mainDiv = div.createDiv({
            cls: "frontmatter-prompt-form"
        });
        /* Property Name Section */
        const nameContainer = mainDiv.createDiv();
        this.namePromptComponent = this.createnameInputContainer(nameContainer);
        mainDiv.createDiv({ cls: 'frontmatter-separator' }).createEl("hr");
        /* Property is Multi section*/
        const multiContainer = mainDiv.createDiv();
        this.isMultiTogglerComponent = this.createTogglerContainer(multiContainer, "Is Multi: ");
        this.isMultiTogglerComponent.setValue(this.property.isMulti);
        this.isMultiTogglerComponent.setTooltip("Can this property have multiple values?");
        this.isMultiTogglerComponent.onChange(value => {
            this.property.isMulti = value;
            if (this.property.isCycle && this.property.isMulti) {
                this.property.isCycle = false;
                this.isCycleTogglerComponent.setValue(false);
            }
        });
        mainDiv.createDiv({ cls: 'frontmatter-separator' }).createEl("hr");
        /* Property is Cycle section*/
        const cycleContainer = mainDiv.createDiv();
        this.isCycleTogglerComponent = this.createTogglerContainer(cycleContainer, "Is Cycle: ");
        this.isCycleTogglerComponent.setValue(this.property.isCycle);
        this.isCycleTogglerComponent.setTooltip("Is this property's values set in cycle mode?");
        this.isCycleTogglerComponent.onChange(value => {
            this.property.isCycle = value;
            if (this.property.isCycle && this.property.isMulti) {
                this.property.isMulti = false;
                this.isMultiTogglerComponent.setValue(false);
            }
        });
        mainDiv.createDiv({ cls: 'frontmatter-separator' }).createEl("hr");
        /* Property's note for list of Values */
        const listNotePathContainer = mainDiv.createDiv();
        this.listNotePathComponent = this.createListNoteContainer(listNotePathContainer);
        mainDiv.createDiv({ cls: 'frontmatter-separator' }).createEl("hr");
        /* Property Values */
        const valuesList = mainDiv.createDiv();
        const valuesListHeader = valuesList.createDiv();
        valuesListHeader.createEl("h2");
        valuesListHeader.setText(`Preset values: ${Object.values(this.property.values).join(', ')}`);
        const valuesListBody = valuesList.createDiv();
        Object.keys(this.property.values).forEach(key => {
            this.valuesPromptComponents.push(this.createValueContainer(valuesListBody, valuesListHeader, key));
        });
        /* Add a new Values */
        const valuesListFooter = valuesList.createDiv();
        const addValue = valuesListFooter.createEl('button');
        addValue.type = 'button';
        addValue.textContent = 'Add';
        addValue.onClickEvent((evt) => {
            evt.preventDefault;
            this.property.insertNewValue("")
                .then(newKey => { this.createValueContainer(valuesListBody, valuesListHeader, newKey); });
        });
        mainDiv.createDiv({ cls: 'frontmatter-separator' }).createEl("hr");
        /* footer buttons*/
        const footerEl = this.contentEl.createDiv();
        const footerButtons = new obsidian.Setting(footerEl);
        footerButtons.addButton((b) => this.createSaveButton(b));
        footerButtons.addExtraButton((b) => this.createCancelButton(b));
    }
    createSaveButton(b) {
        b.setTooltip("Save")
            .setIcon("checkmark")
            .onClick(() => __awaiter(this, void 0, void 0, function* () {
            let error = false;
            if (/^[#>-]/.test(this.property.name)) {
                FieldSettingsModal.setValidationError(this.namePromptComponent, this.namePromptComponent.inputEl, "Property name cannot start with #, >, -");
                error = true;
            }
            if (this.property.name == "") {
                FieldSettingsModal.setValidationError(this.namePromptComponent, this.namePromptComponent.inputEl, "Property name can not be Empty");
                error = true;
            }
            this.valuesPromptComponents.forEach(input => {
                if (/^[#>-]/.test(input.inputEl.value)) {
                    FieldSettingsModal.setValidationError(input, input.inputEl.parentElement.lastElementChild, "Values cannot cannot start with #, >, -");
                    error = true;
                }
                if (/[,]/gu.test(input.inputEl.value)) {
                    FieldSettingsModal.setValidationError(input, input.inputEl.parentElement.lastElementChild, "Values cannot contain a comma");
                    error = true;
                }
                if (input.inputEl.value == "") {
                    FieldSettingsModal.setValidationError(input, input.inputEl.parentElement.lastElementChild, "Values can't be null.");
                    error = true;
                }
            });
            if (error) {
                new obsidian.Notice("Fix errors before saving.");
                return;
            }
            this.saved = true;
            const currentExistingProperty = this.plugin.initialProperties.filter(p => p.id == this.property.id)[0];
            if (currentExistingProperty) {
                Field.copyProperty(currentExistingProperty, this.property);
            }
            else {
                this.plugin.initialProperties.push(this.property);
            }
            this.initialProperty = this.property;
            this.plugin.saveSettings();
            this.close();
        }));
        return b;
    }
    createCancelButton(b) {
        b.setIcon("cross")
            .setTooltip("Cancel")
            .onClick(() => {
            this.saved = false;
            /* reset values from settings */
            if (this.initialProperty.name != "") {
                Object.assign(this.property, this.initialProperty);
            }
            this.close();
        });
        return b;
    }
    /* utils functions */
    static setValidationError(textInput, insertAfter, message) {
        textInput.inputEl.addClass("is-invalid");
        if (message) {
            let mDiv = textInput.inputEl.parentElement.querySelector(".invalid-feedback");
            if (!mDiv) {
                mDiv = createDiv({ cls: "invalid-feedback" });
            }
            mDiv.innerText = message;
            mDiv.insertAfter(insertAfter);
        }
    }
    static removeValidationError(textInput) {
        if (textInput.inputEl.hasClass("is-invalid")) {
            textInput.inputEl.removeClass("is-invalid");
            textInput.inputEl.parentElement.removeChild(textInput.inputEl.parentElement.lastElementChild);
        }
    }
}

class SuperchargedLinksSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        containerEl.createEl('h2', { text: 'Settings for Supercharged Links.' });
        /* Managing extra attirbutes for a.internal-link */
        new obsidian.Setting(containerEl)
            .setName('Target Attributes for styling')
            .setDesc('Frontmatter attributes to target, comma separated')
            .addTextArea((text) => {
            text
                .setPlaceholder('Enter attributes as string, comma separated')
                .setValue(this.plugin.settings.targetAttributes.join(', '))
                .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.targetAttributes = value.replace(/\s/g, '').split(',');
                yield this.plugin.saveSettings();
            }));
            text.inputEl.rows = 6;
            text.inputEl.cols = 25;
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in Editor')
            .setDesc('If true, this will also supercharge internal links in the editor view of a note.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableEditor);
            toggle.onChange(value => {
                this.plugin.settings.enableEditor = value;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in File Browser')
            .setDesc('If true, this will also supercharge the file browser.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableFileList);
            toggle.onChange(value => {
                this.plugin.settings.enableFileList = value;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in Backlinks')
            .setDesc('If true, this will also supercharge the backlinks and forward links panels.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableBacklinks);
            toggle.onChange(value => {
                this.plugin.settings.enableBacklinks = value;
                this.plugin.saveSettings();
            });
        });
        // Managing choice wether you want to parse tags both from normal tags and in the frontmatter
        new obsidian.Setting(containerEl)
            .setName('Parse all tags in the file')
            .setDesc('Sets the `data-link-tags`-attribute to look for tags both in the frontmatter and in the file as #tag-name')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.targetTags);
            toggle.onChange(value => {
                this.plugin.settings.targetTags = value;
                this.plugin.saveSettings();
            });
        });
        // Managing choice wether you get attributes from inline fields and frontmatter or only frontmater
        new obsidian.Setting(containerEl)
            .setName('Search for attribute in Inline fields like <field::>')
            .setDesc('Sets the `data-link-<field>`-attribute to the value of inline fields')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.getFromInlineField);
            toggle.onChange(value => {
                this.plugin.settings.getFromInlineField = value;
                this.plugin.saveSettings();
            });
        });
        /* Managing predefined values for properties */
        /* Manage menu options display*/
        new obsidian.Setting(containerEl)
            .setName("Display field options in context menu")
            .setDesc("Choose to show or hide fields options in the context menu of a link or a file")
            .addToggle((toggle) => {
            toggle.setValue(this.plugin.settings.displayFieldsInContextMenu);
            toggle.onChange(value => {
                this.plugin.settings.displayFieldsInContextMenu = value;
                this.plugin.saveSettings();
            });
        });
        /* Exclude Fields from context menu*/
        new obsidian.Setting(containerEl)
            .setName('Ignored fields')
            .setDesc('Fields to be ignored by the plugin when adding options to the context menu')
            .addTextArea((text) => {
            text
                .setPlaceholder('Enter fields as string, comma separated')
                .setValue(this.plugin.settings.globallyIgnoredFields.join(', '))
                .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.globallyIgnoredFields = value.replace(/\s/g, '').split(',');
                yield this.plugin.saveSettings();
            }));
            text.inputEl.rows = 6;
            text.inputEl.cols = 25;
        });
        /* Set classFiles Path*/
        new obsidian.Setting(containerEl)
            .setName('class Files path')
            .setDesc('Path to the files containing the authorized fields for a type of note')
            .addText((text) => {
            text
                .setPlaceholder('Path/')
                .setValue(this.plugin.settings.classFilesPath)
                .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.classFilesPath = value;
                yield this.plugin.saveSettings();
            }));
        });
        /* Add new property for which we want to preset values*/
        new obsidian.Setting(containerEl)
            .setName("Add New Property Manager")
            .setDesc("Add a new Frontmatter property for which you want preset values.")
            .addButton((button) => {
            let b = button
                .setTooltip("Add New Property Manager")
                .setButtonText("+")
                .onClick(() => __awaiter(this, void 0, void 0, function* () {
                let modal = new FieldSettingsModal(this.app, this.plugin, containerEl);
                modal.open();
            }));
            return b;
        });
        /* Managed properties that currently have preset values */
        this.plugin.initialProperties.forEach(prop => {
            const property = new Field();
            Object.assign(property, prop);
            new FieldSetting(containerEl, property, this.app, this.plugin);
        });
    }
}

function clearExtraAttributes(link) {
    Object.values(link.attributes).forEach(attr => {
        if (attr.name.includes("data-link")) {
            link.removeAttribute(attr.name);
        }
    });
}
function fetchTargetAttributesSync(app, settings, dest, addDataHref) {
    var _a;
    let new_props = { tags: "" };
    const cache = app.metadataCache.getFileCache(dest);
    if (!cache)
        return;
    const frontmatter = cache.frontmatter;
    if (frontmatter) {
        settings.targetAttributes.forEach(attribute => {
            if (Object.keys(frontmatter).includes(attribute)) {
                if (attribute === 'tag' || attribute === 'tags') {
                    new_props['tags'] += frontmatter[attribute];
                }
                else {
                    new_props[attribute] = frontmatter[attribute];
                }
            }
        });
    }
    if (settings.targetTags) {
        new_props["tags"] += obsidian.getAllTags(cache).join(' ');
    }
    if (addDataHref) {
        new_props['data-href'] = dest.basename;
    }
    //@ts-ignore
    const getResults = (api) => {
        settings.targetAttributes.forEach((field) => {
            const value = api.page(dest.path)[field];
            if (value) {
                new_props[field] = value;
            }
        });
    };
    if (settings.getFromInlineField && app.plugins.enabledPlugins.has("dataview")) {
        const api = (_a = app.plugins.plugins.dataview) === null || _a === void 0 ? void 0 : _a.api;
        if (api) {
            getResults(api);
        }
        else
            this.plugin.registerEvent(this.app.metadataCache.on("dataview:api-ready", (api) => getResults(api)));
    }
    return new_props;
}
function setLinkNewProps(link, new_props) {
    Object.keys(new_props).forEach(key => {
        link.setAttribute("data-link-" + key, new_props[key]);
        link.addClass("data-link-icon");
    });
}
function updateLinkExtraAttributes(app, settings, link, destName) {
    const linkHref = link.getAttribute('href').split('#')[0];
    const dest = app.metadataCache.getFirstLinkpathDest(linkHref, destName);
    if (dest) {
        const new_props = fetchTargetAttributesSync(app, settings, dest, false);
        setLinkNewProps(link, new_props);
    }
}
function updateDivExtraAttributes(app, settings, link, destName, linkName) {
    if (!linkName) {
        linkName = link.textContent;
    }
    const dest = app.metadataCache.getFirstLinkpathDest(obsidian.getLinkpath(linkName), destName);
    if (dest) {
        const new_props = fetchTargetAttributesSync(app, settings, dest, true);
        setLinkNewProps(link, new_props);
    }
}
function updateDivLinks(app, settings) {
    const divs = fishAll('div.internal-link');
    divs.push(...fishAll('td.internal-link'));
    divs.forEach((link) => {
        clearExtraAttributes(link);
        updateDivExtraAttributes(app, settings, link, "");
    });
    const fileDivs = fishAll('div.nav-file-title-content');
    fileDivs.forEach((link) => {
        clearExtraAttributes(link);
        if (settings.enableFileList) {
            updateDivExtraAttributes(app, settings, link, "");
        }
    });
}
function updateElLinks(app, settings, el, ctx) {
    const links = el.querySelectorAll('a.internal-link');
    const destName = ctx.sourcePath.replace(/(.*).md/, "$1");
    links.forEach((link) => {
        clearExtraAttributes(link);
        updateLinkExtraAttributes(app, settings, link, destName);
    });
}
function updateVisibleLinks(app, settings) {
    fishAll("a.internal-link").forEach(internalLink => clearExtraAttributes(internalLink));
    app.workspace.iterateRootLeaves((leaf) => {
        if (leaf.view instanceof obsidian.MarkdownView && leaf.view.file) {
            const file = leaf.view.file;
            const cachedFile = app.metadataCache.getFileCache(file);
            if (cachedFile.links) {
                cachedFile.links.forEach((link) => {
                    const fileName = file.path.replace(/(.*).md/, "$1");
                    const dest = app.metadataCache.getFirstLinkpathDest(link.link, fileName);
                    if (dest) {
                        const new_props = fetchTargetAttributesSync(app, settings, dest, false);
                        const internalLinks = leaf.view.containerEl.querySelectorAll(`a.internal-link[href="${link.link}"]`);
                        internalLinks.forEach((internalLink) => setLinkNewProps(internalLink, new_props));
                    }
                });
            }
        }
    });
}

const DEFAULT_SETTINGS = {
    targetAttributes: [],
    targetTags: true,
    presetFields: [],
    displayFieldsInContextMenu: true,
    globallyIgnoredFields: [],
    classFilesPath: "",
    getFromInlineField: true,
    enableEditor: true,
    enableFileList: true,
    enableBacklinks: true
};

function replaceValues(app, file, attribute, input) {
    return __awaiter(this, void 0, void 0, function* () {
        app.vault.read(file).then((result) => {
            let newContent = [];
            let foreHeadText = false;
            let frontmatterStart = false;
            let frontmatterEnd = false;
            let inFrontmatter = false;
            result.split('\n').map(line => {
                if (line != "---" && !foreHeadText && !frontmatterStart) {
                    foreHeadText = true;
                }
                if (line == "---" && !foreHeadText) {
                    if (!frontmatterStart) {
                        frontmatterStart = true;
                        inFrontmatter = true;
                    }
                    else if (!frontmatterEnd) {
                        frontmatterEnd = true;
                        inFrontmatter = false;
                    }
                }
                if (inFrontmatter) {
                    const regex = new RegExp(`${attribute}:`, 'u');
                    const regexResult = line.match(regex);
                    if (regexResult && regexResult.length > 0) {
                        const inputArray = input ? input.replace(/(\,\s+)/g, ',').split(',') : [""];
                        const newValue = inputArray.length == 1 ? inputArray[0] : `[${inputArray.join(', ')}]`;
                        newContent.push(`${attribute}: ${newValue}`);
                    }
                    else {
                        newContent.push(`${line}`);
                    }
                }
                else {
                    const regex = new RegExp(`([_\*~\`]*)${attribute}([_\*~\`]*)(\\s*)::`, 'u');
                    const r = line.match(regex);
                    if (r && r.length > 0) {
                        const inputArray = input ? input.replace(/(\,\s+)/g, ',').split(',') : [""];
                        const newValue = inputArray.length == 1 ? inputArray[0] : `${inputArray.join(', ')}`;
                        newContent.push(`${r[1]}${attribute}${r[2]}${r[3]}:: ${newValue}`);
                    }
                    else {
                        newContent.push(line);
                    }
                }
            });
            app.vault.modify(file, newContent.join('\n'));
        });
    });
}

class valueMultiSelectModal extends obsidian.Modal {
    constructor(app, file, name, initialValues, settings, lineNumber = -1, inFrontMatter = false, top = false) {
        super(app);
        this.app = app;
        this.file = file;
        this.name = name;
        this.settings = settings;
        this.values = initialValues ? initialValues.toString().replace(/^\[(.*)\]$/, "$1").split(",").map(item => item.trim()) : [];
        this.lineNumber = lineNumber;
        this.inFrontmatter = inFrontMatter;
        this.top = top;
    }
    onOpen() {
        const valueGrid = this.contentEl.createDiv({
            cls: "frontmatter-values-grid"
        });
        FieldSetting.getValuesListFromNote(this.settings.valuesListNotePath, this.app).then(listNoteValues => {
            this.populateValuesGrid(valueGrid, listNoteValues);
        });
    }
    buildValueToggler(valueGrid, presetValue) {
        const valueSelectorContainer = valueGrid.createDiv({
            cls: "frontmatter-value-selector-container"
        });
        const valueTogglerContainer = valueSelectorContainer.createDiv({
            cls: "frontmatter-value-selector-toggler"
        });
        const valueToggler = new obsidian.ToggleComponent(valueTogglerContainer);
        this.values.forEach(value => {
            if (value == presetValue) {
                valueToggler.setValue(true);
            }
        });
        valueToggler.onChange(value => {
            if (value && !this.values.includes(presetValue)) {
                this.values.push(presetValue);
            }
            if (!value) {
                this.values.remove(presetValue);
            }
        });
        const valueLabel = valueSelectorContainer.createDiv({
            cls: "frontmatter-value-selector-label"
        });
        valueLabel.setText(presetValue);
    }
    populateValuesGrid(valueGrid, listNoteValues) {
        Object.keys(this.settings.values).forEach(key => {
            const presetValue = this.settings.values[key];
            this.buildValueToggler(valueGrid, presetValue);
        });
        listNoteValues.forEach(value => {
            this.buildValueToggler(valueGrid, value);
        });
        const footer = this.contentEl.createDiv({
            cls: "frontmatter-value-grid-footer"
        });
        const saveButton = new obsidian.ButtonComponent(footer);
        saveButton.setIcon("checkmark");
        saveButton.onClick(() => {
            if (this.lineNumber == -1) {
                replaceValues(this.app, this.file, this.name, this.values.join(","));
            }
            else {
                this.app.vault.read(this.file).then(result => {
                    let newContent = [];
                    if (this.top) {
                        newContent.push(`${this.name}${this.inFrontmatter ? ":" : "::"} ${this.values.join(",")}`);
                        result.split("\n").forEach((line, _lineNumber) => newContent.push(line));
                    }
                    else {
                        result.split("\n").forEach((line, _lineNumber) => {
                            newContent.push(line);
                            if (_lineNumber == this.lineNumber) {
                                newContent.push(`${this.name}${this.inFrontmatter ? ":" : "::"} ${this.values.join(",")}`);
                            }
                        });
                    }
                    this.app.vault.modify(this.file, newContent.join('\n'));
                    this.close();
                });
            }
            this.close();
        });
        const cancelButton = new obsidian.ExtraButtonComponent(footer);
        cancelButton.setIcon("cross");
        cancelButton.onClick(() => this.close());
    }
}

class valueTextInputModal extends obsidian.Modal {
    constructor(app, file, name, value, lineNumber = -1, inFrontMatter = false, top = false) {
        super(app);
        this.app = app;
        this.file = file;
        this.name = name;
        this.value = value;
        this.lineNumber = lineNumber;
        this.inFrontmatter = inFrontMatter;
        this.top = top;
    }
    onOpen() {
        const inputDiv = this.contentEl.createDiv({
            cls: "frontmatter-modal-value"
        });
        this.buildInputEl(inputDiv);
    }
    buildInputEl(inputDiv) {
        const form = inputDiv.createEl("form");
        form.type = "submit";
        form.onsubmit = (e) => {
            e.preventDefault();
            if (this.lineNumber == -1) {
                replaceValues(this.app, this.file, this.name, inputEl.getValue());
            }
            else {
                this.app.vault.read(this.file).then(result => {
                    let newContent = [];
                    if (this.top) {
                        newContent.push(`${this.name}${this.inFrontmatter ? ":" : "::"} ${inputEl.getValue()}`);
                        result.split("\n").forEach((line, _lineNumber) => newContent.push(line));
                    }
                    else {
                        result.split("\n").forEach((line, _lineNumber) => {
                            newContent.push(line);
                            if (_lineNumber == this.lineNumber) {
                                newContent.push(`${this.name}${this.inFrontmatter ? ":" : "::"} ${inputEl.getValue()}`);
                            }
                        });
                    }
                    this.app.vault.modify(this.file, newContent.join('\n'));
                    this.close();
                });
            }
            this.close();
        };
        const inputEl = new obsidian.TextComponent(form);
        inputEl.inputEl.focus();
        inputEl.setValue(this.value);
        inputEl.inputEl.addClass("frontmatter-prompt-input");
    }
}

class valueToggleModal$1 extends obsidian.Modal {
    constructor(app, file, name, value) {
        super(app);
        this.app = app;
        this.file = file;
        this.name = name;
        this.value = value;
    }
    onOpen() {
        const inputDiv = this.contentEl.createDiv({
            cls: "frontmatter-toggler"
        });
        this.buildInputEl(inputDiv);
    }
    buildInputEl(inputDiv) {
        const inputEl = new obsidian.ToggleComponent(inputDiv);
        inputEl.setValue(this.value);
        inputEl.onChange(v => {
            replaceValues(this.app, this.file, this.name, v ? "true" : "false");
        });
    }
}

class valueToggleModal extends obsidian.Modal {
    constructor(app, file, name, value, settings, lineNumber = -1, inFrontMatter = false, top = false) {
        super(app);
        this.app = app;
        this.file = file;
        this.name = name;
        this.value = value;
        this.settings = settings;
        this.newValue = null;
        this.lineNumber = lineNumber;
        this.inFrontmatter = inFrontMatter;
        this.top = top;
    }
    onOpen() {
        const inputDiv = this.contentEl.createDiv({
            cls: "frontmatter-modal-value"
        });
        this.buildInputEl(inputDiv);
    }
    buildInputEl(inputDiv) {
        const selectEl = new obsidian.DropdownComponent(inputDiv);
        selectEl.selectEl.addClass("frontmatter-select");
        const values = this.settings.values;
        selectEl.addOption("", "--Empty--");
        Object.keys(values).forEach(key => {
            selectEl.addOption(values[key], values[key]);
        });
        if (Object.values(values).includes(this.value)) {
            selectEl.setValue(this.value);
        }
        FieldSetting.getValuesListFromNote(this.settings.valuesListNotePath, this.app).then(listNoteValues => {
            listNoteValues.forEach(value => selectEl.addOption(value, value));
            if (listNoteValues.includes(this.value)) {
                selectEl.setValue(this.value);
            }
            selectEl.onChange(value => this.newValue = value != "--Empty--" ? value : "");
            const submitButton = new obsidian.ButtonComponent(inputDiv);
            submitButton.setTooltip("Save")
                .setIcon("checkmark")
                .onClick(() => __awaiter(this, void 0, void 0, function* () {
                if (this.lineNumber == -1) {
                    if (this.newValue || this.newValue == "") {
                        replaceValues(this.app, this.file, this.name, this.newValue);
                    }
                }
                else {
                    this.app.vault.read(this.file).then(result => {
                        let newContent = [];
                        if (this.top) {
                            newContent.push(`${this.name}${this.inFrontmatter ? ":" : "::"} ${selectEl.getValue()}`);
                            result.split("\n").forEach((line, _lineNumber) => newContent.push(line));
                        }
                        else {
                            result.split("\n").forEach((line, _lineNumber) => {
                                newContent.push(line);
                                if (_lineNumber == this.lineNumber) {
                                    newContent.push(`${this.name}${this.inFrontmatter ? ":" : "::"} ${selectEl.getValue()}`);
                                }
                            });
                        }
                        this.app.vault.modify(this.file, newContent.join('\n'));
                        this.close();
                    });
                }
                this.close();
            }));
        });
    }
}

class addNewFieldModal extends obsidian.Modal {
    constructor(plugin, lineNumber, file, inFrontmatter, top) {
        super(plugin.app);
        this.lineNumber = lineNumber;
        this.inFrontmatter = inFrontmatter;
        this.file = file;
        this.top = top;
    }
    onOpen() {
        this.titleEl.setText("Insert new field");
        const addNewFieldContainer = this.contentEl.createDiv();
        const nameInputContainer = addNewFieldContainer.createDiv();
        nameInputContainer.setText("Field Name: ");
        const nameInputEl = new obsidian.TextComponent(nameInputContainer);
        nameInputEl.setPlaceholder("Field name");
        const valueInputContainer = addNewFieldContainer.createDiv();
        valueInputContainer.setText("Field value: ");
        const valueInputEl = new obsidian.TextComponent(valueInputContainer);
        valueInputEl.setPlaceholder("Field value");
        const footerButtons = this.contentEl.createDiv({
            cls: 'frontmatter-textarea-buttons'
        });
        const saveButton = new obsidian.ButtonComponent(footerButtons);
        saveButton.setIcon("checkmark");
        saveButton.onClick(() => {
            this.app.vault.read(this.file).then(result => {
                let newContent = [];
                if (this.top) {
                    newContent.push(`${nameInputEl.getValue()}${this.inFrontmatter ? ":" : "::"} ${valueInputEl.getValue()}`);
                    result.split("\n").forEach((line, _lineNumber) => newContent.push(line));
                }
                else {
                    result.split("\n").forEach((line, _lineNumber) => {
                        newContent.push(line);
                        if (_lineNumber == this.lineNumber) {
                            newContent.push(`${nameInputEl.getValue()}${this.inFrontmatter ? ":" : "::"} ${valueInputEl.getValue()}`);
                        }
                    });
                }
                this.app.vault.modify(this.file, newContent.join('\n'));
                this.close();
            });
        });
        const cancelButton = new obsidian.ExtraButtonComponent(footerButtons);
        cancelButton.setIcon("cross");
        cancelButton.onClick(() => {
            this.close();
        });
    }
}

class fieldSelectModal extends obsidian.Modal {
    constructor(plugin, file, lineNumber, line, inFrontmatter, top) {
        super(plugin.app);
        this.line = line;
        this.lineNumber = lineNumber;
        this.plugin = plugin;
        this.file = file;
        this.inFrontmatter = inFrontmatter;
        this.top = top;
    }
    onOpen() {
        this.titleEl.setText(`Insert field after > ${this.line.substring(0, 20)}${this.line.length > 20 ? "..." : ""}`);
        const container = this.contentEl.createDiv();
        const settingsDropdownContainer = container.createDiv();
        const settingsSelector = new obsidian.DropdownComponent(settingsDropdownContainer);
        settingsSelector.addOption("---", "Choose Field");
        settingsSelector.addOption("++New", "New");
        this.plugin.settings.presetFields.forEach(setting => {
            settingsSelector.addOption(setting.name, setting.name);
        });
        settingsSelector.onChange(value => {
            if (value == "++New") {
                const newFieldModal = new addNewFieldModal(this.plugin, this.lineNumber, this.file, this.inFrontmatter, this.top);
                newFieldModal.open();
                this.close();
            }
            else {
                const field = this.plugin.settings.presetFields.filter(_field => _field.name == value)[0];
                if (field.valuesListNotePath || (field.values && Object.keys(field.values).length > 0)) {
                    if (field.isMulti) {
                        const fieldModal = new valueMultiSelectModal(this.app, this.file, field.name, "", field, this.lineNumber, this.inFrontmatter, this.top);
                        fieldModal.titleEl.setText(`Select values for ${value}`);
                        fieldModal.open();
                    }
                    else {
                        const fieldModal = new valueToggleModal(this.app, this.file, field.name, "", field, this.lineNumber, this.inFrontmatter, this.top);
                        fieldModal.titleEl.setText(`Select value for ${value}`);
                        fieldModal.open();
                    }
                }
                else {
                    const fieldModal = new valueTextInputModal(this.app, this.file, value, "", this.lineNumber, this.inFrontmatter, this.top);
                    fieldModal.titleEl.setText(`Enter value for ${value}`);
                    fieldModal.open();
                }
                this.close();
            }
        });
    }
}

class chooseSectionModal extends obsidian.Modal {
    constructor(plugin, file) {
        super(plugin.app);
        this.file = file;
        this.plugin = plugin;
    }
    onOpen() {
        this.titleEl.setText("Add a field in this note after:");
        const inputDiv = this.contentEl.createDiv({
            cls: "frontmatter-modal-value"
        });
        const selectEl = new obsidian.DropdownComponent(inputDiv);
        selectEl.selectEl.addClass("frontmatter-select");
        selectEl.addOption("", "Select line");
        selectEl.addOption("top_0", "top");
        this.app.vault.read(this.file).then(result => {
            let foreHeadText = false;
            let frontmatterStart = false;
            let frontmatterEnd = false;
            let inFrontmatter = false;
            result.split("\n").forEach((line, lineNumber) => {
                if (line != "---" && !foreHeadText && !frontmatterStart) {
                    foreHeadText = true;
                }
                if (line == "---" && !foreHeadText) {
                    if (!frontmatterStart) {
                        frontmatterStart = true;
                        inFrontmatter = true;
                    }
                    else if (!frontmatterEnd) {
                        frontmatterEnd = true;
                        inFrontmatter = false;
                    }
                }
                if (inFrontmatter) {
                    selectEl.addOption(`frontmatter_${lineNumber}`, `${line.substring(0, 30)}${line.length > 30 ? "..." : ""}`);
                }
                else {
                    selectEl.addOption(`body_${lineNumber}`, `${line.substring(0, 30)}${line.length > 30 ? "..." : ""}`);
                }
            });
            selectEl.onChange(value => {
                const valueArray = selectEl.getValue().match(/(\w+)_(\d+)/);
                const position = valueArray[1];
                const lineNumber = Number(valueArray[2]);
                const inFrontmatter = position == "frontmatter" ? true : false;
                const top = position == "top" ? true : false;
                const modal = new fieldSelectModal(this.plugin, this.file, lineNumber, result.split('\n')[lineNumber], inFrontmatter, top);
                this.close();
                modal.open();
            });
        });
    }
}

const types = {
    "input": "Accepts any value",
    "select": "Accepts a single value from a list",
    "multi": "Accepts multiple values from a list",
    "cycle": "Cycle through values from a list"
};
class FileClassAttribute {
    constructor(raw) {
        const completeRegex = new RegExp(/^[_\*~`]*([0-9\w\p{Letter}\p{Emoji_Presentation}][-0-9\w\p{Letter}\p{Emoji_Presentation}\s]*)[_\*~`]*\s*::(.+)?/u);
        const nameRegex = new RegExp(/^[_\*~`]*([0-9\w\p{Letter}\p{Emoji_Presentation}][-0-9\w\p{Letter}\p{Emoji_Presentation}\s]*)[_\*~`]*\s*$/u);
        const detailedFieldRaw = raw.match(completeRegex);
        const simpleFieldRaw = raw.match(nameRegex);
        if (detailedFieldRaw) {
            this.name = detailedFieldRaw[1].trim();
            const settings = JSON.parse(`${detailedFieldRaw[2].trim()}`);
            this.type = settings['type'];
            switch (this.type) {
                case "multi":
                    this.isMulti = true;
                    break;
                case "cycle":
                    this.isCycle = true;
                    break;
            }
            this.options = settings['options'];
        }
        else if (simpleFieldRaw) {
            this.name = simpleFieldRaw[0].trim();
        }
        else {
            const error = new Error("Improper value");
            throw error;
        }
    }
    getField() {
        let values = {};
        this.options.forEach((option, index) => {
            values[index] = option;
        });
        return new Field(this.name, values, this.name, this.isMulti, this.isCycle);
    }
}

class FileClassManager {
    constructor(instance) {
        this.instance = instance;
    }
    all() {
        const filesWithFileClassName = this.instance.plugin.app.vault.getMarkdownFiles().filter(file => {
            const cache = this.instance.plugin.app.metadataCache.getFileCache(file);
            return cache.frontmatter
                && Object.keys(cache.frontmatter).includes('fileClass')
                && cache.frontmatter['fileClass'] == this.instance.name;
        });
        return filesWithFileClassName;
    }
    get(name) {
        const filesWithName = this.all().filter(file => file.basename == name);
        if (filesWithName.length > 1) {
            const error = new Error("More than one value found");
            throw error;
        }
        if (filesWithName.length == 0) {
            const error = new Error("No file value found");
            throw error;
        }
        return filesWithName[0];
    }
    getPath(path) {
        const filesWithName = this.all().filter(file => file.path == path);
        if (filesWithName.length > 1) {
            const error = new Error("More than one value found");
            throw error;
        }
        if (filesWithName.length == 0) {
            const error = new Error("No file value found");
            throw error;
        }
        return filesWithName[0];
    }
}
class FileClass {
    constructor(plugin, name) {
        this.plugin = plugin;
        this.name = name,
            this.objects = new FileClassManager(this);
        this.attributes = [];
    }
    getClassFile() {
        const filesClassPath = this.plugin.settings.classFilesPath;
        const files = this.plugin.app.vault.getMarkdownFiles().filter(file => file.path == `${filesClassPath}${this.name}.md`);
        if (files.length == 0) {
            const error = new Error("no such fileClass in fileClass folder");
            throw error;
        }
        else {
            return files[0];
        }
    }
    getAttributes() {
        return new Promise((resolve, reject) => {
            try {
                const file = this.getClassFile();
                let attributes = [];
                let errors = [];
                this.plugin.app.vault.read(file).then(result => {
                    result.split('\n').forEach(line => {
                        try {
                            const attribute = new FileClassAttribute(line);
                            attributes.push(attribute);
                        }
                        catch (error) {
                            errors.push(error);
                        }
                    });
                    this.attributes = attributes;
                    this.errors = errors;
                    resolve();
                });
            }
            catch (error) {
                reject(error);
            }
        });
    }
    updateAttribute(newType, newOptions, newName, attr) {
        return new Promise((resolve, reject) => {
            const file = this.getClassFile();
            this.plugin.app.vault.read(file).then(result => {
                if (attr) {
                    let newContent = [];
                    result.split('\n').forEach(line => {
                        if (line.startsWith(attr.name)) {
                            if (newType == "input") {
                                newContent.push(newName);
                            }
                            else {
                                let settings = {};
                                settings["type"] = newType;
                                settings["options"] = newOptions;
                                newContent.push(`${newName}:: ${JSON.stringify(settings)}`);
                            }
                        }
                        else {
                            newContent.push(line);
                        }
                    });
                    this.plugin.app.vault.modify(file, newContent.join('\n'));
                }
                else {
                    let settings = {};
                    settings["type"] = newType;
                    settings["options"] = newOptions;
                    result += (`\n${newName}:: ${JSON.stringify(settings)}`);
                    this.plugin.app.vault.modify(file, result);
                }
                resolve();
            });
        });
    }
    removeAttribute(attr) {
        return new Promise((resolve, reject) => {
            const file = this.getClassFile();
            this.plugin.app.vault.read(file).then(result => {
                let newContent = [];
                result.split('\n').forEach(line => {
                    if (!line.startsWith(attr.name)) {
                        newContent.push(line);
                    }
                });
                this.plugin.app.vault.modify(file, newContent.join('\n'));
                resolve();
            });
        });
    }
}
function createFileClass(plugin, name) {
    return __awaiter(this, void 0, void 0, function* () {
        return new Promise((resolve, reject) => {
            const fileClass = new FileClass(plugin, name);
            fileClass.getAttributes().then(() => {
                resolve(fileClass);
            }).catch((error) => {
                reject(error);
            });
        });
    });
}

class FileClassAttributeModal extends obsidian.Modal {
    constructor(app, fileClass, attr) {
        super(app);
        this.type = "input";
        this.options = [];
        this.name = "";
        this.attr = attr;
        this.fileClass = fileClass;
        if (this.attr) {
            this.type = this.attr.type || "input";
            this.options = this.attr.options;
            this.name = this.attr.name;
        }
    }
    onOpen() {
        //title
        this.titleEl.setText(this.attr ? `Manage ${this.attr.name}` : `Create a new attribute for ${this.fileClass.name}`);
        //name input
        const nameInputContainer = this.contentEl.createDiv();
        nameInputContainer.setText("name");
        const nameInput = new obsidian.TextComponent(nameInputContainer);
        this.attr ? nameInput.setValue(this.attr.name) : nameInput.setPlaceholder("Type a name for this attribute");
        //header for select
        const typeSelectHeader = this.contentEl.createDiv();
        const attrLine = typeSelectHeader.createEl("div");
        const attrName = attrLine.createEl("strong");
        attrName.setText(`<${this.name}>`);
        attrLine.append(" fields in files with:");
        String(`---\nfileClass: ${this.fileClass.name}\n...\n---`).split('\n').forEach(line => {
            typeSelectHeader.createEl("div", "yaml-frontmatter-red").setText(line);
        });
        // type select
        const typeSelectContainer = this.contentEl.createDiv({ cls: 'frontmatter-value-selector-container' });
        const typeSelectLabel = typeSelectContainer.createDiv({ cls: 'frontmatter-value-selector-inline-label' });
        typeSelectLabel.setText("will: ");
        const typeSelectDropDown = typeSelectContainer.createDiv({ cls: 'frontmatter-value-selector-toggler' });
        const typeSelect = new obsidian.DropdownComponent(typeSelectDropDown);
        Object.keys(types).forEach(key => {
            typeSelect.addOption(key, types[key]);
        });
        if (this.attr) {
            typeSelect.setValue(this.type);
        }
        // options input
        const optionsInputContainer = this.contentEl.createDiv({ cls: 'frontmatter-value-selector-container' });
        const optionsInputLabel = optionsInputContainer.createDiv({ cls: 'frontmatter-value-selector-inline-label-top' });
        optionsInputLabel.setText("Values");
        const optionsInput = new obsidian.TextAreaComponent(optionsInputContainer);
        optionsInput.inputEl.rows = 3;
        optionsInput.inputEl.cols = 26;
        this.attr ? optionsInput.setValue(this.type == "input" ? "" : this.options.join(", ")) : optionsInput.setPlaceholder("insert values, comma separated");
        !this.attr || this.type == "input" ? optionsInputContainer.hide() : optionsInputContainer.show();
        // event handlers
        typeSelect.onChange(type => {
            type == "input" ? optionsInputContainer.hide() : optionsInputContainer.show();
            this.type = type;
        });
        optionsInput.onChange(value => this.options = value.split(",").map(item => item.trim()));
        nameInput.onChange(value => { this.name = value; attrName.setText(`<${value}>`); });
        // footer buttons
        const footer = this.contentEl.createDiv({ cls: "frontmatter-value-grid-footer" });
        const saveButton = new obsidian.ButtonComponent(footer);
        saveButton.setIcon("checkmark");
        saveButton.onClick(() => {
            this.fileClass.updateAttribute(this.type, this.options, this.name, this.attr);
            this.close();
        });
        if (this.attr) {
            const removeButton = new obsidian.ButtonComponent(footer);
            removeButton.setIcon("trash");
            removeButton.onClick(() => {
                const confirmModal = new obsidian.Modal(this.app);
                confirmModal.titleEl.setText("Please confirm");
                confirmModal.contentEl.createDiv().setText(`Do you really want to remove ${this.attr.name} attribute from ${this.fileClass.name}?`);
                const confirmFooter = confirmModal.contentEl.createDiv({ cls: "frontmatter-value-grid-footer" });
                const confirmButton = new obsidian.ButtonComponent(confirmFooter);
                confirmButton.setIcon("checkmark");
                confirmButton.onClick(() => {
                    this.fileClass.removeAttribute(this.attr);
                    confirmModal.close();
                    this.close();
                });
                const dismissButton = new obsidian.ExtraButtonComponent(confirmFooter);
                dismissButton.setIcon("cross");
                dismissButton.onClick(() => this.close());
                confirmModal.open();
            });
        }
        const cancelButton = new obsidian.ExtraButtonComponent(footer);
        cancelButton.setIcon("cross");
        cancelButton.onClick(() => this.close());
    }
}

class FileClassAttributeSelectModal extends obsidian.Modal {
    constructor(plugin, file) {
        super(plugin.app);
        this.file = file;
        this.plugin = plugin;
    }
    onOpen() {
        this.titleEl.setText(`Select the field to update`);
        createFileClass(this.plugin, this.file.basename).then(fileClass => {
            this.titleEl.setText(`Select the field to update in ${fileClass.name}`);
            const selectContainer = this.contentEl.createDiv();
            const select = new obsidian.DropdownComponent(selectContainer);
            select.addOption("select an attribute", "--select an attribute--");
            fileClass.attributes.forEach(attr => {
                select.addOption(attr.name, attr.name);
            });
            select.addOption("++newAttr++", "++Add a new attribute++");
            select.onChange((attrName) => {
                if (attrName == "++newAttr") {
                    const modal = new FileClassAttributeModal(this.plugin.app, fileClass);
                    modal.open();
                    this.close();
                }
                else {
                    const modal = new FileClassAttributeModal(this.plugin.app, fileClass, fileClass.attributes.filter(attr => attr.name == attrName)[0]);
                    modal.open();
                    this.close();
                }
            });
        });
    }
}

function isMenu(category) {
    return category.addItem !== undefined;
}
function isSelect(category) {
    return category.modals !== undefined;
}
class OptionsList {
    constructor(plugin, file, category) {
        this.file = file;
        this.plugin = plugin;
        this.category = category;
    }
    createExtraOptionList() {
        const cache = this.plugin.app.metadataCache.getCache(this.file.path);
        if (cache.frontmatter) {
            const _a = cache.frontmatter, attributes = __rest(_a, ["position"]);
            Object.keys(attributes).forEach(key => {
                if (this.plugin.settings.globallyIgnoredFields.includes(key)) {
                    delete attributes[key];
                }
            });
            if (isMenu(this.category)) {
                this.category.addSeparator();
            }
            let fileClassForFields = false;
            let fileClassFields = [];
            if (Object.keys(attributes).includes('fileClass')) {
                const fileClass = attributes['fileClass'];
                createFileClass(this.plugin, fileClass).then(fileClass => {
                    this.fileClass = fileClass;
                    fileClassFields = fileClass.attributes.map(attr => attr.name);
                    fileClassForFields = true;
                    Object.keys(attributes).forEach(key => {
                        if (!fileClassFields.includes(key) && key != 'fileClass') {
                            delete attributes[key];
                        }
                    });
                    const fileClassAttributeSelectModal = new FileClassAttributeSelectModal(this.plugin, this.fileClass.getClassFile());
                    if (isMenu(this.category)) {
                        this.category.addSeparator();
                        this.category.addItem((item) => {
                            item.setIcon("gear");
                            item.setTitle(`Manage <${this.fileClass.name}> fields`);
                            item.onClick((evt) => {
                                fileClassAttributeSelectModal.open();
                            });
                        });
                    }
                    else {
                        this.category.addOption("manage_fileClass_attributes", "Manage fileClass attributes");
                        this.category.modals["add_field_at_section"] = () => fileClassAttributeSelectModal.open();
                    }
                    this.createExtraOptionsListForFrontmatter(attributes).then(() => {
                        this.createExtraOptionsListForInlineFields(this.file, fileClassForFields, fileClassFields).then(() => {
                            if (isMenu(this.category)) {
                                this.category.addSeparator();
                            }
                            this.addSectionSelectModalOption(this.plugin);
                        });
                    });
                }).catch((error) => {
                    this.createExtraOptionsListForFrontmatter(attributes).then(() => {
                        this.createExtraOptionsListForInlineFields(this.file).then(() => {
                            if (isMenu(this.category)) {
                                this.category.addSeparator();
                            }
                            this.addSectionSelectModalOption(this.plugin);
                        });
                    });
                });
            }
            else {
                this.createExtraOptionsListForFrontmatter(attributes).then(() => {
                    this.createExtraOptionsListForInlineFields(this.file).then(() => {
                        if (isMenu(this.category)) {
                            this.category.addSeparator();
                        }
                        this.addSectionSelectModalOption(this.plugin);
                    });
                });
            }
        }
        else {
            this.createExtraOptionsListForInlineFields(this.file).then(() => {
                if (isMenu(this.category)) {
                    this.category.addSeparator();
                }
                this.addSectionSelectModalOption(this.plugin);
            });
        }
    }
    createExtraOptionsListForInlineFields(file, fileClassForFields = false, fileClassFields = []) {
        return __awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => {
                let attributes = {};
                const regex = new RegExp(/[_\*~`]*([0-9\w\p{Letter}\p{Emoji_Presentation}][-0-9\w\p{Letter}\p{Emoji_Presentation}\s]*)[_\*~`]*\s*::(.+)?/u);
                this.plugin.app.vault.read(file).then((result) => {
                    result.split('\n').map(line => {
                        const regexResult = line.match(regex);
                        if (regexResult
                            && regexResult.length > 0
                            && !this.plugin.settings.globallyIgnoredFields.includes(regexResult[1].trim())) {
                            if (fileClassForFields) {
                                if (fileClassFields.includes(regexResult[1].trim())) {
                                    attributes[regexResult[1].trim()] = regexResult.length > 1 && regexResult[2] ? regexResult[2].trim() : "";
                                }
                            }
                            else {
                                attributes[regexResult[1].trim()] = regexResult.length > 1 && regexResult[2] ? regexResult[2].trim() : "";
                            }
                        }
                    });
                    if (Object.keys(attributes).length > 0) {
                        if (isMenu(this.category)) {
                            this.category.addSeparator();
                        }
                        this.buildExtraOptionsList(attributes);
                    }
                    resolve();
                });
            });
        });
    }
    createExtraOptionsListForFrontmatter(attributes) {
        return __awaiter(this, void 0, void 0, function* () {
            this.buildExtraOptionsList(attributes);
        });
    }
    buildExtraOptionsList(attributes) {
        Object.keys(attributes).forEach((key) => {
            const value = attributes[key];
            const propertySettings = this.getPropertySettings(key);
            if (propertySettings && propertySettings.values) {
                if (propertySettings.isCycle) {
                    this.addCycleMenuOption(key, value, propertySettings);
                }
                else if (propertySettings.isMulti) {
                    this.addMultiMenuOption(key, value, propertySettings);
                }
                else {
                    this.addSelectMenuOption(key, value, propertySettings);
                }
            }
            else if (isBoolean(value) || /true/i.test(value) || /false/i.test(value)) {
                let toBooleanValue;
                if (isBoolean(value)) {
                    toBooleanValue = value;
                }
                else if (/true/i.test(value)) {
                    toBooleanValue = true;
                }
                else if (/false/i.test(value)) {
                    toBooleanValue = false;
                }
                this.addToggleMenuOption(key, toBooleanValue);
            }
            else {
                this.addTextInputMenuOption(key, value ? value.toString() : "");
            }
        });
    }
    addSectionSelectModalOption(plugin) {
        const modal = new chooseSectionModal(this.plugin, this.file);
        if (isMenu(this.category)) {
            this.category.addItem((item) => {
                item.setIcon("pencil");
                item.setTitle("Add field at section...");
                item.onClick((evt) => {
                    modal.open();
                });
            });
        }
        else if (isSelect(this.category)) {
            this.category.addOption("add_field_at_section", "Add field at section...");
            this.category.modals["add_field_at_section"] = () => modal.open();
        }
    }
    addCycleMenuOption(name, value, propertySettings) {
        const values = propertySettings.values;
        const keys = Object.keys(values);
        const keyForValue = keys.find(key => values[key] === value);
        let nextValue;
        if (keyForValue) {
            const nextKey = keys[(keys.indexOf(keyForValue) + 1) % keys.length];
            nextValue = values[nextKey];
        }
        else {
            nextValue = values[Object.keys(values)[0]];
        }
        if (isMenu(this.category)) {
            this.category.addItem((item) => {
                item.setTitle(`${name} : ${value} â–· ${nextValue}`);
                item.setIcon('switch');
                item.onClick((evt) => {
                    replaceValues(this.plugin.app, this.file, name, nextValue);
                });
            });
        }
        else if (isSelect(this.category)) {
            this.category.addOption(`${name}_${value}_${nextValue}`, `${name} : ${value} â–· ${nextValue}`);
            this.category.modals[`${name}_${value}_${nextValue}`] = () => replaceValues(this.plugin.app, this.file, name, nextValue);
        }
    }
    addMultiMenuOption(name, value, propertySettings) {
        const modal = new valueMultiSelectModal(this.plugin.app, this.file, name, value, propertySettings);
        modal.titleEl.setText("Select values");
        if (isMenu(this.category)) {
            this.category.addItem((item) => {
                item.setTitle(`Update <${name}>`);
                item.setIcon('bullet-list');
                item.onClick((evt) => {
                    modal.open();
                });
            });
        }
        else if (isSelect(this.category)) {
            this.category.addOption(`update_${name}`, `Update <${name}>`);
            this.category.modals[`update_${name}`] = () => modal.open();
        }
    }
    addSelectMenuOption(name, value, propertySettings) {
        const modal = new valueToggleModal(this.plugin.app, this.file, name, value, propertySettings);
        modal.titleEl.setText("Select value");
        if (isMenu(this.category)) {
            this.category.addItem((item) => {
                item.setTitle(`Update ${name}`);
                item.setIcon('right-triangle');
                item.onClick((evt) => modal.open());
            });
        }
        else if (isSelect(this.category)) {
            this.category.addOption(`update_${name}`, `Update <${name}>`);
            this.category.modals[`update_${name}`] = () => modal.open();
        }
    }
    addToggleMenuOption(name, value) {
        const modal = new valueToggleModal$1(this.plugin.app, this.file, name, value);
        modal.titleEl.setText(`Change Value for <${name}>`);
        if (isMenu(this.category)) {
            this.category.addItem((item) => {
                item.setTitle(`Update <${name}>`);
                item.setIcon('checkmark');
                item.onClick((evt) => { modal.open(); });
            });
        }
        else if (isSelect(this.category)) {
            this.category.addOption(`update_${name}`, `Update <${name}>`);
            this.category.modals[`update_${name}`] = () => modal.open();
        }
    }
    addTextInputMenuOption(name, value) {
        const modal = new valueTextInputModal(this.plugin.app, this.file, name, value);
        modal.titleEl.setText(`Change Value for <${name}>`);
        if (isMenu(this.category)) {
            this.category.addItem((item) => {
                item.setTitle(`Update <${name}>`);
                item.setIcon('pencil');
                item.onClick((evt) => modal.open());
            });
        }
        else if (isSelect(this.category)) {
            this.category.addOption(`update_${name}`, `Update <${name}>`);
            this.category.modals[`update_${name}`] = () => modal.open();
        }
    }
    getPropertySettings(propertyName) {
        const matchingSettings = this.plugin.settings.presetFields.filter(p => p.name == propertyName);
        if (this.fileClass) {
            const fileClassAttributesWithName = this.fileClass.attributes.filter(attr => attr.name == propertyName);
            if (fileClassAttributesWithName.length > 0) {
                const fileClassAttribute = fileClassAttributesWithName[0];
                if (fileClassAttribute.options) {
                    return fileClassAttribute.getField();
                }
                else if (matchingSettings.length > 0) {
                    return matchingSettings[0];
                }
            }
        }
        else if (matchingSettings.length > 0) {
            return matchingSettings[0];
        }
    }
}

class linkContextMenu {
    constructor(plugin) {
        this.plugin = plugin;
        this.createContextMenu();
    }
    createContextMenu() {
        this.plugin.registerEvent(this.plugin.app.workspace.on('file-menu', (menu, abstractFile, source) => {
            if (this.plugin.settings.displayFieldsInContextMenu && (source === "link-context-menu" ||
                source === "calendar-context-menu" ||
                source === 'pane-more-options' ||
                source === 'file-explorer-context-menu')) {
                const files = this.plugin.app.vault.getMarkdownFiles().filter(mdFile => mdFile.path == abstractFile.path);
                if (files.length > 0) {
                    const file = files[0];
                    this.file = file;
                    if (file.parent.path + "/" == this.plugin.settings.classFilesPath) {
                        menu.addSeparator();
                        menu.addItem((item) => {
                            item.setIcon("gear");
                            item.setTitle(`Manage <${file.basename}> fields`);
                            item.onClick((evt) => {
                                const fileClassAttributeSelectModal = new FileClassAttributeSelectModal(this.plugin, file);
                                fileClassAttributeSelectModal.open();
                            });
                        });
                    }
                    else {
                        this.optionsList = new OptionsList(this.plugin, this.file, menu);
                        this.optionsList.createExtraOptionList();
                    }
                }
            }
        }));
    }
}

class SelectModal extends obsidian.DropdownComponent {
    constructor(containerEl) {
        super(containerEl);
        this.modals = {};
    }
}

class NoteFieldsCommandsModal extends obsidian.Modal {
    constructor(app, plugin, file) {
        super(app);
        this.app = app;
        this.plugin = plugin;
        this.file = file;
    }
    onOpen() {
        this.titleEl.setText(`Select the field to manage`);
        const optionsListContainer = this.contentEl.createDiv();
        this.select = new SelectModal(optionsListContainer);
        this.select.addOption("---", "Choose Field");
        this.optionsList = new OptionsList(this.plugin, this.file, this.select);
        this.optionsList.createExtraOptionList();
        this.select.onChange((value) => {
            this.select.modals[value]();
            this.close();
        });
        this.select.selectEl.focus();
    }
}

const linkTypes = {
    "backLinks": ["a.internal-link"],
    "outgoingLinks": ["a.internal-link"],
    "fileExplorer": ["div.nav-file-title-content"],
    "search": [".tree-item-inner"],
    "breadcrumb": ["div.internal-link", "td.internal-link"],
    "editor": ["span.cm-hmd-internal-link"]
};
const matchTypes = {
    'exact': "Exact word",
    'contains': "Contains this value",
    'whiteSpace': "Value within whitespace separated words",
    'startswith': "Start with this value",
    'endswith': "Ends with this value"
};
const matchSign = {
    'exact': "",
    'contains': "*",
    'startswith': "^",
    'endswith': "$",
    'whiteSpace': "~"
};
class CSSLink {
    constructor() {
        this.isTag = false;
        this.name = "";
        this.value = "";
        this.matchCaseSensitive = false;
        this.match = "exact";
        this.linksTypes = Object.keys(linkTypes);
    }
    render() {
        console.log(this.linksTypes.length == Object.keys(linkTypes).length);
        const selectedLinksTypes = [];
        const instructions = ["/*Supercharged links styling\ncopy and paste this in your css snippet\n"];
        if (this.linksTypes.length == Object.keys(linkTypes).length) {
            // if everything is selected : a single css selector is needed
            console.log("been here");
            const instruction = `[data-link-${this.isTag ?
                "tags" : this.name}${matchSign[this.match]}="${this.isTag ? "#" : ""}${this.value}"${this.matchCaseSensitive ?
                "" : " i"}]{\n    //put your styles here\n}\n`;
            instructions.push(instruction);
        }
        else {
            // if not: create specific selectors
            console.log("been there");
            Object.keys(linkTypes).forEach(element => {
                if (this.linksTypes.contains(element)) {
                    selectedLinksTypes.push(...linkTypes[element]);
                }
            });
            selectedLinksTypes.forEach(selector => {
                console.log("selector ", selector);
                const instruction = `${selector}[data-link-${this.isTag ?
                    "tags" : this.name}${matchSign[this.match]}="${this.isTag ? "#" : ""}${this.value}"${this.matchCaseSensitive ?
                    "" : " i"}]{\n"    //put your styles here\n}\n`;
                instructions.push(instruction);
            });
        }
        return instructions.join('\n');
    }
}

class CSSBuilderModal extends obsidian.Modal {
    constructor(plugin) {
        super(plugin.app);
        this.cssLink = new CSSLink();
    }
    onOpen() {
        this.titleEl.setText(`Describe the way you want to style your links`);
        // case sensitive
        const caseSensitiveTogglerContainer = this.contentEl.createDiv();
        const caseSensitiveToggler = this.createTogglerContainer(caseSensitiveTogglerContainer, "Case sensitive");
        caseSensitiveToggler.setTooltip("should the css selector be case sensitive?");
        caseSensitiveToggler.setValue(this.cssLink.matchCaseSensitive);
        caseSensitiveToggler.onChange(value => this.cssLink.matchCaseSensitive = value);
        // matching type
        const matchingTypeSelectContainer = this.contentEl.createDiv();
        const matchingTypeSelectLabel = matchingTypeSelectContainer.createDiv();
        matchingTypeSelectLabel.setText("Matching type: ");
        const select = new obsidian.DropdownComponent(matchingTypeSelectContainer);
        Object.keys(matchTypes).forEach(key => {
            select.addOption(key, matchTypes[key]);
            if (key == this.cssLink.match) {
                select.setValue(key);
            }
        });
        select.onChange((value) => {
            this.cssLink.match = value;
        });
        // is tag
        const tagTogglerContainer = this.contentEl.createDiv();
        const isTagToggler = this.createTogglerContainer(tagTogglerContainer, "Tag");
        isTagToggler.setTooltip("Is this attribute a tag?");
        isTagToggler.setValue(this.cssLink.isTag);
        isTagToggler.onChange(value => {
            this.cssLink.isTag = value;
            if (!value) {
                attrNameContainer.show();
            }
            else {
                attrNameContainer.hide();
            }
        });
        // attribute name
        const attrNameContainer = this.contentEl.createDiv();
        const attrName = this.createInputContainer(attrNameContainer, "Name", "Attribute name");
        attrName.onChange(name => {
            this.cssLink.name = name;
        });
        if (!this.cssLink.isTag) {
            attrNameContainer.show();
        }
        else {
            attrNameContainer.hide();
        }
        // attribute value
        const attrValueContainer = this.contentEl.createDiv();
        const attrValue = this.createInputContainer(attrValueContainer, "Value", "Attribute or Tag (without #) value");
        attrValue.onChange(value => { this.cssLink.value = value; });
        // links categories
        const linkTypesSelectContainer = this.contentEl.createDiv();
        Object.keys(linkTypes).forEach(value => {
            this.buildValueToggler(linkTypesSelectContainer, value);
        });
        // generate button
        const footer = this.contentEl.createDiv();
        const saveButton = new obsidian.ButtonComponent(footer);
        saveButton.setButtonText("Generate CSS Boilerplate");
        saveButton.onClick(() => {
            cssBoilerPlate.setValue(this.cssLink.render());
        });
        //result
        const cssBoilerPlateContainer = this.contentEl.createDiv();
        const cssBoilerPlate = new obsidian.TextAreaComponent(cssBoilerPlateContainer);
        cssBoilerPlate.inputEl.setAttr("rows", "10");
        cssBoilerPlate.inputEl.setAttr("style", "width: 30em");
    }
    buildValueToggler(valueGrid, linkType) {
        const valueSelectorContainer = valueGrid.createDiv({
            cls: "frontmatter-value-selector-container"
        });
        const valueTogglerContainer = valueSelectorContainer.createDiv({
            cls: "frontmatter-value-selector-toggler"
        });
        const valueToggler = new obsidian.ToggleComponent(valueTogglerContainer);
        this.cssLink.linksTypes.forEach(value => {
            if (value == linkType) {
                valueToggler.setValue(true);
            }
        });
        valueToggler.onChange(value => {
            if (value && !this.cssLink.linksTypes.includes(linkType)) {
                this.cssLink.linksTypes.push(linkType);
            }
            if (!value) {
                this.cssLink.linksTypes.remove(linkType);
            }
        });
        const valueLabel = valueSelectorContainer.createDiv({
            cls: "frontmatter-value-selector-label"
        });
        valueLabel.setText(linkType);
    }
    createTogglerContainer(parentNode, label) {
        const propertyContainerLabel = parentNode.createDiv({
            cls: 'frontmatter-checkbox-toggler'
        });
        propertyContainerLabel.setText(label);
        const toggler = new obsidian.ToggleComponent(parentNode);
        return toggler;
    }
    createInputContainer(parentNode, label, placeholder = "") {
        const propertyNameContainerLabel = parentNode.createDiv();
        propertyNameContainerLabel.setText(label);
        const input = new obsidian.TextComponent(parentNode);
        input.setPlaceholder(placeholder);
        return input;
    }
}

class SuperchargedLinks extends obsidian.Plugin {
    constructor() {
        super(...arguments);
        this.initialProperties = [];
    }
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            console.log('Supercharged links loaded');
            yield this.loadSettings();
            this.settings.presetFields.forEach(prop => {
                const property = new Field();
                Object.assign(property, prop);
                this.initialProperties.push(property);
            });
            this.addSettingTab(new SuperchargedLinksSettingTab(this.app, this));
            this.registerMarkdownPostProcessor((el, ctx) => {
                updateElLinks(this.app, this.settings, el, ctx);
            });
            this.registerEvent(this.app.workspace.on('file-open', () => {
                updateDivLinks(this.app, this.settings);
            }));
            this.registerEvent(this.app.metadataCache.on('changed', (_file) => {
                updateVisibleLinks(this.app, this.settings);
                updateDivLinks(this.app, this.settings);
            }));
            const ext = state.Prec.lowest(this.buildCMViewPlugin(this.app, this.settings));
            this.registerEditorExtension(ext);
            this.observers = [];
            this.app.workspace.onLayoutReady(() => this.initViewObservers(this));
            this.app.workspace.on("layout-change", () => this.initViewObservers(this));
            this.addCommand({
                id: "field_options",
                name: "field options",
                hotkeys: [
                    {
                        modifiers: ["Alt"],
                        key: 'O',
                    },
                ],
                callback: () => {
                    const leaf = this.app.workspace.activeLeaf;
                    if (leaf.view instanceof obsidian.MarkdownView && leaf.view.file) {
                        const fieldsOptionsModal = new NoteFieldsCommandsModal(this.app, this, leaf.view.file);
                        fieldsOptionsModal.open();
                    }
                },
            });
            /* TODO : add a context menu for fileClass files to show the same options as in FileClassAttributeSelectModal*/
            this.addCommand({
                id: "fileClassAttr_options",
                name: "fileClass attributes options",
                hotkeys: [
                    {
                        modifiers: ["Alt"],
                        key: 'P',
                    },
                ],
                callback: () => {
                    const leaf = this.app.workspace.activeLeaf;
                    if (leaf.view instanceof obsidian.MarkdownView && leaf.view.file && `${leaf.view.file.parent.path}/` == this.settings.classFilesPath) {
                        const modal = new FileClassAttributeSelectModal(this, leaf.view.file);
                        modal.open();
                    }
                    else {
                        new obsidian.Notice("This is not a fileClass", 2500);
                    }
                },
            });
            this.addCommand({
                id: "css_snippet_helper",
                name: "CSS Snippet helper",
                callback: () => {
                    const formModal = new CSSBuilderModal(this);
                    formModal.open();
                },
            });
            new linkContextMenu(this);
        });
    }
    initViewObservers(plugin) {
        plugin.observers.forEach((observer) => observer.disconnect());
        plugin.registerViewType('backlink', plugin);
        plugin.registerViewType('outgoing-link', plugin);
        plugin.registerViewType('search', plugin);
        plugin.registerViewType('breadcrumbs-matrix', plugin, 'internal-link', '', false);
        plugin.registerViewType('graph-analysis', plugin, 'internal-link', '', false);
        plugin.registerViewType('starred', plugin, 'nav-file', 'nav-file-title-content');
        plugin.registerViewType('file-explorer', plugin, 'nav-file', 'nav-file-title-content');
    }
    registerViewType(viewTypeName, plugin, parent_class = 'tree-item', own_class = 'tree-item-inner', searchParent = true) {
        const leaves = this.app.workspace.getLeavesOfType(viewTypeName);
        if (leaves.length > 1)
            console.error('more than one ' + viewTypeName + ' panel');
        else if (leaves.length < 1)
            return;
        else {
            plugin.watchContainer(leaves[0].view.containerEl, plugin, parent_class, own_class, searchParent);
        }
    }
    watchContainer(container, plugin, parent_class = 'tree-item', own_class = 'tree-item-inner', searchParent = true) {
        const settings = plugin.settings;
        const app = plugin.app;
        let observer = new MutationObserver((records, _) => {
            records.forEach((mutation) => {
                if (mutation.type === 'childList') {
                    mutation.addedNodes.forEach((n) => {
                        if ('className' in n) {
                            // @ts-ignore
                            if (n.className.includes && typeof n.className.includes === 'function' && n.className.includes(parent_class)) {
                                if (searchParent) {
                                    const fileDivs = n.getElementsByClassName(own_class);
                                    for (let i = 0; i < fileDivs.length; ++i) {
                                        const link = fileDivs[i];
                                        clearExtraAttributes(link);
                                        if (settings.enableBacklinks) {
                                            updateDivExtraAttributes(app, settings, link, "");
                                        }
                                    }
                                }
                                else {
                                    clearExtraAttributes(n);
                                    updateDivExtraAttributes(app, settings, n, "");
                                }
                            }
                        }
                    });
                }
            });
        });
        observer.observe(container, { subtree: true, childList: true, attributes: false });
        plugin.observers.push(observer);
    }
    buildCMViewPlugin(app, _settings) {
        // Implements the live preview supercharging
        // Code structure based on https://github.com/nothingislost/obsidian-cm6-attributes/blob/743d71b0aa616407149a0b6ea5ffea28e2154158/src/main.ts
        // Code help credits to @NothingIsLost! They have been a great help getting this to work properly.
        class HeaderWidget extends view.WidgetType {
            constructor(attributes) {
                super();
                this.attributes = attributes;
            }
            toDOM() {
                let headerEl = document.createElement("span");
                headerEl.setAttrs(this.attributes);
                headerEl.addClass('data-link-icon');
                // create a naive bread crumb
                return headerEl;
            }
            ignoreEvent() {
                return true;
            }
        }
        const settings = _settings;
        const viewPlugin = view.ViewPlugin.fromClass(class {
            constructor(view) {
                this.decorations = this.buildDecorations(view);
            }
            update(update) {
                if (update.docChanged || update.viewportChanged) {
                    this.decorations = this.buildDecorations(update.view);
                }
            }
            destroy() { }
            buildDecorations(view$1) {
                let builder = new rangeset.RangeSetBuilder();
                if (!settings.enableEditor) {
                    return builder.finish();
                }
                const mdView = view$1.state.field(obsidian.editorViewField);
                let lastAttributes = {};
                for (let { from, to } of view$1.visibleRanges) {
                    language.syntaxTree(view$1.state).iterate({
                        from,
                        to,
                        enter: (type, from, to) => {
                            const tokenProps = type.prop(streamParser.tokenClassNodeProp);
                            if (tokenProps) {
                                const props = new Set(tokenProps.split(" "));
                                const isLink = props.has("hmd-internal-link");
                                const isAlias = props.has("link-alias");
                                const isPipe = props.has("link-alias-pipe");
                                // if (props.has("hmd-internal-link")) {console.log("props", type, from, to)}
                                if (isLink && !isAlias && !isPipe) {
                                    let linkText = view$1.state.doc.sliceString(from, to);
                                    linkText = linkText.split("#")[0];
                                    let file = app.metadataCache.getFirstLinkpathDest(linkText, mdView.file.basename);
                                    if (file) {
                                        let _attributes = fetchTargetAttributesSync(app, settings, file, true);
                                        let attributes = {};
                                        for (let key in _attributes) {
                                            attributes["data-link-" + key] = _attributes[key];
                                        }
                                        let deco = view.Decoration.mark({
                                            attributes
                                        });
                                        let iconDeco = view.Decoration.widget({
                                            widget: new HeaderWidget(attributes),
                                        });
                                        builder.add(from, from, iconDeco);
                                        builder.add(from, to, deco);
                                        lastAttributes = attributes;
                                    }
                                }
                                else if (isLink && isAlias) {
                                    let deco = view.Decoration.mark({
                                        attributes: lastAttributes
                                    });
                                    builder.add(from, to, deco);
                                }
                            }
                        }
                    });
                }
                return builder.finish();
            }
        }, {
            decorations: v => v.decorations
        });
        return viewPlugin;
    }
    onunload() {
        this.observers.forEach((observer) => observer.disconnect());
        console.log('Supercharged links unloaded');
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings.presetFields = this.initialProperties;
            yield this.saveData(this.settings);
        });
    }
}

module.exports = SuperchargedLinks;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInNyYy9GaWVsZC50cyIsInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmcudHMiLCJzcmMvc2V0dGluZ3MvRmllbGRTZXR0aW5nc01vZGFsLnRzIiwic3JjL3NldHRpbmdzL1N1cGVyY2hhcmdlZExpbmtzU2V0dGluZ1RhYi50cyIsInNyYy9saW5rQXR0cmlidXRlcy9saW5rQXR0cmlidXRlcy50cyIsInNyYy9zZXR0aW5ncy9TdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzLnRzIiwic3JjL29wdGlvbnMvcmVwbGFjZVZhbHVlcy50cyIsInNyYy9vcHRpb25Nb2RhbHMvdmFsdWVNdWx0aVNlbGVjdE1vZGFsLnRzIiwic3JjL29wdGlvbk1vZGFscy92YWx1ZVRleHRJbnB1dE1vZGFsLnRzIiwic3JjL29wdGlvbk1vZGFscy92YWx1ZVRvZ2dsZU1vZGFsLnRzIiwic3JjL29wdGlvbk1vZGFscy92YWx1ZVNlbGVjdE1vZGFsLnRzIiwic3JjL29wdGlvbk1vZGFscy9hZGROZXdGaWVsZE1vZGFsLnRzIiwic3JjL29wdGlvbk1vZGFscy9maWVsZFNlbGVjdE1vZGFsLnRzIiwic3JjL29wdGlvbk1vZGFscy9jaG9vc2VTZWN0aW9uTW9kYWwudHMiLCJzcmMvZmlsZUNsYXNzL2ZpbGVDbGFzc0F0dHJpYnV0ZS50cyIsInNyYy9maWxlQ2xhc3MvZmlsZUNsYXNzLnRzIiwic3JjL2ZpbGVDbGFzcy9GaWxlQ2xhc3NBdHRyaWJ1dGVNb2RhbC50cyIsInNyYy9maWxlQ2xhc3MvRmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwudHMiLCJzcmMvb3B0aW9ucy9PcHRpb25zTGlzdC50cyIsInNyYy9vcHRpb25zL2xpbmtDb250ZXh0TWVudS50cyIsInNyYy9vcHRpb25Nb2RhbHMvU2VsZWN0TW9kYWwudHMiLCJzcmMvb3B0aW9ucy9Ob3RlRmllbGRzQ29tbWFuZHNNb2RhbC50cyIsInNyYy9jc3NCdWlsZGVyL2Nzc0xpbmsudHMiLCJzcmMvY3NzQnVpbGRlci9jc3NCdWlsZGVyTW9kYWwudHMiLCJtYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuIiwiaW50ZXJmYWNlIEZpZWxke1xuICAgIGlkOiBzdHJpbmdcblx0bmFtZTogc3RyaW5nXG5cdHZhbHVlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuICAgIGlzQ3ljbGU6IGJvb2xlYW5cbiAgICBpc011bHRpOiBib29sZWFuXG4gICAgdmFsdWVzTGlzdE5vdGVQYXRoOiBzdHJpbmdcbn1cblxuY2xhc3MgRmllbGR7XG5cblx0Y29uc3RydWN0b3IobmFtZTogc3RyaW5nID0gXCJcIiwgXG4gICAgICAgICAgICAgICAgdmFsdWVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge30sIFxuICAgICAgICAgICAgICAgIGlkOiBzdHJpbmcgPSBcIlwiLCBcbiAgICAgICAgICAgICAgICBpc011bHRpOiBib29sZWFuID0gZmFsc2UsIFxuICAgICAgICAgICAgICAgIGlzQ3ljbGU6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICAgICAgICAgICAgICB2YWx1ZXNMaXN0Tm90ZVBhdGg6IHN0cmluZyA9IFwiXCIpe1xuXHRcdHRoaXMubmFtZSA9IG5hbWVcblx0XHR0aGlzLnZhbHVlcyA9IHZhbHVlc1xuICAgICAgICB0aGlzLmlkID0gaWRcbiAgICAgICAgdGhpcy5pc0N5Y2xlID0gaXNDeWNsZVxuICAgICAgICB0aGlzLmlzTXVsdGkgPSBpc011bHRpXG4gICAgICAgIHRoaXMudmFsdWVzTGlzdE5vdGVQYXRoID0gdmFsdWVzTGlzdE5vdGVQYXRoXG4gICAgICAgIHRoaXMuaW5zZXJ0TmV3VmFsdWUuYmluZCh0aGlzKVxuXHR9XG5cbiAgICBwdWJsaWMgYXN5bmMgaW5zZXJ0TmV3VmFsdWUodmFsdWU6c3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+e1xuICAgICAgICBsZXQgbmV3S2V5ID0gMVxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnZhbHVlcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgaWYocGFyc2VJbnQoa2V5KSAmJiBwYXJzZUludChrZXkpID49IG5ld0tleSl7XG4gICAgICAgICAgICAgICAgbmV3S2V5ID0gcGFyc2VJbnQoa2V5KSArIDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy52YWx1ZXNbbmV3S2V5LnRvU3RyaW5nKCldID0gdmFsdWVcbiAgICAgICAgcmV0dXJuIG5ld0tleS50b1N0cmluZygpXG4gICAgfVxuXG4gICAgc3RhdGljIGNvcHlQcm9wZXJ0eSh0YXJnZXQ6IEZpZWxkLCBzb3VyY2U6IEZpZWxkKXtcbiAgICAgICAgdGFyZ2V0LmlkID0gc291cmNlLmlkXG4gICAgICAgIHRhcmdldC5uYW1lID0gc291cmNlLm5hbWVcbiAgICAgICAgdGFyZ2V0LmlzQ3ljbGUgPSBzb3VyY2UuaXNDeWNsZVxuICAgICAgICB0YXJnZXQuaXNNdWx0aSA9IHNvdXJjZS5pc011bHRpXG4gICAgICAgIHRhcmdldC52YWx1ZXNMaXN0Tm90ZVBhdGggPSBzb3VyY2UudmFsdWVzTGlzdE5vdGVQYXRoXG4gICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZS52YWx1ZXMpLmZvckVhY2goayA9PiB7XG4gICAgICAgICAgICB0YXJnZXQudmFsdWVzW2tdID0gc291cmNlLnZhbHVlc1trXVxuICAgICAgICB9KVxuICAgICAgICBPYmplY3Qua2V5cyh0YXJnZXQudmFsdWVzKS5mb3JFYWNoKGsgPT4ge1xuICAgICAgICAgICAgaWYoIU9iamVjdC5rZXlzKHNvdXJjZS52YWx1ZXMpLmluY2x1ZGVzKGspKXtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGFyZ2V0LnZhbHVlc1trXVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRmllbGQiLCJpbXBvcnQge0FwcCwgU2V0dGluZywgUGx1Z2lufSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IFN1cGVyY2hhcmdlZExpbmtzIGZyb20gXCJtYWluXCJcbmltcG9ydCBGaWVsZCBmcm9tIFwic3JjL0ZpZWxkXCJcbmltcG9ydCBGaWVsZFNldHRpbmdzTW9kYWwgZnJvbSBcInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmdzTW9kYWxcIlxuaW1wb3J0IHsgcmVzb2x2ZVR4dCB9IGZyb20gXCJkbnNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaWVsZFNldHRpbmcgZXh0ZW5kcyBTZXR0aW5nIHtcbiAgICBwcm9wZXJ0eTogRmllbGRcbiAgICBhcHA6IEFwcFxuICAgIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3NcbiAgICBjb250YWluZXJFbDogSFRNTEVsZW1lbnRcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHByb3BlcnR5OiBGaWVsZCwgYXBwOiBBcHAsIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3Mpe1xuICAgICAgICBzdXBlcihjb250YWluZXJFbClcbiAgICAgICAgdGhpcy5jb250YWluZXJFbCA9IGNvbnRhaW5lckVsXG4gICAgICAgIHRoaXMucHJvcGVydHkgPSBwcm9wZXJ0eVxuICAgICAgICB0aGlzLmFwcCA9IGFwcFxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxuICAgICAgICB0aGlzLnNldFRleHRDb250ZW50V2l0aG5hbWUoKVxuICAgICAgICB0aGlzLmFkZEVkaXRCdXR0b24oKVxuICAgICAgICB0aGlzLmFkZERlbGV0ZUJ1dHRvbigpXG5cbiAgICB9XG4gICAgXG4gICAgc2V0VGV4dENvbnRlbnRXaXRobmFtZSgpOiB2b2lke1xuICAgICAgICB0aGlzLmluZm9FbC50ZXh0Q29udGVudCA9IFxuICAgICAgICBgJHt0aGlzLnByb3BlcnR5Lm5hbWV9OiBbJHtPYmplY3Qua2V5cyh0aGlzLnByb3BlcnR5LnZhbHVlcykubWFwKGsgPT4gdGhpcy5wcm9wZXJ0eS52YWx1ZXNba10pLmpvaW4oJywgJyl9XWBcbiAgICB9XG4gICAgXG5cbiAgICBhZGRFZGl0QnV0dG9uKCk6IHZvaWR7XG4gICAgICAgIHRoaXMuYWRkQnV0dG9uKChiKSA9PiB7XG4gICAgICAgICAgICBiLnNldEljb24oXCJwZW5jaWxcIilcbiAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiRWRpdFwiKVxuICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBtb2RhbCA9IG5ldyBGaWVsZFNldHRpbmdzTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLCB0aGlzLmNvbnRhaW5lckVsLCB0aGlzLCB0aGlzLnByb3BlcnR5KTtcbiAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBhZGREZWxldGVCdXR0b24oKTogdm9pZHtcbiAgICAgICAgdGhpcy5hZGRCdXR0b24oKGIpID0+IHtcbiAgICAgICAgICAgIGIuc2V0SWNvbihcInRyYXNoXCIpXG4gICAgICAgICAgICAuc2V0VG9vbHRpcChcIkRlbGV0ZVwiKVxuICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFeGlzdGluZ1Byb3BlcnR5ID0gdGhpcy5wbHVnaW4uaW5pdGlhbFByb3BlcnRpZXMuZmlsdGVyKHAgPT4gcC5pZCA9PSB0aGlzLnByb3BlcnR5LmlkKVswXVxuICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRFeGlzdGluZ1Byb3BlcnR5KXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uaW5pdGlhbFByb3BlcnRpZXMucmVtb3ZlKGN1cnJlbnRFeGlzdGluZ1Byb3BlcnR5KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdFbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuc2V0dGluZ0VsKVxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldFZhbHVlc0xpc3RGcm9tTm90ZShub3RlUGF0aDogc3RyaW5nLCBhcHA6IEFwcCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IHZhbHVlczogQXJyYXk8c3RyaW5nPiA9IFtdXG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKG1kRmlsZSA9PiBtZEZpbGUucGF0aCA9PSBub3RlUGF0aClcbiAgICAgICAgICAgIGlmKGZpbGVzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlc1swXVxuICAgICAgICAgICAgICAgIGFwcC52YXVsdC5yZWFkKGZpbGUpLnRoZW4oKHJlc3VsdDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zcGxpdCgnXFxuJykuZm9yRWFjaChsaW5lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKC9eKC4qKSQvLnRlc3QobGluZSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKGxpbmUudHJpbSgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlcylcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKFtdKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgfVxufSIsImltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcsIFRleHRDb21wb25lbnQsIE5vdGljZSwgQnV0dG9uQ29tcG9uZW50LCBFeHRyYUJ1dHRvbkNvbXBvbmVudCwgVG9nZ2xlQ29tcG9uZW50IH0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwibWFpblwiXG5pbXBvcnQgRmllbGQgZnJvbSBcInNyYy9GaWVsZFwiXG5pbXBvcnQgRmllbGRTZXR0aW5nIGZyb20gXCJzcmMvc2V0dGluZ3MvRmllbGRTZXR0aW5nXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmllbGRTZXR0aW5nc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIG5hbWVQcm9tcHRDb21wb25lbnQ6IFRleHRDb21wb25lbnRcbiAgICB2YWx1ZXNQcm9tcHRDb21wb25lbnRzOiBBcnJheTxUZXh0Q29tcG9uZW50PiA9IFtdXG4gICAgaXNNdWx0aVRvZ2dsZXJDb21wb25lbnQ6IFRvZ2dsZUNvbXBvbmVudFxuICAgIGlzQ3ljbGVUb2dnbGVyQ29tcG9uZW50OiBUb2dnbGVDb21wb25lbnRcbiAgICBsaXN0Tm90ZVBhdGhDb21wb25lbnQ6IFRleHRDb21wb25lbnRcbiAgICBzYXZlZDogYm9vbGVhbiA9IGZhbHNlXG4gICAgcHJvcGVydHk6IEZpZWxkXG4gICAgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rc1xuICAgIGluaXRpYWxQcm9wZXJ0eTogRmllbGRcbiAgICBwYXJlbnRTZXR0aW5nOiBTZXR0aW5nXG4gICAgbmV3OiBib29sZWFuID0gdHJ1ZVxuICAgIHBhcmVudFNldHRpbmdDb250YWluZXI6IEhUTUxFbGVtZW50XG5cblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzLCBwYXJlbnRTZXR0aW5nQ29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGFyZW50U2V0dGluZz86IFNldHRpbmcsIHByb3BlcnR5PzogRmllbGQpIHtcbiAgICAgICAgc3VwZXIoYXBwKVxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxuICAgICAgICB0aGlzLnBhcmVudFNldHRpbmcgPSBwYXJlbnRTZXR0aW5nXG4gICAgICAgIHRoaXMuaW5pdGlhbFByb3BlcnR5ID0gbmV3IEZpZWxkKClcbiAgICAgICAgdGhpcy5wYXJlbnRTZXR0aW5nQ29udGFpbmVyID0gcGFyZW50U2V0dGluZ0NvbnRhaW5lclxuICAgICAgICBpZiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgIHRoaXMubmV3ID0gZmFsc2VcbiAgICAgICAgICAgIHRoaXMucHJvcGVydHkgPSBwcm9wZXJ0eVxuICAgICAgICAgICAgdGhpcy5pbml0aWFsUHJvcGVydHkubmFtZSA9IHByb3BlcnR5Lm5hbWVcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbFByb3BlcnR5LmlkID0gcHJvcGVydHkuaWRcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHByb3BlcnR5LnZhbHVlcykuZm9yRWFjaChrID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxQcm9wZXJ0eS52YWx1ZXNba10gPSBwcm9wZXJ0eS52YWx1ZXNba11cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmV3SWQgPSAxXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5pbml0aWFsUHJvcGVydGllcy5mb3JFYWNoKHByb3AgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChwcm9wLmlkKSAmJiBwYXJzZUludChwcm9wLmlkKSA+PSBuZXdJZCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdJZCA9IHBhcnNlSW50KHByb3AuaWQpICsgMVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLnByb3BlcnR5ID0gbmV3IEZpZWxkKClcbiAgICAgICAgICAgIHRoaXMucHJvcGVydHkuaWQgPSBuZXdJZC50b1N0cmluZygpXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxQcm9wZXJ0eS5pZCA9IG5ld0lkLnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uT3BlbigpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcGVydHkubmFtZSA9PSBcIlwiKSB7XG4gICAgICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChgQWRkIGEgcHJvcGVydHkgYW5kIHNldCBwcmVkZWZpbmVkYClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KGBNYW5hZ2Ugc2V0dGluZ3MgdmFsdWVzIGZvciAke3RoaXMucHJvcGVydHkubmFtZX1gKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3JlYXRlRm9ybSgpXG4gICAgfVxuXG4gICAgb25DbG9zZSgpOiB2b2lkIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLnByb3BlcnR5LCB0aGlzLmluaXRpYWxQcm9wZXJ0eSlcbiAgICAgICAgaWYgKCF0aGlzLm5ldykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRTZXR0aW5nLmluZm9FbC50ZXh0Q29udGVudCA9XG4gICAgICAgICAgICAgICAgYCR7dGhpcy5wcm9wZXJ0eS5uYW1lfTogWyR7T2JqZWN0LmtleXModGhpcy5wcm9wZXJ0eS52YWx1ZXMpLm1hcChrID0+IHRoaXMucHJvcGVydHkudmFsdWVzW2tdKS5qb2luKCcsICcpfV1gXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zYXZlZCkge1xuICAgICAgICAgICAgbmV3IEZpZWxkU2V0dGluZyh0aGlzLnBhcmVudFNldHRpbmdDb250YWluZXIsIHRoaXMucHJvcGVydHksIHRoaXMuYXBwLCB0aGlzLnBsdWdpbilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFZhbHVlTGlzdFRleHQoaGVhZGVyOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQge1xuICAgICAgICBoZWFkZXIuc2V0VGV4dChgUHJlc2V0IHZhbHVlczogJHtPYmplY3QudmFsdWVzKHRoaXMucHJvcGVydHkudmFsdWVzKS5qb2luKCcsICcpfWApXG4gICAgfVxuXG4gICAgY3JlYXRlbmFtZUlucHV0Q29udGFpbmVyKHBhcmVudE5vZGU6IEhUTUxEaXZFbGVtZW50KTogVGV4dENvbXBvbmVudCB7XG4gICAgICAgIGNvbnN0IHByb3BlcnR5TmFtZUNvbnRhaW5lckxhYmVsID0gcGFyZW50Tm9kZS5jcmVhdGVEaXYoKVxuICAgICAgICBwcm9wZXJ0eU5hbWVDb250YWluZXJMYWJlbC5zZXRUZXh0KGBQcm9wZXJ0eSBOYW1lOmApXG4gICAgICAgIGNvbnN0IGlucHV0ID0gbmV3IFRleHRDb21wb25lbnQocGFyZW50Tm9kZSlcbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMucHJvcGVydHkubmFtZVxuICAgICAgICBpbnB1dC5zZXRWYWx1ZShuYW1lKVxuICAgICAgICBpbnB1dC5zZXRQbGFjZWhvbGRlcihcIk5hbWUgb2YgdGhlIHByb3BlcnR5XCIpXG4gICAgICAgIGlucHV0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJvcGVydHkubmFtZSA9IHZhbHVlXG4gICAgICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChgTWFuYWdlIHByZWRlZmluZWQgdmFsdWVzIGZvciAke3RoaXMucHJvcGVydHkubmFtZX1gKVxuICAgICAgICAgICAgRmllbGRTZXR0aW5nc01vZGFsLnJlbW92ZVZhbGlkYXRpb25FcnJvcihpbnB1dClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGlucHV0XG4gICAgfVxuXG4gICAgY3JlYXRlVG9nZ2xlckNvbnRhaW5lcihwYXJlbnROb2RlOiBIVE1MRGl2RWxlbWVudCwgbGFiZWw6IHN0cmluZyk6IFRvZ2dsZUNvbXBvbmVudCB7XG4gICAgICAgIGNvbnN0IHByb3BlcnR5Q29udGFpbmVyTGFiZWwgPSBwYXJlbnROb2RlLmNyZWF0ZURpdih7XG4gICAgICAgICAgICBjbHM6ICdmcm9udG1hdHRlci1jaGVja2JveC10b2dnbGVyJ1xuICAgICAgICB9KVxuICAgICAgICBwcm9wZXJ0eUNvbnRhaW5lckxhYmVsLnNldFRleHQobGFiZWwpXG4gICAgICAgIGNvbnN0IHRvZ2dsZXIgPSBuZXcgVG9nZ2xlQ29tcG9uZW50KHBhcmVudE5vZGUpXG4gICAgICAgIHJldHVybiB0b2dnbGVyXG4gICAgfVxuXG4gICAgY3JlYXRlTGlzdE5vdGVDb250YWluZXIocGFyZW50Tm9kZTogSFRNTERpdkVsZW1lbnQpOiBUZXh0Q29tcG9uZW50IHtcbiAgICAgICAgY29uc3QgbGlzdE5vdGVDb250YWluZXJMYWJlbCA9IHBhcmVudE5vZGUuY3JlYXRlRGl2KClcbiAgICAgICAgbGlzdE5vdGVDb250YWluZXJMYWJlbC5zZXRUZXh0KGBQYXRoIG9mIHRoZSBub3RlIGNvbnRhaW5pbmcgdGhlIHZhbHVlczpgKVxuICAgICAgICBjb25zdCBpbnB1dCA9IG5ldyBUZXh0Q29tcG9uZW50KHBhcmVudE5vZGUpXG4gICAgICAgIGNvbnN0IGxpc3ROb3RlUGF0aCA9IHRoaXMucHJvcGVydHkudmFsdWVzTGlzdE5vdGVQYXRoXG4gICAgICAgIGlucHV0LnNldFZhbHVlKGxpc3ROb3RlUGF0aClcbiAgICAgICAgaW5wdXQuc2V0UGxhY2Vob2xkZXIoXCJQYXRoL29mL3RoZS9ub3RlLm1kXCIpXG4gICAgICAgIGlucHV0Lm9uQ2hhbmdlKHZhbHVlID0+IHRoaXMucHJvcGVydHkudmFsdWVzTGlzdE5vdGVQYXRoID0gdmFsdWUpXG4gICAgICAgIHJldHVybiBpbnB1dFxuICAgIH1cblxuICAgIHJlbW92ZVByZXNldFZhbHVlKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGxldCBuZXdWYWx1ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fVxuICAgICAgICBmb3IgKGxldCBfa2V5IGluIHRoaXMucHJvcGVydHkudmFsdWVzKSB7XG4gICAgICAgICAgICBpZiAoa2V5ICE9PSBfa2V5KSB7XG4gICAgICAgICAgICAgICAgbmV3VmFsdWVzW19rZXldID0gdGhpcy5wcm9wZXJ0eS52YWx1ZXNbX2tleV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3BlcnR5LnZhbHVlcyA9IG5ld1ZhbHVlc1xuICAgIH1cblxuICAgIGNyZWF0ZVZhbHVlQ29udGFpbmVyKHBhcmVudE5vZGU6IEhUTUxEaXZFbGVtZW50LCBoZWFkZXI6IEhUTUxEaXZFbGVtZW50LCBrZXk6IHN0cmluZyk6IFRleHRDb21wb25lbnQge1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLnByb3BlcnR5LnZhbHVlc1xuICAgICAgICBjb25zdCBwcmVzZXRWYWx1ZSA9IHZhbHVlc1trZXldXG4gICAgICAgIGNvbnN0IHZhbHVlQ29udGFpbmVyID0gcGFyZW50Tm9kZS5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiAnZnJvbnRtYXR0ZXItcHJvbXB0LWNvbnRhaW5lcicsXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IGlucHV0ID0gbmV3IFRleHRDb21wb25lbnQodmFsdWVDb250YWluZXIpXG4gICAgICAgIGlucHV0LnNldFZhbHVlKHByZXNldFZhbHVlKVxuICAgICAgICBpbnB1dC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnR5LnZhbHVlc1trZXldID0gdmFsdWVcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWVMaXN0VGV4dChoZWFkZXIpXG4gICAgICAgICAgICBGaWVsZFNldHRpbmdzTW9kYWwucmVtb3ZlVmFsaWRhdGlvbkVycm9yKGlucHV0KVxuICAgICAgICB9KVxuICAgICAgICBjb25zdCB2YWx1ZVJlbW92ZUJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQodmFsdWVDb250YWluZXIpXG4gICAgICAgIHZhbHVlUmVtb3ZlQnV0dG9uLnNldEljb24oXCJ0cmFzaFwiKVxuICAgICAgICAgICAgLm9uQ2xpY2soKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdFxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUHJlc2V0VmFsdWUoa2V5KVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWVMaXN0VGV4dChoZWFkZXIpXG4gICAgICAgICAgICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh2YWx1ZUNvbnRhaW5lcilcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc1Byb21wdENvbXBvbmVudHMucmVtb3ZlKGlucHV0KVxuXG4gICAgICAgICAgICB9KVxuICAgICAgICBpZiAoa2V5ICE9IE9iamVjdC5rZXlzKHRoaXMucHJvcGVydHkudmFsdWVzKVswXSkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVVcGdyYWRlQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudCh2YWx1ZUNvbnRhaW5lcilcbiAgICAgICAgICAgIHZhbHVlVXBncmFkZUJ1dHRvbi5zZXRCdXR0b25UZXh0KFwi4payXCIpXG4gICAgICAgICAgICB2YWx1ZVVwZ3JhZGVCdXR0b24ub25DbGljaygoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGhpc1ZhbHVlID0gdmFsdWVzW2tleV1cbiAgICAgICAgICAgICAgICBjb25zdCB1cHBlckNvbXBvbmVudCA9IHRoaXMudmFsdWVzUHJvbXB0Q29tcG9uZW50c1t0aGlzLnZhbHVlc1Byb21wdENvbXBvbmVudHMuaW5kZXhPZihpbnB1dCkgLSAxXVxuICAgICAgICAgICAgICAgIGlmICh1cHBlckNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1cHBlclZhbHVlID0gdXBwZXJDb21wb25lbnQuaW5wdXRFbC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1cHBlcktleSA9IE9iamVjdC5rZXlzKHZhbHVlcykuZmlsdGVyKGsgPT4gdmFsdWVzW2tdID09IHVwcGVyVmFsdWUpWzBdXG4gICAgICAgICAgICAgICAgICAgIGlmICh1cHBlcktleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJDb21wb25lbnQuc2V0VmFsdWUodGhpc1ZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzW3VwcGVyS2V5XSA9IHRoaXNWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuc2V0VmFsdWUodXBwZXJWYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlc1trZXldID0gdXBwZXJWYWx1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbnB1dFxuICAgIH1cblxuICAgIGNyZWF0ZUZvcm0oKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGRpdiA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7XG4gICAgICAgICAgICBjbHM6IFwiZnJvbnRtYXR0ZXItcHJvbXB0LWRpdlwiXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IG1haW5EaXYgPSBkaXYuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgIGNsczogXCJmcm9udG1hdHRlci1wcm9tcHQtZm9ybVwiXG4gICAgICAgIH0pXG4gICAgICAgIC8qIFByb3BlcnR5IE5hbWUgU2VjdGlvbiAqL1xuICAgICAgICBjb25zdCBuYW1lQ29udGFpbmVyID0gbWFpbkRpdi5jcmVhdGVEaXYoKVxuICAgICAgICB0aGlzLm5hbWVQcm9tcHRDb21wb25lbnQgPSB0aGlzLmNyZWF0ZW5hbWVJbnB1dENvbnRhaW5lcihuYW1lQ29udGFpbmVyKVxuXG4gICAgICAgIG1haW5EaXYuY3JlYXRlRGl2KHsgY2xzOiAnZnJvbnRtYXR0ZXItc2VwYXJhdG9yJyB9KS5jcmVhdGVFbChcImhyXCIpXG5cbiAgICAgICAgLyogUHJvcGVydHkgaXMgTXVsdGkgc2VjdGlvbiovXG5cbiAgICAgICAgY29uc3QgbXVsdGlDb250YWluZXIgPSBtYWluRGl2LmNyZWF0ZURpdigpXG4gICAgICAgIHRoaXMuaXNNdWx0aVRvZ2dsZXJDb21wb25lbnQgPSB0aGlzLmNyZWF0ZVRvZ2dsZXJDb250YWluZXIobXVsdGlDb250YWluZXIsIFwiSXMgTXVsdGk6IFwiKVxuICAgICAgICB0aGlzLmlzTXVsdGlUb2dnbGVyQ29tcG9uZW50LnNldFZhbHVlKHRoaXMucHJvcGVydHkuaXNNdWx0aSlcbiAgICAgICAgdGhpcy5pc011bHRpVG9nZ2xlckNvbXBvbmVudC5zZXRUb29sdGlwKFwiQ2FuIHRoaXMgcHJvcGVydHkgaGF2ZSBtdWx0aXBsZSB2YWx1ZXM/XCIpXG4gICAgICAgIHRoaXMuaXNNdWx0aVRvZ2dsZXJDb21wb25lbnQub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eS5pc011bHRpID0gdmFsdWVcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BlcnR5LmlzQ3ljbGUgJiYgdGhpcy5wcm9wZXJ0eS5pc011bHRpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eS5pc0N5Y2xlID0gZmFsc2VcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ3ljbGVUb2dnbGVyQ29tcG9uZW50LnNldFZhbHVlKGZhbHNlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIG1haW5EaXYuY3JlYXRlRGl2KHsgY2xzOiAnZnJvbnRtYXR0ZXItc2VwYXJhdG9yJyB9KS5jcmVhdGVFbChcImhyXCIpXG5cbiAgICAgICAgLyogUHJvcGVydHkgaXMgQ3ljbGUgc2VjdGlvbiovXG5cbiAgICAgICAgY29uc3QgY3ljbGVDb250YWluZXIgPSBtYWluRGl2LmNyZWF0ZURpdigpXG4gICAgICAgIHRoaXMuaXNDeWNsZVRvZ2dsZXJDb21wb25lbnQgPSB0aGlzLmNyZWF0ZVRvZ2dsZXJDb250YWluZXIoY3ljbGVDb250YWluZXIsIFwiSXMgQ3ljbGU6IFwiKVxuICAgICAgICB0aGlzLmlzQ3ljbGVUb2dnbGVyQ29tcG9uZW50LnNldFZhbHVlKHRoaXMucHJvcGVydHkuaXNDeWNsZSlcbiAgICAgICAgdGhpcy5pc0N5Y2xlVG9nZ2xlckNvbXBvbmVudC5zZXRUb29sdGlwKFwiSXMgdGhpcyBwcm9wZXJ0eSdzIHZhbHVlcyBzZXQgaW4gY3ljbGUgbW9kZT9cIilcbiAgICAgICAgdGhpcy5pc0N5Y2xlVG9nZ2xlckNvbXBvbmVudC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnR5LmlzQ3ljbGUgPSB2YWx1ZVxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcGVydHkuaXNDeWNsZSAmJiB0aGlzLnByb3BlcnR5LmlzTXVsdGkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BlcnR5LmlzTXVsdGkgPSBmYWxzZVxuICAgICAgICAgICAgICAgIHRoaXMuaXNNdWx0aVRvZ2dsZXJDb21wb25lbnQuc2V0VmFsdWUoZmFsc2UpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgbWFpbkRpdi5jcmVhdGVEaXYoeyBjbHM6ICdmcm9udG1hdHRlci1zZXBhcmF0b3InIH0pLmNyZWF0ZUVsKFwiaHJcIilcblxuICAgICAgICAvKiBQcm9wZXJ0eSdzIG5vdGUgZm9yIGxpc3Qgb2YgVmFsdWVzICovXG5cbiAgICAgICAgY29uc3QgbGlzdE5vdGVQYXRoQ29udGFpbmVyID0gbWFpbkRpdi5jcmVhdGVEaXYoKVxuICAgICAgICB0aGlzLmxpc3ROb3RlUGF0aENvbXBvbmVudCA9IHRoaXMuY3JlYXRlTGlzdE5vdGVDb250YWluZXIobGlzdE5vdGVQYXRoQ29udGFpbmVyKVxuXG4gICAgICAgIG1haW5EaXYuY3JlYXRlRGl2KHsgY2xzOiAnZnJvbnRtYXR0ZXItc2VwYXJhdG9yJyB9KS5jcmVhdGVFbChcImhyXCIpXG5cbiAgICAgICAgLyogUHJvcGVydHkgVmFsdWVzICovXG4gICAgICAgIGNvbnN0IHZhbHVlc0xpc3QgPSBtYWluRGl2LmNyZWF0ZURpdigpXG4gICAgICAgIGNvbnN0IHZhbHVlc0xpc3RIZWFkZXIgPSB2YWx1ZXNMaXN0LmNyZWF0ZURpdigpXG4gICAgICAgIHZhbHVlc0xpc3RIZWFkZXIuY3JlYXRlRWwoXCJoMlwiKVxuICAgICAgICB2YWx1ZXNMaXN0SGVhZGVyLnNldFRleHQoYFByZXNldCB2YWx1ZXM6ICR7T2JqZWN0LnZhbHVlcyh0aGlzLnByb3BlcnR5LnZhbHVlcykuam9pbignLCAnKX1gKVxuICAgICAgICBjb25zdCB2YWx1ZXNMaXN0Qm9keSA9IHZhbHVlc0xpc3QuY3JlYXRlRGl2KClcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5wcm9wZXJ0eS52YWx1ZXMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzUHJvbXB0Q29tcG9uZW50cy5wdXNoKHRoaXMuY3JlYXRlVmFsdWVDb250YWluZXIodmFsdWVzTGlzdEJvZHksIHZhbHVlc0xpc3RIZWFkZXIsIGtleSkpXG4gICAgICAgIH0pXG5cbiAgICAgICAgLyogQWRkIGEgbmV3IFZhbHVlcyAqL1xuICAgICAgICBjb25zdCB2YWx1ZXNMaXN0Rm9vdGVyID0gdmFsdWVzTGlzdC5jcmVhdGVEaXYoKVxuICAgICAgICBjb25zdCBhZGRWYWx1ZSA9IHZhbHVlc0xpc3RGb290ZXIuY3JlYXRlRWwoJ2J1dHRvbicpXG4gICAgICAgIGFkZFZhbHVlLnR5cGUgPSAnYnV0dG9uJ1xuICAgICAgICBhZGRWYWx1ZS50ZXh0Q29udGVudCA9ICdBZGQnXG4gICAgICAgIGFkZFZhbHVlLm9uQ2xpY2tFdmVudCgoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHRcbiAgICAgICAgICAgIHRoaXMucHJvcGVydHkuaW5zZXJ0TmV3VmFsdWUoXCJcIilcbiAgICAgICAgICAgICAgICAudGhlbihuZXdLZXkgPT4geyB0aGlzLmNyZWF0ZVZhbHVlQ29udGFpbmVyKHZhbHVlc0xpc3RCb2R5LCB2YWx1ZXNMaXN0SGVhZGVyLCBuZXdLZXkpIH0pXG5cbiAgICAgICAgfSlcblxuICAgICAgICBtYWluRGl2LmNyZWF0ZURpdih7IGNsczogJ2Zyb250bWF0dGVyLXNlcGFyYXRvcicgfSkuY3JlYXRlRWwoXCJoclwiKVxuXG4gICAgICAgIC8qIGZvb3RlciBidXR0b25zKi9cbiAgICAgICAgY29uc3QgZm9vdGVyRWwgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKVxuICAgICAgICBjb25zdCBmb290ZXJCdXR0b25zID0gbmV3IFNldHRpbmcoZm9vdGVyRWwpXG4gICAgICAgIGZvb3RlckJ1dHRvbnMuYWRkQnV0dG9uKChiKSA9PiB0aGlzLmNyZWF0ZVNhdmVCdXR0b24oYikpXG4gICAgICAgIGZvb3RlckJ1dHRvbnMuYWRkRXh0cmFCdXR0b24oKGIpID0+IHRoaXMuY3JlYXRlQ2FuY2VsQnV0dG9uKGIpKTtcbiAgICB9XG5cbiAgICBjcmVhdGVTYXZlQnV0dG9uKGI6IEJ1dHRvbkNvbXBvbmVudCk6IEJ1dHRvbkNvbXBvbmVudCB7XG4gICAgICAgIGIuc2V0VG9vbHRpcChcIlNhdmVcIilcbiAgICAgICAgICAgIC5zZXRJY29uKFwiY2hlY2ttYXJrXCIpXG4gICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGVycm9yID0gZmFsc2VcbiAgICAgICAgICAgICAgICBpZiAoL15bIz4tXS8udGVzdCh0aGlzLnByb3BlcnR5Lm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIEZpZWxkU2V0dGluZ3NNb2RhbC5zZXRWYWxpZGF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWVQcm9tcHRDb21wb25lbnQsIHRoaXMubmFtZVByb21wdENvbXBvbmVudC5pbnB1dEVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJQcm9wZXJ0eSBuYW1lIGNhbm5vdCBzdGFydCB3aXRoICMsID4sIC1cIlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BlcnR5Lm5hbWUgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBGaWVsZFNldHRpbmdzTW9kYWwuc2V0VmFsaWRhdGlvbkVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lUHJvbXB0Q29tcG9uZW50LCB0aGlzLm5hbWVQcm9tcHRDb21wb25lbnQuaW5wdXRFbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUHJvcGVydHkgbmFtZSBjYW4gbm90IGJlIEVtcHR5XCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzUHJvbXB0Q29tcG9uZW50cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKC9eWyM+LV0vLnRlc3QoaW5wdXQuaW5wdXRFbC52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEZpZWxkU2V0dGluZ3NNb2RhbC5zZXRWYWxpZGF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQsIGlucHV0LmlucHV0RWwucGFyZW50RWxlbWVudC5sYXN0RWxlbWVudENoaWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiVmFsdWVzIGNhbm5vdCBjYW5ub3Qgc3RhcnQgd2l0aCAjLCA+LCAtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKC9bLF0vZ3UudGVzdChpbnB1dC5pbnB1dEVsLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgRmllbGRTZXR0aW5nc01vZGFsLnNldFZhbGlkYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCwgaW5wdXQuaW5wdXRFbC5wYXJlbnRFbGVtZW50Lmxhc3RFbGVtZW50Q2hpbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJWYWx1ZXMgY2Fubm90IGNvbnRhaW4gYSBjb21tYVwiXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5pbnB1dEVsLnZhbHVlID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEZpZWxkU2V0dGluZ3NNb2RhbC5zZXRWYWxpZGF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQsIGlucHV0LmlucHV0RWwucGFyZW50RWxlbWVudC5sYXN0RWxlbWVudENoaWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiVmFsdWVzIGNhbid0IGJlIG51bGwuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRml4IGVycm9ycyBiZWZvcmUgc2F2aW5nLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50RXhpc3RpbmdQcm9wZXJ0eSA9IHRoaXMucGx1Z2luLmluaXRpYWxQcm9wZXJ0aWVzLmZpbHRlcihwID0+IHAuaWQgPT0gdGhpcy5wcm9wZXJ0eS5pZClbMF1cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEV4aXN0aW5nUHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgRmllbGQuY29weVByb3BlcnR5KGN1cnJlbnRFeGlzdGluZ1Byb3BlcnR5LCB0aGlzLnByb3BlcnR5KVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmluaXRpYWxQcm9wZXJ0aWVzLnB1c2godGhpcy5wcm9wZXJ0eSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsUHJvcGVydHkgPSB0aGlzLnByb3BlcnR5XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICByZXR1cm4gYlxuICAgIH1cblxuICAgIGNyZWF0ZUNhbmNlbEJ1dHRvbihiOiBFeHRyYUJ1dHRvbkNvbXBvbmVudCk6IEV4dHJhQnV0dG9uQ29tcG9uZW50IHtcbiAgICAgICAgYi5zZXRJY29uKFwiY3Jvc3NcIilcbiAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiQ2FuY2VsXCIpXG4gICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8qIHJlc2V0IHZhbHVlcyBmcm9tIHNldHRpbmdzICovXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5pdGlhbFByb3BlcnR5Lm5hbWUgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMucHJvcGVydHksIHRoaXMuaW5pdGlhbFByb3BlcnR5KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGI7XG4gICAgfVxuXG4gICAgLyogdXRpbHMgZnVuY3Rpb25zICovXG5cbiAgICBzdGF0aWMgc2V0VmFsaWRhdGlvbkVycm9yKHRleHRJbnB1dDogVGV4dENvbXBvbmVudCwgaW5zZXJ0QWZ0ZXI6IEVsZW1lbnQsIG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgdGV4dElucHV0LmlucHV0RWwuYWRkQ2xhc3MoXCJpcy1pbnZhbGlkXCIpO1xuICAgICAgICBpZiAobWVzc2FnZSkge1xuXG4gICAgICAgICAgICBsZXQgbURpdiA9IHRleHRJbnB1dC5pbnB1dEVsLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICBcIi5pbnZhbGlkLWZlZWRiYWNrXCJcbiAgICAgICAgICAgICkgYXMgSFRNTERpdkVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGlmICghbURpdikge1xuICAgICAgICAgICAgICAgIG1EaXYgPSBjcmVhdGVEaXYoeyBjbHM6IFwiaW52YWxpZC1mZWVkYmFja1wiIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbURpdi5pbm5lclRleHQgPSBtZXNzYWdlO1xuICAgICAgICAgICAgbURpdi5pbnNlcnRBZnRlcihpbnNlcnRBZnRlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHJlbW92ZVZhbGlkYXRpb25FcnJvcih0ZXh0SW5wdXQ6IFRleHRDb21wb25lbnQpIHtcbiAgICAgICAgaWYgKHRleHRJbnB1dC5pbnB1dEVsLmhhc0NsYXNzKFwiaXMtaW52YWxpZFwiKSkge1xuICAgICAgICAgICAgdGV4dElucHV0LmlucHV0RWwucmVtb3ZlQ2xhc3MoXCJpcy1pbnZhbGlkXCIpXG4gICAgICAgICAgICB0ZXh0SW5wdXQuaW5wdXRFbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKFxuICAgICAgICAgICAgICAgIHRleHRJbnB1dC5pbnB1dEVsLnBhcmVudEVsZW1lbnQubGFzdEVsZW1lbnRDaGlsZFxuICAgICAgICAgICAgKVxuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7QXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBCdXR0b25Db21wb25lbnQsIFRvZ2dsZUNvbXBvbmVudH0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwibWFpblwiXG5pbXBvcnQgRmllbGRTZXR0aW5nc01vZGFsIGZyb20gXCJzcmMvc2V0dGluZ3MvRmllbGRTZXR0aW5nc01vZGFsXCJcbmltcG9ydCBGaWVsZCBmcm9tIFwic3JjL0ZpZWxkXCJcbmltcG9ydCBGaWVsZFNldHRpbmcgZnJvbSBcInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmdcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcztcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcykge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0bGV0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnU2V0dGluZ3MgZm9yIFN1cGVyY2hhcmdlZCBMaW5rcy4nfSk7XG4gICAgICAgIC8qIE1hbmFnaW5nIGV4dHJhIGF0dGlyYnV0ZXMgZm9yIGEuaW50ZXJuYWwtbGluayAqL1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1RhcmdldCBBdHRyaWJ1dGVzIGZvciBzdHlsaW5nJylcblx0XHRcdC5zZXREZXNjKCdGcm9udG1hdHRlciBhdHRyaWJ1dGVzIHRvIHRhcmdldCwgY29tbWEgc2VwYXJhdGVkJylcblx0XHRcdC5hZGRUZXh0QXJlYSgodGV4dCkgPT4ge3RleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBhdHRyaWJ1dGVzIGFzIHN0cmluZywgY29tbWEgc2VwYXJhdGVkJylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhcmdldEF0dHJpYnV0ZXMuam9pbignLCAnKSlcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRhcmdldEF0dHJpYnV0ZXMgPSB2YWx1ZS5yZXBsYWNlKC9cXHMvZywnJykuc3BsaXQoJywnKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0dGV4dC5pbnB1dEVsLnJvd3MgPSA2O1xuXHRcdFx0XHR0ZXh0LmlucHV0RWwuY29scyA9IDI1O1xuXHRcdFx0fSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdFbmFibGUgaW4gRWRpdG9yJylcblx0XHRcdC5zZXREZXNjKCdJZiB0cnVlLCB0aGlzIHdpbGwgYWxzbyBzdXBlcmNoYXJnZSBpbnRlcm5hbCBsaW5rcyBpbiB0aGUgZWRpdG9yIHZpZXcgb2YgYSBub3RlLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFZGl0b3IpXG5cdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRWRpdG9yID0gdmFsdWVcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0VuYWJsZSBpbiBGaWxlIEJyb3dzZXInKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRydWUsIHRoaXMgd2lsbCBhbHNvIHN1cGVyY2hhcmdlIHRoZSBmaWxlIGJyb3dzZXIuJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcblx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUZpbGVMaXN0KVxuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UodmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUZpbGVMaXN0ID0gdmFsdWVcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0VuYWJsZSBpbiBCYWNrbGlua3MnKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRydWUsIHRoaXMgd2lsbCBhbHNvIHN1cGVyY2hhcmdlIHRoZSBiYWNrbGlua3MgYW5kIGZvcndhcmQgbGlua3MgcGFuZWxzLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVCYWNrbGlua3MpXG5cdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQmFja2xpbmtzID0gdmFsdWVcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblxuXHRcdC8vIE1hbmFnaW5nIGNob2ljZSB3ZXRoZXIgeW91IHdhbnQgdG8gcGFyc2UgdGFncyBib3RoIGZyb20gbm9ybWFsIHRhZ3MgYW5kIGluIHRoZSBmcm9udG1hdHRlclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1BhcnNlIGFsbCB0YWdzIGluIHRoZSBmaWxlJylcblx0XHRcdC5zZXREZXNjKCdTZXRzIHRoZSBgZGF0YS1saW5rLXRhZ3NgLWF0dHJpYnV0ZSB0byBsb29rIGZvciB0YWdzIGJvdGggaW4gdGhlIGZyb250bWF0dGVyIGFuZCBpbiB0aGUgZmlsZSBhcyAjdGFnLW5hbWUnKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFyZ2V0VGFncylcblx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXJnZXRUYWdzID0gdmFsdWVcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblxuXHRcdC8vIE1hbmFnaW5nIGNob2ljZSB3ZXRoZXIgeW91IGdldCBhdHRyaWJ1dGVzIGZyb20gaW5saW5lIGZpZWxkcyBhbmQgZnJvbnRtYXR0ZXIgb3Igb25seSBmcm9udG1hdGVyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0LnNldE5hbWUoJ1NlYXJjaCBmb3IgYXR0cmlidXRlIGluIElubGluZSBmaWVsZHMgbGlrZSA8ZmllbGQ6Oj4nKVxuXHRcdC5zZXREZXNjKCdTZXRzIHRoZSBgZGF0YS1saW5rLTxmaWVsZD5gLWF0dHJpYnV0ZSB0byB0aGUgdmFsdWUgb2YgaW5saW5lIGZpZWxkcycpXG5cdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldEZyb21JbmxpbmVGaWVsZClcblx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRGcm9tSW5saW5lRmllbGQgPSB2YWx1ZVxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG5cdFx0XHRcdH0pXG5cdFx0fSlcblxuICAgICAgICAvKiBNYW5hZ2luZyBwcmVkZWZpbmVkIHZhbHVlcyBmb3IgcHJvcGVydGllcyAqL1xuXHRcdC8qIE1hbmFnZSBtZW51IG9wdGlvbnMgZGlzcGxheSovXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkRpc3BsYXkgZmllbGQgb3B0aW9ucyBpbiBjb250ZXh0IG1lbnVcIilcblx0XHRcdC5zZXREZXNjKFwiQ2hvb3NlIHRvIHNob3cgb3IgaGlkZSBmaWVsZHMgb3B0aW9ucyBpbiB0aGUgY29udGV4dCBtZW51IG9mIGEgbGluayBvciBhIGZpbGVcIilcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZTogVG9nZ2xlQ29tcG9uZW50KSA9PiB7XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaXNwbGF5RmllbGRzSW5Db250ZXh0TWVudSlcblx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaXNwbGF5RmllbGRzSW5Db250ZXh0TWVudSA9IHZhbHVlXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcblx0XHRcdFx0fSlcblx0XHRcdH0pXG5cdFx0LyogRXhjbHVkZSBGaWVsZHMgZnJvbSBjb250ZXh0IG1lbnUqL1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0lnbm9yZWQgZmllbGRzJylcblx0XHRcdC5zZXREZXNjKCdGaWVsZHMgdG8gYmUgaWdub3JlZCBieSB0aGUgcGx1Z2luIHdoZW4gYWRkaW5nIG9wdGlvbnMgdG8gdGhlIGNvbnRleHQgbWVudScpXG5cdFx0XHQuYWRkVGV4dEFyZWEoKHRleHQpID0+IHt0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgZmllbGRzIGFzIHN0cmluZywgY29tbWEgc2VwYXJhdGVkJylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbGx5SWdub3JlZEZpZWxkcy5qb2luKCcsICcpKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2xvYmFsbHlJZ25vcmVkRmllbGRzID0gdmFsdWUucmVwbGFjZSgvXFxzL2csJycpLnNwbGl0KCcsJyk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdHRleHQuaW5wdXRFbC5yb3dzID0gNjtcblx0XHRcdFx0dGV4dC5pbnB1dEVsLmNvbHMgPSAyNTtcblx0XHRcdH0pO1xuXG5cdFx0LyogU2V0IGNsYXNzRmlsZXMgUGF0aCovXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0LnNldE5hbWUoJ2NsYXNzIEZpbGVzIHBhdGgnKVxuXHRcdC5zZXREZXNjKCdQYXRoIHRvIHRoZSBmaWxlcyBjb250YWluaW5nIHRoZSBhdXRob3JpemVkIGZpZWxkcyBmb3IgYSB0eXBlIG9mIG5vdGUnKVxuXHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7dGV4dFxuXHRcdFx0LnNldFBsYWNlaG9sZGVyKCdQYXRoLycpXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xhc3NGaWxlc1BhdGgpXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNsYXNzRmlsZXNQYXRoID0gdmFsdWVcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG4gICAgICAgIC8qIEFkZCBuZXcgcHJvcGVydHkgZm9yIHdoaWNoIHdlIHdhbnQgdG8gcHJlc2V0IHZhbHVlcyovXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkFkZCBOZXcgUHJvcGVydHkgTWFuYWdlclwiKVxuXHRcdFx0LnNldERlc2MoXCJBZGQgYSBuZXcgRnJvbnRtYXR0ZXIgcHJvcGVydHkgZm9yIHdoaWNoIHlvdSB3YW50IHByZXNldCB2YWx1ZXMuXCIpXG5cdFx0XHQuYWRkQnV0dG9uKChidXR0b246IEJ1dHRvbkNvbXBvbmVudCk6IEJ1dHRvbkNvbXBvbmVudCA9PiB7XG5cdFx0XHRcdGxldCBiID0gYnV0dG9uXG5cdFx0XHRcdFx0LnNldFRvb2x0aXAoXCJBZGQgTmV3IFByb3BlcnR5IE1hbmFnZXJcIilcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIitcIilcblx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgbW9kYWwgPSBuZXcgRmllbGRTZXR0aW5nc01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgY29udGFpbmVyRWwpO1xuXHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdHJldHVybiBiO1xuXHRcdFx0fSk7XG5cbiAgICAgICAgLyogTWFuYWdlZCBwcm9wZXJ0aWVzIHRoYXQgY3VycmVudGx5IGhhdmUgcHJlc2V0IHZhbHVlcyAqL1xuXHRcdHRoaXMucGx1Z2luLmluaXRpYWxQcm9wZXJ0aWVzLmZvckVhY2gocHJvcCA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IG5ldyBGaWVsZCgpXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHByb3BlcnR5LCBwcm9wKVxuXHRcdFx0bmV3IEZpZWxkU2V0dGluZyhjb250YWluZXJFbCwgcHJvcGVydHksIHRoaXMuYXBwLCB0aGlzLnBsdWdpbilcblx0XHR9KVxuXHR9XG59XG4iLCJpbXBvcnQgeyBBcHAsIGdldEFsbFRhZ3MsIGdldExpbmtwYXRoLCBMaW5rQ2FjaGUsIE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsIE1hcmtkb3duVmlldywgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IHsgU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncyB9IGZyb20gXCJzcmMvc2V0dGluZ3MvU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nc1wiXG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckV4dHJhQXR0cmlidXRlcyhsaW5rOiBIVE1MRWxlbWVudCkge1xuICAgIE9iamVjdC52YWx1ZXMobGluay5hdHRyaWJ1dGVzKS5mb3JFYWNoKGF0dHIgPT4ge1xuICAgICAgICBpZiAoYXR0ci5uYW1lLmluY2x1ZGVzKFwiZGF0YS1saW5rXCIpKSB7XG4gICAgICAgICAgICBsaW5rLnJlbW92ZUF0dHJpYnV0ZShhdHRyLm5hbWUpXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hUYXJnZXRBdHRyaWJ1dGVzU3luYyhhcHA6IEFwcCwgc2V0dGluZ3M6IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3MsIGRlc3Q6IFRGaWxlLCBhZGREYXRhSHJlZjogYm9vbGVhbik6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIGxldCBuZXdfcHJvcHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7IHRhZ3M6IFwiXCIgfVxuICAgIGNvbnN0IGNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGRlc3QpXG4gICAgaWYgKCFjYWNoZSkgcmV0dXJuO1xuXG4gICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBjYWNoZS5mcm9udG1hdHRlclxuICAgIGlmIChmcm9udG1hdHRlcikge1xuICAgICAgICBzZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzLmZvckVhY2goYXR0cmlidXRlID0+IHtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhmcm9udG1hdHRlcikuaW5jbHVkZXMoYXR0cmlidXRlKSkge1xuICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUgPT09ICd0YWcnIHx8IGF0dHJpYnV0ZSA9PT0gJ3RhZ3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld19wcm9wc1sndGFncyddICs9IGZyb250bWF0dGVyW2F0dHJpYnV0ZV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3X3Byb3BzW2F0dHJpYnV0ZV0gPSBmcm9udG1hdHRlclthdHRyaWJ1dGVdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGlmIChzZXR0aW5ncy50YXJnZXRUYWdzKSB7XG4gICAgICAgIG5ld19wcm9wc1tcInRhZ3NcIl0gKz0gZ2V0QWxsVGFncyhjYWNoZSkuam9pbignICcpO1xuICAgIH1cblxuICAgIGlmIChhZGREYXRhSHJlZikge1xuICAgICAgICBuZXdfcHJvcHNbJ2RhdGEtaHJlZiddID0gZGVzdC5iYXNlbmFtZTtcbiAgICB9XG5cbiAgICAvL0B0cy1pZ25vcmVcbiAgICBjb25zdCBnZXRSZXN1bHRzID0gKGFwaSkgPT4ge1xuICAgICAgICBzZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzLmZvckVhY2goKGZpZWxkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXBpLnBhZ2UoZGVzdC5wYXRoKVtmaWVsZF1cbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIG5ld19wcm9wc1tmaWVsZF0gPSB2YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH07XG5cbiAgICBpZiAoc2V0dGluZ3MuZ2V0RnJvbUlubGluZUZpZWxkICYmIGFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcyhcImRhdGF2aWV3XCIpKSB7XG4gICAgICAgIGNvbnN0IGFwaSA9IGFwcC5wbHVnaW5zLnBsdWdpbnMuZGF0YXZpZXc/LmFwaTtcbiAgICAgICAgaWYgKGFwaSkge1xuICAgICAgICAgICAgZ2V0UmVzdWx0cyhhcGkpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLm9uKFwiZGF0YXZpZXc6YXBpLXJlYWR5XCIsIChhcGk6IGFueSkgPT5cbiAgICAgICAgICAgICAgICAgICAgZ2V0UmVzdWx0cyhhcGkpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3X3Byb3BzXG59XG5cbmZ1bmN0aW9uIHNldExpbmtOZXdQcm9wcyhsaW5rOiBIVE1MRWxlbWVudCwgbmV3X3Byb3BzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KSB7XG4gICAgT2JqZWN0LmtleXMobmV3X3Byb3BzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiZGF0YS1saW5rLVwiICsga2V5LCBuZXdfcHJvcHNba2V5XSlcbiAgICAgICAgbGluay5hZGRDbGFzcyhcImRhdGEtbGluay1pY29uXCIpO1xuICAgIH0pXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmtFeHRyYUF0dHJpYnV0ZXMoYXBwOiBBcHAsIHNldHRpbmdzOiBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzLCBsaW5rOiBIVE1MRWxlbWVudCwgZGVzdE5hbWU6IHN0cmluZykge1xuICAgIGNvbnN0IGxpbmtIcmVmID0gbGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKS5zcGxpdCgnIycpWzBdO1xuICAgIGNvbnN0IGRlc3QgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChsaW5rSHJlZiwgZGVzdE5hbWUpXG5cbiAgICBpZiAoZGVzdCkge1xuICAgICAgICBjb25zdCBuZXdfcHJvcHMgPSBmZXRjaFRhcmdldEF0dHJpYnV0ZXNTeW5jKGFwcCwgc2V0dGluZ3MsIGRlc3QsIGZhbHNlKVxuICAgICAgICBzZXRMaW5rTmV3UHJvcHMobGluaywgbmV3X3Byb3BzKVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZURpdkV4dHJhQXR0cmlidXRlcyhhcHA6IEFwcCwgc2V0dGluZ3M6IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3MsIGxpbms6IEhUTUxFbGVtZW50LCBkZXN0TmFtZTogc3RyaW5nLCBsaW5rTmFtZT86IHN0cmluZykge1xuICAgIGlmICghbGlua05hbWUpIHtcbiAgICAgICAgbGlua05hbWUgPSBsaW5rLnRleHRDb250ZW50O1xuICAgIH1cbiAgICBjb25zdCBkZXN0ID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QoZ2V0TGlua3BhdGgobGlua05hbWUpLCBkZXN0TmFtZSlcblxuICAgIGlmIChkZXN0KSB7XG4gICAgICAgIGNvbnN0IG5ld19wcm9wcyA9IGZldGNoVGFyZ2V0QXR0cmlidXRlc1N5bmMoYXBwLCBzZXR0aW5ncywgZGVzdCwgdHJ1ZSlcbiAgICAgICAgc2V0TGlua05ld1Byb3BzKGxpbmssIG5ld19wcm9wcylcbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZURpdkxpbmtzKGFwcDogQXBwLCBzZXR0aW5nczogU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncykge1xuICAgIGNvbnN0IGRpdnMgPSBmaXNoQWxsKCdkaXYuaW50ZXJuYWwtbGluaycpO1xuICAgIGRpdnMucHVzaCguLi5maXNoQWxsKCd0ZC5pbnRlcm5hbC1saW5rJykpO1xuXG4gICAgZGl2cy5mb3JFYWNoKChsaW5rOiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICBjbGVhckV4dHJhQXR0cmlidXRlcyhsaW5rKTtcbiAgICAgICAgdXBkYXRlRGl2RXh0cmFBdHRyaWJ1dGVzKGFwcCwgc2V0dGluZ3MsIGxpbmssIFwiXCIpO1xuICAgIH0pXG5cbiAgICBjb25zdCBmaWxlRGl2cyA9IGZpc2hBbGwoJ2Rpdi5uYXYtZmlsZS10aXRsZS1jb250ZW50JylcbiAgICBmaWxlRGl2cy5mb3JFYWNoKChsaW5rOiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICBjbGVhckV4dHJhQXR0cmlidXRlcyhsaW5rKTtcbiAgICAgICAgaWYgKHNldHRpbmdzLmVuYWJsZUZpbGVMaXN0KSB7XG4gICAgICAgICAgICB1cGRhdGVEaXZFeHRyYUF0dHJpYnV0ZXMoYXBwLCBzZXR0aW5ncywgbGluaywgXCJcIik7XG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRWxMaW5rcyhhcHA6IEFwcCwgc2V0dGluZ3M6IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3MsIGVsOiBIVE1MRWxlbWVudCwgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0KSB7XG4gICAgY29uc3QgbGlua3MgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdhLmludGVybmFsLWxpbmsnKTtcbiAgICBjb25zdCBkZXN0TmFtZSA9IGN0eC5zb3VyY2VQYXRoLnJlcGxhY2UoLyguKikubWQvLCBcIiQxXCIpO1xuICAgIGxpbmtzLmZvckVhY2goKGxpbms6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICAgIGNsZWFyRXh0cmFBdHRyaWJ1dGVzKGxpbmspO1xuICAgICAgICB1cGRhdGVMaW5rRXh0cmFBdHRyaWJ1dGVzKGFwcCwgc2V0dGluZ3MsIGxpbmssIGRlc3ROYW1lKTtcbiAgICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlVmlzaWJsZUxpbmtzKGFwcDogQXBwLCBzZXR0aW5nczogU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncykge1xuICAgIGZpc2hBbGwoXCJhLmludGVybmFsLWxpbmtcIikuZm9yRWFjaChpbnRlcm5hbExpbmsgPT4gY2xlYXJFeHRyYUF0dHJpYnV0ZXMoaW50ZXJuYWxMaW5rKSlcbiAgICBhcHAud29ya3NwYWNlLml0ZXJhdGVSb290TGVhdmVzKChsZWFmKSA9PiB7XG4gICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgJiYgbGVhZi52aWV3LmZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGU6IFRGaWxlID0gbGVhZi52aWV3LmZpbGU7XG4gICAgICAgICAgICBjb25zdCBjYWNoZWRGaWxlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpXG4gICAgICAgICAgICBpZiAoY2FjaGVkRmlsZS5saW5rcykge1xuICAgICAgICAgICAgICAgIGNhY2hlZEZpbGUubGlua3MuZm9yRWFjaCgobGluazogTGlua0NhY2hlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZS5wYXRoLnJlcGxhY2UoLyguKikubWQvLCBcIiQxXCIpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc3QgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChsaW5rLmxpbmssIGZpbGVOYW1lKVxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3X3Byb3BzID0gZmV0Y2hUYXJnZXRBdHRyaWJ1dGVzU3luYyhhcHAsIHNldHRpbmdzLCBkZXN0LCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVybmFsTGlua3MgPSBsZWFmLnZpZXcuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbChgYS5pbnRlcm5hbC1saW5rW2hyZWY9XCIke2xpbmsubGlua31cIl1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJuYWxMaW5rcy5mb3JFYWNoKChpbnRlcm5hbExpbms6IEhUTUxFbGVtZW50KSA9PiBzZXRMaW5rTmV3UHJvcHMoaW50ZXJuYWxMaW5rLCBuZXdfcHJvcHMpKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG59XG4iLCJpbXBvcnQgRmllbGQgZnJvbSBcInNyYy9GaWVsZFwiXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncyB7XG5cdHRhcmdldEF0dHJpYnV0ZXM6IEFycmF5PHN0cmluZz47XG5cdHRhcmdldFRhZ3M6IGJvb2xlYW47XG5cdHByZXNldEZpZWxkczogQXJyYXk8RmllbGQ+O1xuXHRkaXNwbGF5RmllbGRzSW5Db250ZXh0TWVudTogYm9vbGVhbjtcblx0Z2xvYmFsbHlJZ25vcmVkRmllbGRzOiBBcnJheTxzdHJpbmc+O1xuXHRnZXRGcm9tSW5saW5lRmllbGQ6IGJvb2xlYW47XG5cdGNsYXNzRmlsZXNQYXRoOiBzdHJpbmc7XG5cdGVuYWJsZUVkaXRvcjogYm9vbGVhbjtcblx0ZW5hYmxlRmlsZUxpc3Q6IGJvb2xlYW47XG5cdGVuYWJsZUJhY2tsaW5rczogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3MgPSB7XG5cdHRhcmdldEF0dHJpYnV0ZXM6IFtdLFxuXHR0YXJnZXRUYWdzOiB0cnVlLFxuXHRwcmVzZXRGaWVsZHM6IFtdLFxuXHRkaXNwbGF5RmllbGRzSW5Db250ZXh0TWVudTogdHJ1ZSxcblx0Z2xvYmFsbHlJZ25vcmVkRmllbGRzOiBbXSxcblx0Y2xhc3NGaWxlc1BhdGg6IFwiXCIsXG5cdGdldEZyb21JbmxpbmVGaWVsZDogdHJ1ZSxcblx0ZW5hYmxlRWRpdG9yOiB0cnVlLFxuXHRlbmFibGVGaWxlTGlzdDogdHJ1ZSxcblx0ZW5hYmxlQmFja2xpbmtzOiB0cnVlXG59IiwiaW1wb3J0IHtBcHAsIFRGaWxlfSBmcm9tIFwib2JzaWRpYW5cIlxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVwbGFjZVZhbHVlcyhhcHA6IEFwcCwgZmlsZTogVEZpbGUsIGF0dHJpYnV0ZTogc3RyaW5nLCBpbnB1dDogc3RyaW5nKTogUHJvbWlzZSA8dm9pZD57XG4gICAgYXBwLnZhdWx0LnJlYWQoZmlsZSkudGhlbigocmVzdWx0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgbGV0IG5ld0NvbnRlbnQ6QXJyYXk8c3RyaW5nPiA9IFtdXG4gICAgICAgIGxldCBmb3JlSGVhZFRleHQgPSBmYWxzZVxuICAgICAgICBsZXQgZnJvbnRtYXR0ZXJTdGFydCA9IGZhbHNlXG4gICAgICAgIGxldCBmcm9udG1hdHRlckVuZCA9IGZhbHNlXG4gICAgICAgIGxldCBpbkZyb250bWF0dGVyID0gZmFsc2VcbiAgICAgICAgcmVzdWx0LnNwbGl0KCdcXG4nKS5tYXAobGluZSA9PiB7XG4gICAgICAgICAgICBpZihsaW5lIT1cIi0tLVwiICYmICFmb3JlSGVhZFRleHQgJiYgIWZyb250bWF0dGVyU3RhcnQpe1xuICAgICAgICAgICAgICAgIGZvcmVIZWFkVGV4dCA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGxpbmUgPT0gXCItLS1cIiAmJiAhZm9yZUhlYWRUZXh0KXtcbiAgICAgICAgICAgICAgICBpZighZnJvbnRtYXR0ZXJTdGFydCl7XG4gICAgICAgICAgICAgICAgICAgIGZyb250bWF0dGVyU3RhcnQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIGluRnJvbnRtYXR0ZXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCFmcm9udG1hdHRlckVuZCl7XG4gICAgICAgICAgICAgICAgICAgIGZyb250bWF0dGVyRW5kID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBpbkZyb250bWF0dGVyID0gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihpbkZyb250bWF0dGVyKXtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYCR7YXR0cmlidXRlfTpgLCAndScpXG4gICAgICAgICAgICAgICAgY29uc3QgcmVnZXhSZXN1bHQgPSBsaW5lLm1hdGNoKHJlZ2V4KVxuICAgICAgICAgICAgICAgIGlmKHJlZ2V4UmVzdWx0ICYmIHJlZ2V4UmVzdWx0Lmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dEFycmF5ID0gaW5wdXQgPyBpbnB1dC5yZXBsYWNlKC8oXFwsXFxzKykvZywgJywnKS5zcGxpdCgnLCcpIDogW1wiXCJdXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gaW5wdXRBcnJheS5sZW5ndGggPT0gMSA/IGlucHV0QXJyYXlbMF0gOiBgWyR7aW5wdXRBcnJheS5qb2luKCcsICcpfV1gXG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChgJHthdHRyaWJ1dGV9OiAke25ld1ZhbHVlfWApXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGAke2xpbmV9YClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgKFtfXFwqflxcYF0qKSR7YXR0cmlidXRlfShbX1xcKn5cXGBdKikoXFxcXHMqKTo6YCwgJ3UnKVxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBsaW5lLm1hdGNoKHJlZ2V4KVxuICAgICAgICAgICAgICAgIGlmKHIgJiYgci5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRBcnJheSA9IGlucHV0ID8gaW5wdXQucmVwbGFjZSgvKFxcLFxccyspL2csICcsJykuc3BsaXQoJywnKSA6IFtcIlwiXVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IGlucHV0QXJyYXkubGVuZ3RoID09IDEgPyBpbnB1dEFycmF5WzBdIDogYCR7aW5wdXRBcnJheS5qb2luKCcsICcpfWBcbiAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGAke3JbMV19JHthdHRyaWJ1dGV9JHtyWzJdfSR7clszXX06OiAke25ld1ZhbHVlfWApXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGxpbmUpXG4gICAgICAgICAgICAgICAgfVx0XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudC5qb2luKCdcXG4nKSlcbiAgICB9KVxufSIsImltcG9ydCB7QXBwLCBNb2RhbCwgVG9nZ2xlQ29tcG9uZW50LCBURmlsZSwgQnV0dG9uQ29tcG9uZW50LCBFeHRyYUJ1dHRvbkNvbXBvbmVudCwgcGFyc2VGcm9udE1hdHRlclN0cmluZ0FycmF5fSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IEZpZWxkIGZyb20gXCJzcmMvRmllbGRcIlxuaW1wb3J0IHsgcmVwbGFjZVZhbHVlcyB9IGZyb20gXCJzcmMvb3B0aW9ucy9yZXBsYWNlVmFsdWVzXCJcbmltcG9ydCBGaWVsZFNldHRpbmcgZnJvbSBcInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmdcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyB2YWx1ZU11bHRpU2VsZWN0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgYXBwOiBBcHBcbiAgICBmaWxlOiBURmlsZVxuICAgIG5hbWU6IHN0cmluZ1xuICAgIHNldHRpbmdzOiBGaWVsZFxuICAgIHZhbHVlczogQXJyYXk8c3RyaW5nPlxuICAgIGxpbmVOdW1iZXI6IG51bWJlclxuICAgIGluRnJvbnRtYXR0ZXI6IGJvb2xlYW5cbiAgICB0b3A6IGJvb2xlYW5cblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgbmFtZTogc3RyaW5nLCBpbml0aWFsVmFsdWVzOiBzdHJpbmcsIHNldHRpbmdzOiBGaWVsZCwgbGluZU51bWJlcjogbnVtYmVyID0gLTEsIGluRnJvbnRNYXR0ZXI6IGJvb2xlYW4gPSBmYWxzZSwgdG9wOiBib29sZWFuID0gZmFsc2Upe1xuICAgICAgICBzdXBlcihhcHApXG4gICAgICAgIHRoaXMuYXBwID0gYXBwXG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGVcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZVxuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3NcbiAgICAgICAgdGhpcy52YWx1ZXMgPSBpbml0aWFsVmFsdWVzID8gaW5pdGlhbFZhbHVlcy50b1N0cmluZygpLnJlcGxhY2UoL15cXFsoLiopXFxdJC8sXCIkMVwiKS5zcGxpdChcIixcIikubWFwKGl0ZW0gPT4gaXRlbS50cmltKCkpIDogW11cbiAgICAgICAgdGhpcy5saW5lTnVtYmVyID0gbGluZU51bWJlclxuICAgICAgICB0aGlzLmluRnJvbnRtYXR0ZXIgPSBpbkZyb250TWF0dGVyXG4gICAgICAgIHRoaXMudG9wID0gdG9wXG4gICAgfSAgIFxuXG4gICAgb25PcGVuKCl7XG4gICAgICAgIGNvbnN0IHZhbHVlR3JpZCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7XG4gICAgICAgICAgICBjbHM6IFwiZnJvbnRtYXR0ZXItdmFsdWVzLWdyaWRcIlxuICAgICAgICB9KVxuICAgICAgICBGaWVsZFNldHRpbmcuZ2V0VmFsdWVzTGlzdEZyb21Ob3RlKHRoaXMuc2V0dGluZ3MudmFsdWVzTGlzdE5vdGVQYXRoLCB0aGlzLmFwcCkudGhlbihsaXN0Tm90ZVZhbHVlcyA9PiB7XG4gICAgICAgICAgICB0aGlzLnBvcHVsYXRlVmFsdWVzR3JpZCh2YWx1ZUdyaWQsIGxpc3ROb3RlVmFsdWVzKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGJ1aWxkVmFsdWVUb2dnbGVyKHZhbHVlR3JpZDogSFRNTERpdkVsZW1lbnQscHJlc2V0VmFsdWU6IHN0cmluZyl7XG4gICAgICAgIGNvbnN0IHZhbHVlU2VsZWN0b3JDb250YWluZXIgPSB2YWx1ZUdyaWQuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgIGNsczogXCJmcm9udG1hdHRlci12YWx1ZS1zZWxlY3Rvci1jb250YWluZXJcIlxuICAgICAgICB9KVxuICAgICAgICBjb25zdCB2YWx1ZVRvZ2dsZXJDb250YWluZXIgPSB2YWx1ZVNlbGVjdG9yQ29udGFpbmVyLmNyZWF0ZURpdih7XG4gICAgICAgICAgICBjbHM6IFwiZnJvbnRtYXR0ZXItdmFsdWUtc2VsZWN0b3ItdG9nZ2xlclwiXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IHZhbHVlVG9nZ2xlciA9IG5ldyBUb2dnbGVDb21wb25lbnQodmFsdWVUb2dnbGVyQ29udGFpbmVyKVxuICAgICAgICB0aGlzLnZhbHVlcy5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBwcmVzZXRWYWx1ZSl7XG4gICAgICAgICAgICAgICAgdmFsdWVUb2dnbGVyLnNldFZhbHVlKHRydWUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHZhbHVlVG9nZ2xlci5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZih2YWx1ZSAmJiAhdGhpcy52YWx1ZXMuaW5jbHVkZXMocHJlc2V0VmFsdWUpKXtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlcy5wdXNoKHByZXNldFZhbHVlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIXZhbHVlKXtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlcy5yZW1vdmUocHJlc2V0VmFsdWUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IHZhbHVlTGFiZWwgPSB2YWx1ZVNlbGVjdG9yQ29udGFpbmVyLmNyZWF0ZURpdih7XG4gICAgICAgICAgICBjbHM6IFwiZnJvbnRtYXR0ZXItdmFsdWUtc2VsZWN0b3ItbGFiZWxcIlxuICAgICAgICB9KVxuICAgICAgICB2YWx1ZUxhYmVsLnNldFRleHQocHJlc2V0VmFsdWUpXG4gICAgfVxuXG4gICAgcG9wdWxhdGVWYWx1ZXNHcmlkKHZhbHVlR3JpZDogSFRNTERpdkVsZW1lbnQsIGxpc3ROb3RlVmFsdWVzOiBzdHJpbmdbXSl7XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMuc2V0dGluZ3MudmFsdWVzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcmVzZXRWYWx1ZSA9IHRoaXMuc2V0dGluZ3MudmFsdWVzW2tleV1cbiAgICAgICAgICAgIHRoaXMuYnVpbGRWYWx1ZVRvZ2dsZXIodmFsdWVHcmlkLCBwcmVzZXRWYWx1ZSlcbiAgICAgICAgfSlcbiAgICAgICAgbGlzdE5vdGVWYWx1ZXMuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkVmFsdWVUb2dnbGVyKHZhbHVlR3JpZCwgdmFsdWUpXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IGZvb3RlciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7XG4gICAgICAgICAgICBjbHM6IFwiZnJvbnRtYXR0ZXItdmFsdWUtZ3JpZC1mb290ZXJcIlxuICAgICAgICB9KVxuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChmb290ZXIpXG4gICAgICAgIHNhdmVCdXR0b24uc2V0SWNvbihcImNoZWNrbWFya1wiKVxuICAgICAgICBzYXZlQnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgaWYodGhpcy5saW5lTnVtYmVyID09IC0xKXtcbiAgICAgICAgICAgICAgICByZXBsYWNlVmFsdWVzKHRoaXMuYXBwLCB0aGlzLmZpbGUsIHRoaXMubmFtZSwgdGhpcy52YWx1ZXMuam9pbihcIixcIikpXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5yZWFkKHRoaXMuZmlsZSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3Q29udGVudDogc3RyaW5nW10gPSBbXVxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnRvcCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50LnB1c2goYCR7dGhpcy5uYW1lfSR7dGhpcy5pbkZyb250bWF0dGVyID8gXCI6XCIgOiBcIjo6XCJ9ICR7dGhpcy52YWx1ZXMuam9pbihcIixcIil9YClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zcGxpdChcIlxcblwiKS5mb3JFYWNoKChsaW5lLCBfbGluZU51bWJlcikgPT4gbmV3Q29udGVudC5wdXNoKGxpbmUpKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNwbGl0KFwiXFxuXCIpLmZvckVhY2goKGxpbmUsIF9saW5lTnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoX2xpbmVOdW1iZXIgPT0gdGhpcy5saW5lTnVtYmVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGAke3RoaXMubmFtZX0ke3RoaXMuaW5Gcm9udG1hdHRlciA/IFwiOlwiIDogXCI6OlwifSAke3RoaXMudmFsdWVzLmpvaW4oXCIsXCIpfWApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQubW9kaWZ5KHRoaXMuZmlsZSwgbmV3Q29udGVudC5qb2luKCdcXG4nKSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IG5ldyBFeHRyYUJ1dHRvbkNvbXBvbmVudChmb290ZXIpXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5zZXRJY29uKFwiY3Jvc3NcIilcbiAgICAgICAgY2FuY2VsQnV0dG9uLm9uQ2xpY2soKCkgPT4gdGhpcy5jbG9zZSgpKVxuICAgIH1cbn0iLCJpbXBvcnQge0FwcCwgTW9kYWwsIFRleHRDb21wb25lbnQsIFRGaWxlfSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IHsgcmVwbGFjZVZhbHVlcyB9IGZyb20gXCJzcmMvb3B0aW9ucy9yZXBsYWNlVmFsdWVzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgdmFsdWVUZXh0SW5wdXRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBhcHA6IEFwcFxuICAgIGZpbGU6IFRGaWxlXG4gICAgbmFtZTogc3RyaW5nXG4gICAgdmFsdWU6IHN0cmluZ1xuICAgIGxpbmVOdW1iZXI6IG51bWJlclxuICAgIGluRnJvbnRtYXR0ZXI6IGJvb2xlYW5cbiAgICB0b3A6IGJvb2xlYW5cblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgbmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBsaW5lTnVtYmVyOiBudW1iZXIgPSAtMSwgaW5Gcm9udE1hdHRlcjogYm9vbGVhbiA9IGZhbHNlLCB0b3A6IGJvb2xlYW4gPSBmYWxzZSl7XG4gICAgICAgIHN1cGVyKGFwcClcbiAgICAgICAgdGhpcy5hcHAgPSBhcHBcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZVxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZVxuICAgICAgICB0aGlzLmxpbmVOdW1iZXIgPSBsaW5lTnVtYmVyXG4gICAgICAgIHRoaXMuaW5Gcm9udG1hdHRlciA9IGluRnJvbnRNYXR0ZXJcbiAgICAgICAgdGhpcy50b3AgPSB0b3BcbiAgICB9XG5cbiAgICBvbk9wZW4oKXtcbiAgICAgICAgY29uc3QgaW5wdXREaXYgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiBcImZyb250bWF0dGVyLW1vZGFsLXZhbHVlXCJcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5idWlsZElucHV0RWwoaW5wdXREaXYpXG4gICAgfVxuXG4gICAgYnVpbGRJbnB1dEVsKGlucHV0RGl2OiBIVE1MRGl2RWxlbWVudCk6IHZvaWR7XG4gICAgICAgIGNvbnN0IGZvcm0gPSBpbnB1dERpdi5jcmVhdGVFbChcImZvcm1cIilcbiAgICAgICAgZm9ybS50eXBlID0gXCJzdWJtaXRcIjtcbiAgICAgICAgZm9ybS5vbnN1Ym1pdCA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICBpZih0aGlzLmxpbmVOdW1iZXIgPT0gLTEpe1xuICAgICAgICAgICAgICAgIHJlcGxhY2VWYWx1ZXModGhpcy5hcHAsIHRoaXMuZmlsZSwgdGhpcy5uYW1lLCBpbnB1dEVsLmdldFZhbHVlKCkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5yZWFkKHRoaXMuZmlsZSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3Q29udGVudDogc3RyaW5nW10gPSBbXVxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnRvcCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50LnB1c2goYCR7dGhpcy5uYW1lfSR7dGhpcy5pbkZyb250bWF0dGVyID8gXCI6XCIgOiBcIjo6XCJ9ICR7aW5wdXRFbC5nZXRWYWx1ZSgpfWApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3BsaXQoXCJcXG5cIikuZm9yRWFjaCgobGluZSwgX2xpbmVOdW1iZXIpID0+IG5ld0NvbnRlbnQucHVzaChsaW5lKSlcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zcGxpdChcIlxcblwiKS5mb3JFYWNoKChsaW5lLCBfbGluZU51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChsaW5lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKF9saW5lTnVtYmVyID09IHRoaXMubGluZU51bWJlcil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChgJHt0aGlzLm5hbWV9JHt0aGlzLmluRnJvbnRtYXR0ZXIgPyBcIjpcIiA6IFwiOjpcIn0gJHtpbnB1dEVsLmdldFZhbHVlKCl9YClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm1vZGlmeSh0aGlzLmZpbGUsIG5ld0NvbnRlbnQuam9pbignXFxuJykpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbnB1dEVsID0gbmV3IFRleHRDb21wb25lbnQoZm9ybSlcbiAgICAgICAgaW5wdXRFbC5pbnB1dEVsLmZvY3VzKClcbiAgICAgICAgaW5wdXRFbC5zZXRWYWx1ZSh0aGlzLnZhbHVlKVxuICAgICAgICBpbnB1dEVsLmlucHV0RWwuYWRkQ2xhc3MoXCJmcm9udG1hdHRlci1wcm9tcHQtaW5wdXRcIilcblxuICAgIH1cbn0iLCJpbXBvcnQge0FwcCwgTW9kYWwsIFRvZ2dsZUNvbXBvbmVudCwgVEZpbGV9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQgeyByZXBsYWNlVmFsdWVzIH0gZnJvbSBcInNyYy9vcHRpb25zL3JlcGxhY2VWYWx1ZXNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyB2YWx1ZVRvZ2dsZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIGFwcDogQXBwXG4gICAgZmlsZTogVEZpbGVcbiAgICBuYW1lOiBzdHJpbmdcbiAgICB2YWx1ZTogYm9vbGVhblxuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGZpbGU6IFRGaWxlLCBuYW1lOiBzdHJpbmcsIHZhbHVlOiBib29sZWFuKXtcbiAgICAgICAgc3VwZXIoYXBwKVxuICAgICAgICB0aGlzLmFwcCA9IGFwcFxuICAgICAgICB0aGlzLmZpbGUgPSBmaWxlXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlXG4gICAgfVxuXG4gICAgb25PcGVuKCl7XG4gICAgICAgIGNvbnN0IGlucHV0RGl2ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgIGNsczogXCJmcm9udG1hdHRlci10b2dnbGVyXCJcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5idWlsZElucHV0RWwoaW5wdXREaXYpXG4gICAgfVxuXG4gICAgYnVpbGRJbnB1dEVsKGlucHV0RGl2OiBIVE1MRGl2RWxlbWVudCk6IHZvaWR7XG4gICAgICAgIGNvbnN0IGlucHV0RWwgPSBuZXcgVG9nZ2xlQ29tcG9uZW50KGlucHV0RGl2KVxuICAgICAgICBpbnB1dEVsLnNldFZhbHVlKHRoaXMudmFsdWUpXG4gICAgICAgIGlucHV0RWwub25DaGFuZ2UodiA9PiB7XG4gICAgICAgICAgICByZXBsYWNlVmFsdWVzKHRoaXMuYXBwLCB0aGlzLmZpbGUsIHRoaXMubmFtZSwgdiA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiKVxuICAgICAgICB9KVxuICAgIH1cbn0iLCJpbXBvcnQge0FwcCwgTW9kYWwsIERyb3Bkb3duQ29tcG9uZW50LCBURmlsZSwgQnV0dG9uQ29tcG9uZW50fSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IEZpZWxkIGZyb20gXCJzcmMvRmllbGRcIlxuaW1wb3J0IHsgcmVwbGFjZVZhbHVlcyB9IGZyb20gXCJzcmMvb3B0aW9ucy9yZXBsYWNlVmFsdWVzXCJcbmltcG9ydCBGaWVsZFNldHRpbmcgZnJvbSBcInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmdcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyB2YWx1ZVRvZ2dsZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIGFwcDogQXBwXG4gICAgZmlsZTogVEZpbGVcbiAgICBuYW1lOiBzdHJpbmdcbiAgICB2YWx1ZTogc3RyaW5nXG4gICAgc2V0dGluZ3M6IEZpZWxkXG4gICAgbmV3VmFsdWU6IHN0cmluZ1xuICAgIGxpbmVOdW1iZXI6IG51bWJlclxuICAgIGluRnJvbnRtYXR0ZXI6IGJvb2xlYW5cbiAgICB0b3A6IGJvb2xlYW5cblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgbmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBzZXR0aW5nczogRmllbGQsIGxpbmVOdW1iZXI6IG51bWJlciA9IC0xLCBpbkZyb250TWF0dGVyOiBib29sZWFuID0gZmFsc2UsIHRvcDogYm9vbGVhbiA9IGZhbHNlKXtcbiAgICAgICAgc3VwZXIoYXBwKVxuICAgICAgICB0aGlzLmFwcCA9IGFwcFxuICAgICAgICB0aGlzLmZpbGUgPSBmaWxlXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5nc1xuICAgICAgICB0aGlzLm5ld1ZhbHVlID0gbnVsbFxuICAgICAgICB0aGlzLmxpbmVOdW1iZXIgPSBsaW5lTnVtYmVyXG4gICAgICAgIHRoaXMuaW5Gcm9udG1hdHRlciA9IGluRnJvbnRNYXR0ZXJcbiAgICAgICAgdGhpcy50b3AgPSB0b3BcbiAgICB9XG5cbiAgICBvbk9wZW4oKXtcbiAgICAgICAgY29uc3QgaW5wdXREaXYgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiBcImZyb250bWF0dGVyLW1vZGFsLXZhbHVlXCJcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5idWlsZElucHV0RWwoaW5wdXREaXYpXG4gICAgfVxuXG4gICAgYnVpbGRJbnB1dEVsKGlucHV0RGl2OiBIVE1MRGl2RWxlbWVudCk6IHZvaWR7XG4gICAgICAgIGNvbnN0IHNlbGVjdEVsID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KGlucHV0RGl2KVxuICAgICAgICBzZWxlY3RFbC5zZWxlY3RFbC5hZGRDbGFzcyhcImZyb250bWF0dGVyLXNlbGVjdFwiKVxuICAgICAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLnNldHRpbmdzLnZhbHVlc1xuICAgICAgICBzZWxlY3RFbC5hZGRPcHRpb24oXCJcIixcIi0tRW1wdHktLVwiKVxuICAgICAgICBPYmplY3Qua2V5cyh2YWx1ZXMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIHNlbGVjdEVsLmFkZE9wdGlvbih2YWx1ZXNba2V5XSwgdmFsdWVzW2tleV0pXG4gICAgICAgIH0pO1xuICAgICAgICBpZihPYmplY3QudmFsdWVzKHZhbHVlcykuaW5jbHVkZXModGhpcy52YWx1ZSkpe1xuICAgICAgICAgICAgc2VsZWN0RWwuc2V0VmFsdWUodGhpcy52YWx1ZSlcbiAgICAgICAgfVxuICAgICAgICBGaWVsZFNldHRpbmcuZ2V0VmFsdWVzTGlzdEZyb21Ob3RlKHRoaXMuc2V0dGluZ3MudmFsdWVzTGlzdE5vdGVQYXRoLCB0aGlzLmFwcCkudGhlbihsaXN0Tm90ZVZhbHVlcyA9PiB7XG4gICAgICAgICAgICBsaXN0Tm90ZVZhbHVlcy5mb3JFYWNoKHZhbHVlID0+IHNlbGVjdEVsLmFkZE9wdGlvbih2YWx1ZSwgdmFsdWUpKVxuICAgICAgICAgICAgaWYobGlzdE5vdGVWYWx1ZXMuaW5jbHVkZXModGhpcy52YWx1ZSkpe1xuICAgICAgICAgICAgICAgIHNlbGVjdEVsLnNldFZhbHVlKHRoaXMudmFsdWUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxlY3RFbC5vbkNoYW5nZSh2YWx1ZSA9PiB0aGlzLm5ld1ZhbHVlID0gdmFsdWUgIT0gXCItLUVtcHR5LS1cIiA/IHZhbHVlIDogXCJcIilcbiAgICAgICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQoaW5wdXREaXYpXG4gICAgICAgICAgICBzdWJtaXRCdXR0b24uc2V0VG9vbHRpcChcIlNhdmVcIilcbiAgICAgICAgICAgIC5zZXRJY29uKFwiY2hlY2ttYXJrXCIpXG4gICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5saW5lTnVtYmVyID09IC0xKXtcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5uZXdWYWx1ZSB8fCB0aGlzLm5ld1ZhbHVlID09IFwiXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZVZhbHVlcyh0aGlzLmFwcCwgdGhpcy5maWxlLCB0aGlzLm5hbWUsIHRoaXMubmV3VmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5yZWFkKHRoaXMuZmlsZSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0NvbnRlbnQ6IHN0cmluZ1tdID0gW11cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMudG9wKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50LnB1c2goYCR7dGhpcy5uYW1lfSR7dGhpcy5pbkZyb250bWF0dGVyID8gXCI6XCIgOiBcIjo6XCJ9ICR7c2VsZWN0RWwuZ2V0VmFsdWUoKX1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zcGxpdChcIlxcblwiKS5mb3JFYWNoKChsaW5lLCBfbGluZU51bWJlcikgPT4gbmV3Q29udGVudC5wdXNoKGxpbmUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3BsaXQoXCJcXG5cIikuZm9yRWFjaCgobGluZSwgX2xpbmVOdW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKF9saW5lTnVtYmVyID09IHRoaXMubGluZU51bWJlcil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50LnB1c2goYCR7dGhpcy5uYW1lfSR7dGhpcy5pbkZyb250bWF0dGVyID8gXCI6XCIgOiBcIjo6XCJ9ICR7c2VsZWN0RWwuZ2V0VmFsdWUoKX1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm1vZGlmeSh0aGlzLmZpbGUsIG5ld0NvbnRlbnQuam9pbignXFxuJykpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICB9XG59IiwiaW1wb3J0IHtNb2RhbCwgVGV4dENvbXBvbmVudCwgQnV0dG9uQ29tcG9uZW50LCBFeHRyYUJ1dHRvbkNvbXBvbmVudCxURmlsZX0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwibWFpblwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGFkZE5ld0ZpZWxkTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cbiAgICBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzXG4gICAgbGluZU51bWJlcjogbnVtYmVyXG4gICAgZmlsZTogVEZpbGVcbiAgICBpbkZyb250bWF0dGVyOiBib29sZWFuXG4gICAgdG9wOiBib29sZWFuXG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzLCBsaW5lTnVtYmVyOiBudW1iZXIsIGZpbGU6IFRGaWxlLCBpbkZyb250bWF0dGVyOiBib29sZWFuLCB0b3A6IGJvb2xlYW4pe1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKVxuICAgICAgICB0aGlzLmxpbmVOdW1iZXIgPSBsaW5lTnVtYmVyXG4gICAgICAgIHRoaXMuaW5Gcm9udG1hdHRlciA9IGluRnJvbnRtYXR0ZXJcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZVxuICAgICAgICB0aGlzLnRvcCA9IHRvcFxuICAgIH1cblxuICAgIG9uT3Blbigpe1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChcIkluc2VydCBuZXcgZmllbGRcIilcbiAgICAgICAgY29uc3QgYWRkTmV3RmllbGRDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKVxuICAgICAgICBjb25zdCBuYW1lSW5wdXRDb250YWluZXIgPSBhZGROZXdGaWVsZENvbnRhaW5lci5jcmVhdGVEaXYoKVxuICAgICAgICBuYW1lSW5wdXRDb250YWluZXIuc2V0VGV4dChcIkZpZWxkIE5hbWU6IFwiKVxuICAgICAgICBjb25zdCBuYW1lSW5wdXRFbCA9IG5ldyBUZXh0Q29tcG9uZW50KG5hbWVJbnB1dENvbnRhaW5lcilcbiAgICAgICAgbmFtZUlucHV0RWwuc2V0UGxhY2Vob2xkZXIoXCJGaWVsZCBuYW1lXCIpXG4gICAgICAgIGNvbnN0IHZhbHVlSW5wdXRDb250YWluZXIgPSBhZGROZXdGaWVsZENvbnRhaW5lci5jcmVhdGVEaXYoKVxuICAgICAgICB2YWx1ZUlucHV0Q29udGFpbmVyLnNldFRleHQoXCJGaWVsZCB2YWx1ZTogXCIpXG4gICAgICAgIGNvbnN0IHZhbHVlSW5wdXRFbCA9IG5ldyBUZXh0Q29tcG9uZW50KHZhbHVlSW5wdXRDb250YWluZXIpXG4gICAgICAgIHZhbHVlSW5wdXRFbC5zZXRQbGFjZWhvbGRlcihcIkZpZWxkIHZhbHVlXCIpXG4gICAgICAgIGNvbnN0IGZvb3RlckJ1dHRvbnMgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiAnZnJvbnRtYXR0ZXItdGV4dGFyZWEtYnV0dG9ucydcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQoZm9vdGVyQnV0dG9ucylcbiAgICAgICAgc2F2ZUJ1dHRvbi5zZXRJY29uKFwiY2hlY2ttYXJrXCIpXG4gICAgICAgIHNhdmVCdXR0b24ub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5yZWFkKHRoaXMuZmlsZSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBuZXdDb250ZW50OiBzdHJpbmdbXSA9IFtdXG4gICAgICAgICAgICAgICAgaWYodGhpcy50b3Ape1xuICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50LnB1c2goYCR7bmFtZUlucHV0RWwuZ2V0VmFsdWUoKX0ke3RoaXMuaW5Gcm9udG1hdHRlciA/IFwiOlwiIDogXCI6OlwifSAke3ZhbHVlSW5wdXRFbC5nZXRWYWx1ZSgpfWApXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zcGxpdChcIlxcblwiKS5mb3JFYWNoKChsaW5lLCBfbGluZU51bWJlcikgPT4gbmV3Q29udGVudC5wdXNoKGxpbmUpKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zcGxpdChcIlxcblwiKS5mb3JFYWNoKChsaW5lLCBfbGluZU51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihfbGluZU51bWJlciA9PSB0aGlzLmxpbmVOdW1iZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChgJHtuYW1lSW5wdXRFbC5nZXRWYWx1ZSgpfSR7dGhpcy5pbkZyb250bWF0dGVyID8gXCI6XCIgOiBcIjo6XCJ9ICR7dmFsdWVJbnB1dEVsLmdldFZhbHVlKCl9YClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQubW9kaWZ5KHRoaXMuZmlsZSwgbmV3Q29udGVudC5qb2luKCdcXG4nKSlcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IG5ldyBFeHRyYUJ1dHRvbkNvbXBvbmVudChmb290ZXJCdXR0b25zKVxuICAgICAgICBjYW5jZWxCdXR0b24uc2V0SWNvbihcImNyb3NzXCIpXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICB9KVxuXG5cbiAgICB9XG59IiwiaW1wb3J0IHtBcHAsIE1vZGFsLCBEcm9wZG93bkNvbXBvbmVudCwgVEZpbGV9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3MgZnJvbSBcIm1haW5cIlxuaW1wb3J0IGFkZE5ld0ZpZWxkTW9kYWwgZnJvbSBcIi4vYWRkTmV3RmllbGRNb2RhbFwiXG5pbXBvcnQgdmFsdWVUZXh0SW5wdXRNb2RhbCBmcm9tIFwiLi92YWx1ZVRleHRJbnB1dE1vZGFsXCJcbmltcG9ydCB2YWx1ZVNlbGVjdE1vZGFsIGZyb20gXCIuL3ZhbHVlU2VsZWN0TW9kYWxcIlxuaW1wb3J0IHZhbHVlTXVsdGlTZWxlY3RNb2RhbCBmcm9tIFwiLi92YWx1ZU11bHRpU2VsZWN0TW9kYWxcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBmaWVsZFNlbGVjdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXG4gICAgbGluZU51bWJlcjogbnVtYmVyXG4gICAgbGluZTogc3RyaW5nXG4gICAgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rc1xuICAgIGZpbGU6IFRGaWxlXG4gICAgaW5Gcm9udG1hdHRlcjogYm9vbGVhblxuICAgIHRvcDogYm9vbGVhblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIGZpbGU6VEZpbGUsIGxpbmVOdW1iZXI6IG51bWJlciwgbGluZTogc3RyaW5nLCBpbkZyb250bWF0dGVyOiBib29sZWFuLCB0b3A6IGJvb2xlYW4pe1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKVxuICAgICAgICB0aGlzLmxpbmUgPSBsaW5lXG4gICAgICAgIHRoaXMubGluZU51bWJlciA9IGxpbmVOdW1iZXJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cbiAgICAgICAgdGhpcy5maWxlID0gZmlsZVxuICAgICAgICB0aGlzLmluRnJvbnRtYXR0ZXIgPSBpbkZyb250bWF0dGVyXG4gICAgICAgIHRoaXMudG9wID0gdG9wXG4gICAgfVxuXG4gICAgb25PcGVuKCl7XG4gICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KGBJbnNlcnQgZmllbGQgYWZ0ZXIgPiAke3RoaXMubGluZS5zdWJzdHJpbmcoMCwgMjApfSR7dGhpcy5saW5lLmxlbmd0aD4yMCA/IFwiLi4uXCIgOiBcIlwifWApXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpXG4gICAgICAgIGNvbnN0IHNldHRpbmdzRHJvcGRvd25Db250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KClcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NTZWxlY3RvciA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChzZXR0aW5nc0Ryb3Bkb3duQ29udGFpbmVyKVxuICAgICAgICBzZXR0aW5nc1NlbGVjdG9yLmFkZE9wdGlvbihcIi0tLVwiLCBcIkNob29zZSBGaWVsZFwiKVxuICAgICAgICBzZXR0aW5nc1NlbGVjdG9yLmFkZE9wdGlvbihcIisrTmV3XCIsIFwiTmV3XCIpXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByZXNldEZpZWxkcy5mb3JFYWNoKHNldHRpbmcgPT4ge1xuICAgICAgICAgICAgc2V0dGluZ3NTZWxlY3Rvci5hZGRPcHRpb24oc2V0dGluZy5uYW1lLCBzZXR0aW5nLm5hbWUpXG4gICAgICAgIH0pXG4gICAgICAgIHNldHRpbmdzU2VsZWN0b3Iub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgaWYodmFsdWUgPT0gXCIrK05ld1wiKXtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdGaWVsZE1vZGFsID0gbmV3IGFkZE5ld0ZpZWxkTW9kYWwodGhpcy5wbHVnaW4sIHRoaXMubGluZU51bWJlciwgdGhpcy5maWxlLCB0aGlzLmluRnJvbnRtYXR0ZXIsIHRoaXMudG9wKVxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkTW9kYWwub3BlbigpXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlc2V0RmllbGRzLmZpbHRlcihfZmllbGQgPT4gX2ZpZWxkLm5hbWUgPT0gdmFsdWUpWzBdXG4gICAgICAgICAgICAgICAgaWYoZmllbGQudmFsdWVzTGlzdE5vdGVQYXRoIHx8IChmaWVsZC52YWx1ZXMgJiYgT2JqZWN0LmtleXMoZmllbGQudmFsdWVzKS5sZW5ndGggPiAwKSl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGZpZWxkLmlzTXVsdGkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRNb2RhbCA9IG5ldyB2YWx1ZU11bHRpU2VsZWN0TW9kYWwodGhpcy5hcHAsIHRoaXMuZmlsZSwgZmllbGQubmFtZSwgXCJcIiwgZmllbGQsIHRoaXMubGluZU51bWJlciwgdGhpcy5pbkZyb250bWF0dGVyLCB0aGlzLnRvcClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkTW9kYWwudGl0bGVFbC5zZXRUZXh0KGBTZWxlY3QgdmFsdWVzIGZvciAke3ZhbHVlfWApXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZE1vZGFsLm9wZW4oKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRNb2RhbCA9IG5ldyB2YWx1ZVNlbGVjdE1vZGFsKHRoaXMuYXBwLCB0aGlzLmZpbGUsIGZpZWxkLm5hbWUsIFwiXCIsIGZpZWxkLCB0aGlzLmxpbmVOdW1iZXIsIHRoaXMuaW5Gcm9udG1hdHRlciwgdGhpcy50b3ApXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZE1vZGFsLnRpdGxlRWwuc2V0VGV4dChgU2VsZWN0IHZhbHVlIGZvciAke3ZhbHVlfWApXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZE1vZGFsLm9wZW4oKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRNb2RhbCA9IG5ldyB2YWx1ZVRleHRJbnB1dE1vZGFsKHRoaXMuYXBwLCB0aGlzLmZpbGUsIHZhbHVlLCBcIlwiLCB0aGlzLmxpbmVOdW1iZXIsIHRoaXMuaW5Gcm9udG1hdHRlciwgdGhpcy50b3ApXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTW9kYWwudGl0bGVFbC5zZXRUZXh0KGBFbnRlciB2YWx1ZSBmb3IgJHt2YWx1ZX1gKVxuICAgICAgICAgICAgICAgICAgICBmaWVsZE1vZGFsLm9wZW4oKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59IiwiaW1wb3J0IHtBcHAsIE1vZGFsLCBEcm9wZG93bkNvbXBvbmVudCwgVEZpbGV9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQgZmllbGRTZWxlY3RNb2RhbCBmcm9tIFwiLi9maWVsZFNlbGVjdE1vZGFsXCJcbmltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwibWFpblwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGNob29zZVNlY3Rpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcblxuICAgIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3NcbiAgICBmaWxlOiBURmlsZVxuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcywgZmlsZTpURmlsZSl7XG4gICAgICAgIHN1cGVyKHBsdWdpbi5hcHApXG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGVcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cbiAgICB9XG5cbiAgICBvbk9wZW4oKXtcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoXCJBZGQgYSBmaWVsZCBpbiB0aGlzIG5vdGUgYWZ0ZXI6XCIpXG4gICAgICAgIGNvbnN0IGlucHV0RGl2ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgIGNsczogXCJmcm9udG1hdHRlci1tb2RhbC12YWx1ZVwiXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IHNlbGVjdEVsID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KGlucHV0RGl2KVxuICAgICAgICBzZWxlY3RFbC5zZWxlY3RFbC5hZGRDbGFzcyhcImZyb250bWF0dGVyLXNlbGVjdFwiKVxuICAgICAgICBzZWxlY3RFbC5hZGRPcHRpb24oXCJcIixcIlNlbGVjdCBsaW5lXCIpXG4gICAgICAgIHNlbGVjdEVsLmFkZE9wdGlvbihcInRvcF8wXCIsXCJ0b3BcIilcbiAgICAgICAgdGhpcy5hcHAudmF1bHQucmVhZCh0aGlzLmZpbGUpLnRoZW4ocmVzdWx0ID0+IHtcblx0XHRcdGxldCBmb3JlSGVhZFRleHQgPSBmYWxzZVxuXHRcdFx0bGV0IGZyb250bWF0dGVyU3RhcnQgPSBmYWxzZVxuXHRcdFx0bGV0IGZyb250bWF0dGVyRW5kID0gZmFsc2Vcblx0XHRcdGxldCBpbkZyb250bWF0dGVyID0gZmFsc2VcbiAgICAgICAgICAgIHJlc3VsdC5zcGxpdChcIlxcblwiKS5mb3JFYWNoKChsaW5lLCBsaW5lTnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYobGluZSE9XCItLS1cIiAmJiAhZm9yZUhlYWRUZXh0ICYmICFmcm9udG1hdHRlclN0YXJ0KXtcblx0XHRcdFx0XHRmb3JlSGVhZFRleHQgPSB0cnVlXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYobGluZSA9PSBcIi0tLVwiICYmICFmb3JlSGVhZFRleHQpe1xuXHRcdFx0XHRcdGlmKCFmcm9udG1hdHRlclN0YXJ0KXtcblx0XHRcdFx0XHRcdGZyb250bWF0dGVyU3RhcnQgPSB0cnVlXG5cdFx0XHRcdFx0XHRpbkZyb250bWF0dGVyID0gdHJ1ZVxuXHRcdFx0XHRcdH0gZWxzZSBpZighZnJvbnRtYXR0ZXJFbmQpe1xuXHRcdFx0XHRcdFx0ZnJvbnRtYXR0ZXJFbmQgPSB0cnVlXG5cdFx0XHRcdFx0XHRpbkZyb250bWF0dGVyID0gZmFsc2Vcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoaW5Gcm9udG1hdHRlcil7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdEVsLmFkZE9wdGlvbihgZnJvbnRtYXR0ZXJfJHtsaW5lTnVtYmVyfWAsIGAke2xpbmUuc3Vic3RyaW5nKDAsIDMwKX0ke2xpbmUubGVuZ3RoID4gMzAgPyBcIi4uLlwiIDogXCJcIn1gKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RFbC5hZGRPcHRpb24oYGJvZHlfJHtsaW5lTnVtYmVyfWAsIGAke2xpbmUuc3Vic3RyaW5nKDAsIDMwKX0ke2xpbmUubGVuZ3RoID4gMzAgPyBcIi4uLlwiIDogXCJcIn1gKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBzZWxlY3RFbC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVBcnJheSA9IHNlbGVjdEVsLmdldFZhbHVlKCkubWF0Y2goLyhcXHcrKV8oXFxkKykvKVxuICAgICAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdmFsdWVBcnJheVsxXVxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVOdW1iZXIgPSBOdW1iZXIodmFsdWVBcnJheVsyXSlcbiAgICAgICAgICAgICAgICBjb25zdCBpbkZyb250bWF0dGVyID0gcG9zaXRpb24gPT0gXCJmcm9udG1hdHRlclwiID8gdHJ1ZSA6IGZhbHNlXG4gICAgICAgICAgICAgICAgY29uc3QgdG9wID0gcG9zaXRpb24gPT0gXCJ0b3BcIiA/IHRydWUgOiBmYWxzZVxuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IGZpZWxkU2VsZWN0TW9kYWwodGhpcy5wbHVnaW4sIHRoaXMuZmlsZSwgbGluZU51bWJlciwgcmVzdWx0LnNwbGl0KCdcXG4nKVtsaW5lTnVtYmVyXSwgaW5Gcm9udG1hdHRlciwgdG9wKVxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG59IiwiaW1wb3J0IEZpZWxkIGZyb20gXCJzcmMvRmllbGRcIlxuXG5pbnRlcmZhY2UgRmlsZUNsYXNzQXR0cmlidXRle1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIHR5cGU6IHN0cmluZ1xuICAgIG9wdGlvbnM6IHN0cmluZ1tdXG4gICAgaXNNdWx0aTogYm9vbGVhblxuICAgIGlzQ3ljbGU6IGJvb2xlYW5cbn1cblxuY29uc3QgdHlwZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgXCJpbnB1dFwiOiBcIkFjY2VwdHMgYW55IHZhbHVlXCIsXG4gICAgXCJzZWxlY3RcIjogXCJBY2NlcHRzIGEgc2luZ2xlIHZhbHVlIGZyb20gYSBsaXN0XCIsXG4gICAgXCJtdWx0aVwiOiBcIkFjY2VwdHMgbXVsdGlwbGUgdmFsdWVzIGZyb20gYSBsaXN0XCIsXG4gICAgXCJjeWNsZVwiOiBcIkN5Y2xlIHRocm91Z2ggdmFsdWVzIGZyb20gYSBsaXN0XCJcbn1cblxuY2xhc3MgRmlsZUNsYXNzQXR0cmlidXRle1xuXG4gICAgY29uc3RydWN0b3IocmF3OiBzdHJpbmcpe1xuICAgICAgICBjb25zdCBjb21wbGV0ZVJlZ2V4ID0gbmV3IFJlZ0V4cCgvXltfXFwqfmBdKihbMC05XFx3XFxwe0xldHRlcn1cXHB7RW1vamlfUHJlc2VudGF0aW9ufV1bLTAtOVxcd1xccHtMZXR0ZXJ9XFxwe0Vtb2ppX1ByZXNlbnRhdGlvbn1cXHNdKilbX1xcKn5gXSpcXHMqOjooLispPy91KVxuICAgICAgICBjb25zdCBuYW1lUmVnZXggPSBuZXcgUmVnRXhwKC9eW19cXCp+YF0qKFswLTlcXHdcXHB7TGV0dGVyfVxccHtFbW9qaV9QcmVzZW50YXRpb259XVstMC05XFx3XFxwe0xldHRlcn1cXHB7RW1vamlfUHJlc2VudGF0aW9ufVxcc10qKVtfXFwqfmBdKlxccyokL3UpXG5cdFx0Y29uc3QgZGV0YWlsZWRGaWVsZFJhdyA9IHJhdy5tYXRjaChjb21wbGV0ZVJlZ2V4KVxuICAgICAgICBjb25zdCBzaW1wbGVGaWVsZFJhdyA9IHJhdy5tYXRjaChuYW1lUmVnZXgpXG4gICAgICAgIGlmKGRldGFpbGVkRmllbGRSYXcpe1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gZGV0YWlsZWRGaWVsZFJhd1sxXS50cmltKClcbiAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gSlNPTi5wYXJzZShgJHtkZXRhaWxlZEZpZWxkUmF3WzJdLnRyaW0oKX1gKVxuICAgICAgICAgICAgdGhpcy50eXBlID0gc2V0dGluZ3NbJ3R5cGUnXVxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwibXVsdGlcIjogIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTXVsdGkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiY3ljbGVcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0N5Y2xlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBzZXR0aW5nc1snb3B0aW9ucyddXG4gICAgICAgIH0gZWxzZSBpZihzaW1wbGVGaWVsZFJhdyl7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBzaW1wbGVGaWVsZFJhd1swXS50cmltKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiSW1wcm9wZXIgdmFsdWVcIilcbiAgICAgICAgICAgIHRocm93IGVycm9yXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRGaWVsZCgpe1xuICAgICAgICBsZXQgdmFsdWVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge31cbiAgICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2goKG9wdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHZhbHVlc1tpbmRleF0gPSBvcHRpb25cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZCh0aGlzLm5hbWUsIHZhbHVlcywgdGhpcy5uYW1lLCB0aGlzLmlzTXVsdGksIHRoaXMuaXNDeWNsZSlcbiAgICB9XG59XG5cbmV4cG9ydCB7RmlsZUNsYXNzQXR0cmlidXRlLCB0eXBlc30iLCJpbXBvcnQge0ZpbGVDbGFzc0F0dHJpYnV0ZX0gZnJvbSBcIi4vZmlsZUNsYXNzQXR0cmlidXRlXCJcbmltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwibWFpblwiXG5pbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nVGFiIGZyb20gXCJzcmMvc2V0dGluZ3MvU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nVGFiXCJcbmltcG9ydCB7IHJlbmRlclJlc3VsdHMgfSBmcm9tIFwib2JzaWRpYW5cIlxuXG5pbnRlcmZhY2UgRmlsZUNsYXNze1xuICAgIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3NcbiAgICBuYW1lOiBzdHJpbmdcbiAgICBhdHRyaWJ1dGVzOiBBcnJheTxGaWxlQ2xhc3NBdHRyaWJ1dGU+XG4gICAgb2JqZWN0czogRmlsZUNsYXNzTWFuYWdlclxuICAgIGVycm9yczogc3RyaW5nW11cbn1cblxuY2xhc3MgRmlsZUNsYXNzTWFuYWdlcntcbiAgICBpbnN0YW5jZTogRmlsZUNsYXNzXG5cbiAgICBjb25zdHJ1Y3RvcihpbnN0YW5jZTogRmlsZUNsYXNzKXtcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGluc3RhbmNlXG4gICAgfVxuXG4gICAgYWxsKCl7XG4gICAgICAgIGNvbnN0IGZpbGVzV2l0aEZpbGVDbGFzc05hbWUgPSB0aGlzLmluc3RhbmNlLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmaWxlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5pbnN0YW5jZS5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpXG4gICAgICAgICAgICByZXR1cm4gY2FjaGUuZnJvbnRtYXR0ZXIgXG4gICAgICAgICAgICAgICAgJiYgT2JqZWN0LmtleXMoY2FjaGUuZnJvbnRtYXR0ZXIpLmluY2x1ZGVzKCdmaWxlQ2xhc3MnKVxuICAgICAgICAgICAgICAgICYmIGNhY2hlLmZyb250bWF0dGVyWydmaWxlQ2xhc3MnXSA9PSB0aGlzLmluc3RhbmNlLm5hbWVcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZpbGVzV2l0aEZpbGVDbGFzc05hbWVcbiAgICB9XG5cbiAgICBnZXQobmFtZTogc3RyaW5nKXtcbiAgICAgICAgY29uc3QgZmlsZXNXaXRoTmFtZSA9IHRoaXMuYWxsKCkuZmlsdGVyKGZpbGUgPT4gZmlsZS5iYXNlbmFtZSA9PSBuYW1lKVxuICAgICAgICBpZihmaWxlc1dpdGhOYW1lLmxlbmd0aCA+IDEpe1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXCJNb3JlIHRoYW4gb25lIHZhbHVlIGZvdW5kXCIpXG4gICAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICB9XG4gICAgICAgIGlmIChmaWxlc1dpdGhOYW1lLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIk5vIGZpbGUgdmFsdWUgZm91bmRcIilcbiAgICAgICAgICAgIHRocm93IGVycm9yXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbGVzV2l0aE5hbWVbMF1cblxuICAgIH1cblxuICAgIGdldFBhdGgocGF0aDogc3RyaW5nKXtcbiAgICAgICAgY29uc3QgZmlsZXNXaXRoTmFtZSA9IHRoaXMuYWxsKCkuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoID09IHBhdGgpXG4gICAgICAgIGlmKGZpbGVzV2l0aE5hbWUubGVuZ3RoID4gMSl7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIk1vcmUgdGhhbiBvbmUgdmFsdWUgZm91bmRcIilcbiAgICAgICAgICAgIHRocm93IGVycm9yXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbGVzV2l0aE5hbWUubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiTm8gZmlsZSB2YWx1ZSBmb3VuZFwiKVxuICAgICAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmlsZXNXaXRoTmFtZVswXVxuXG4gICAgfVxufVxuXG5jbGFzcyBGaWxlQ2xhc3N7XG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcywgbmFtZTogc3RyaW5nKXtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZSxcbiAgICAgICAgdGhpcy5vYmplY3RzID0gbmV3IEZpbGVDbGFzc01hbmFnZXIodGhpcylcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gW11cbiAgICB9XG5cbiAgICBnZXRDbGFzc0ZpbGUoKXtcbiAgICAgICAgY29uc3QgZmlsZXNDbGFzc1BhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jbGFzc0ZpbGVzUGF0aFxuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoID09IGAke2ZpbGVzQ2xhc3NQYXRofSR7dGhpcy5uYW1lfS5tZGApXG4gICAgICAgIGlmKGZpbGVzLmxlbmd0aCA9PSAwKXtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwibm8gc3VjaCBmaWxlQ2xhc3MgaW4gZmlsZUNsYXNzIGZvbGRlclwiKVxuICAgICAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmaWxlc1swXVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0QXR0cmlidXRlcygpOiBQcm9taXNlPHZvaWQ+e1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5nZXRDbGFzc0ZpbGUoKVxuICAgICAgICAgICAgICAgIGxldCBhdHRyaWJ1dGVzOiBBcnJheTxGaWxlQ2xhc3NBdHRyaWJ1dGU+ID0gW11cbiAgICAgICAgICAgICAgICBsZXQgZXJyb3JzOiBzdHJpbmdbXSA9IFtdXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3BsaXQoJ1xcbicpLmZvckVhY2gobGluZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IG5ldyBGaWxlQ2xhc3NBdHRyaWJ1dGUobGluZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLnB1c2goYXR0cmlidXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlc1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9yc1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgdXBkYXRlQXR0cmlidXRlKG5ld1R5cGU6IHN0cmluZywgbmV3T3B0aW9uczogc3RyaW5nW10sIG5ld05hbWU6IHN0cmluZywgYXR0cj86IEZpbGVDbGFzc0F0dHJpYnV0ZSk6IFByb21pc2U8dm9pZD57XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmdldENsYXNzRmlsZSgpXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgaWYoYXR0cil7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdDb250ZW50OiBzdHJpbmdbXSA9IFtdXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zcGxpdCgnXFxuJykuZm9yRWFjaChsaW5lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmUuc3RhcnRzV2l0aChhdHRyLm5hbWUpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihuZXdUeXBlID09IFwiaW5wdXRcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChuZXdOYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZXR0aW5nczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzW1widHlwZVwiXSA9IG5ld1R5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NbXCJvcHRpb25zXCJdID0gbmV3T3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50LnB1c2goYCR7bmV3TmFtZX06OiAke0pTT04uc3RyaW5naWZ5KHNldHRpbmdzKX1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGxpbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudC5qb2luKCdcXG4nKSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc2V0dGluZ3M6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1tcInR5cGVcIl0gPSBuZXdUeXBlXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzW1wib3B0aW9uc1wiXSA9IG5ld09wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IChgXFxuJHtuZXdOYW1lfTo6ICR7SlNPTi5zdHJpbmdpZnkoc2V0dGluZ3MpfWApXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgcmVzdWx0KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcmVtb3ZlQXR0cmlidXRlKGF0dHI6IEZpbGVDbGFzc0F0dHJpYnV0ZSk6IFByb21pc2U8dm9pZD57XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5nZXRDbGFzc0ZpbGUoKVxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBuZXdDb250ZW50OiBzdHJpbmdbXSA9IFtdXG4gICAgICAgICAgICAgICAgcmVzdWx0LnNwbGl0KCdcXG4nKS5mb3JFYWNoKGxpbmUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZighbGluZS5zdGFydHNXaXRoKGF0dHIubmFtZSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGxpbmUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudC5qb2luKCdcXG4nKSlcbiAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICB9KVxuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlRmlsZUNsYXNzKHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIG5hbWU6IHN0cmluZyk6IFByb21pc2U8RmlsZUNsYXNzPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgZmlsZUNsYXNzID0gbmV3IEZpbGVDbGFzcyhwbHVnaW4sIG5hbWUpO1xuICAgICAgICBmaWxlQ2xhc3MuZ2V0QXR0cmlidXRlcygpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZShmaWxlQ2xhc3MpXG4gICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgICB9KVxuICAgIH0pXG59XG5cbmV4cG9ydCB7Y3JlYXRlRmlsZUNsYXNzLCBGaWxlQ2xhc3N9IiwiaW1wb3J0IHtBcHAsIERyb3Bkb3duQ29tcG9uZW50LCBNb2RhbCwgVGV4dENvbXBvbmVudCwgQnV0dG9uQ29tcG9uZW50LCBFeHRyYUJ1dHRvbkNvbXBvbmVudCwgVGV4dEFyZWFDb21wb25lbnR9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQge0ZpbGVDbGFzc0F0dHJpYnV0ZSwgdHlwZXN9IGZyb20gXCJzcmMvZmlsZUNsYXNzL2ZpbGVDbGFzc0F0dHJpYnV0ZVwiXG5pbXBvcnQge0ZpbGVDbGFzc30gZnJvbSBcInNyYy9maWxlQ2xhc3MvZmlsZUNsYXNzXCJcbmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gXCJxdWVyeXN0cmluZ1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbGVDbGFzc0F0dHJpYnV0ZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXG4gICAgYXR0cjogRmlsZUNsYXNzQXR0cmlidXRlXG4gICAgZmlsZUNsYXNzOiBGaWxlQ2xhc3NcbiAgICB0eXBlOiBzdHJpbmcgPSBcImlucHV0XCJcbiAgICBvcHRpb25zOiBzdHJpbmdbXSA9IFtdXG4gICAgbmFtZTogc3RyaW5nID0gXCJcIlxuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGZpbGVDbGFzczogRmlsZUNsYXNzLCBhdHRyPzogRmlsZUNsYXNzQXR0cmlidXRlKXtcbiAgICAgICAgc3VwZXIoYXBwKVxuICAgICAgICB0aGlzLmF0dHIgPSBhdHRyXG4gICAgICAgIHRoaXMuZmlsZUNsYXNzID0gZmlsZUNsYXNzXG4gICAgICAgIGlmKHRoaXMuYXR0cil7XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB0aGlzLmF0dHIudHlwZSB8fCBcImlucHV0XCJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IHRoaXMuYXR0ci5vcHRpb25zXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmF0dHIubmFtZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25PcGVuKCl7XG4gICAgICAgIC8vdGl0bGVcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQodGhpcy5hdHRyID8gYE1hbmFnZSAke3RoaXMuYXR0ci5uYW1lfWAgOiBgQ3JlYXRlIGEgbmV3IGF0dHJpYnV0ZSBmb3IgJHt0aGlzLmZpbGVDbGFzcy5uYW1lfWApXG4gICAgICAgIFxuICAgICAgICAvL25hbWUgaW5wdXRcbiAgICAgICAgY29uc3QgbmFtZUlucHV0Q29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KClcbiAgICAgICAgbmFtZUlucHV0Q29udGFpbmVyLnNldFRleHQoXCJuYW1lXCIpXG4gICAgICAgIGNvbnN0IG5hbWVJbnB1dCA9IG5ldyBUZXh0Q29tcG9uZW50KG5hbWVJbnB1dENvbnRhaW5lcilcbiAgICAgICAgdGhpcy5hdHRyID8gbmFtZUlucHV0LnNldFZhbHVlKHRoaXMuYXR0ci5uYW1lKSA6IG5hbWVJbnB1dC5zZXRQbGFjZWhvbGRlcihcIlR5cGUgYSBuYW1lIGZvciB0aGlzIGF0dHJpYnV0ZVwiKVxuXG4gICAgICAgIC8vaGVhZGVyIGZvciBzZWxlY3RcbiAgICAgICAgY29uc3QgdHlwZVNlbGVjdEhlYWRlciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpXG4gICAgICAgIGNvbnN0IGF0dHJMaW5lID0gdHlwZVNlbGVjdEhlYWRlci5jcmVhdGVFbChcImRpdlwiKVxuICAgICAgICBjb25zdCBhdHRyTmFtZSA9IGF0dHJMaW5lLmNyZWF0ZUVsKFwic3Ryb25nXCIpXG4gICAgICAgIGF0dHJOYW1lLnNldFRleHQoYDwke3RoaXMubmFtZX0+YClcbiAgICAgICAgYXR0ckxpbmUuYXBwZW5kKFwiIGZpZWxkcyBpbiBmaWxlcyB3aXRoOlwiKVxuICAgICAgICBTdHJpbmcoYC0tLVxcbmZpbGVDbGFzczogJHt0aGlzLmZpbGVDbGFzcy5uYW1lfVxcbi4uLlxcbi0tLWApLnNwbGl0KCdcXG4nKS5mb3JFYWNoKGxpbmUgPT4ge1xuICAgICAgICAgICAgdHlwZVNlbGVjdEhlYWRlci5jcmVhdGVFbChcImRpdlwiLCBcInlhbWwtZnJvbnRtYXR0ZXItcmVkXCIpLnNldFRleHQobGluZSlcbiAgICAgICAgfSlcblxuICAgICAgICAvLyB0eXBlIHNlbGVjdFxuICAgICAgICBjb25zdCB0eXBlU2VsZWN0Q29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHtjbHM6ICdmcm9udG1hdHRlci12YWx1ZS1zZWxlY3Rvci1jb250YWluZXInfSlcbiAgICAgICAgY29uc3QgdHlwZVNlbGVjdExhYmVsID0gdHlwZVNlbGVjdENvbnRhaW5lci5jcmVhdGVEaXYoe2NsczogJ2Zyb250bWF0dGVyLXZhbHVlLXNlbGVjdG9yLWlubGluZS1sYWJlbCd9KVxuICAgICAgICB0eXBlU2VsZWN0TGFiZWwuc2V0VGV4dChcIndpbGw6IFwiKVxuICAgICAgICBjb25zdCB0eXBlU2VsZWN0RHJvcERvd24gPSB0eXBlU2VsZWN0Q29udGFpbmVyLmNyZWF0ZURpdih7Y2xzOiAnZnJvbnRtYXR0ZXItdmFsdWUtc2VsZWN0b3ItdG9nZ2xlcid9KVxuICAgICAgICBjb25zdCB0eXBlU2VsZWN0ID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KHR5cGVTZWxlY3REcm9wRG93bilcbiAgICAgICAgT2JqZWN0LmtleXModHlwZXMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIHR5cGVTZWxlY3QuYWRkT3B0aW9uKGtleSwgdHlwZXNba2V5XSlcbiAgICAgICAgfSlcbiAgICAgICAgaWYodGhpcy5hdHRyKXtcbiAgICAgICAgICAgIHR5cGVTZWxlY3Quc2V0VmFsdWUodGhpcy50eXBlKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gb3B0aW9ucyBpbnB1dFxuICAgICAgICBjb25zdCBvcHRpb25zSW5wdXRDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoe2NsczogJ2Zyb250bWF0dGVyLXZhbHVlLXNlbGVjdG9yLWNvbnRhaW5lcid9KVxuICAgICAgICBjb25zdCBvcHRpb25zSW5wdXRMYWJlbCA9IG9wdGlvbnNJbnB1dENvbnRhaW5lci5jcmVhdGVEaXYoe2NsczogJ2Zyb250bWF0dGVyLXZhbHVlLXNlbGVjdG9yLWlubGluZS1sYWJlbC10b3AnfSlcbiAgICAgICAgb3B0aW9uc0lucHV0TGFiZWwuc2V0VGV4dChcIlZhbHVlc1wiKVxuICAgICAgICBjb25zdCBvcHRpb25zSW5wdXQgPSBuZXcgVGV4dEFyZWFDb21wb25lbnQob3B0aW9uc0lucHV0Q29udGFpbmVyKVxuICAgICAgICBvcHRpb25zSW5wdXQuaW5wdXRFbC5yb3dzID0gM1xuICAgICAgICBvcHRpb25zSW5wdXQuaW5wdXRFbC5jb2xzID0gMjZcbiAgICAgICAgdGhpcy5hdHRyID8gb3B0aW9uc0lucHV0LnNldFZhbHVlKHRoaXMudHlwZSA9PSBcImlucHV0XCIgPyBcIlwiIDogdGhpcy5vcHRpb25zLmpvaW4oXCIsIFwiKSkgOiBvcHRpb25zSW5wdXQuc2V0UGxhY2Vob2xkZXIoXCJpbnNlcnQgdmFsdWVzLCBjb21tYSBzZXBhcmF0ZWRcIilcbiAgICAgICAgIXRoaXMuYXR0ciB8fCB0aGlzLnR5cGUgPT0gXCJpbnB1dFwiID8gb3B0aW9uc0lucHV0Q29udGFpbmVyLmhpZGUoKSA6IG9wdGlvbnNJbnB1dENvbnRhaW5lci5zaG93KClcblxuICAgICAgICAvLyBldmVudCBoYW5kbGVyc1xuICAgICAgICB0eXBlU2VsZWN0Lm9uQ2hhbmdlKHR5cGUgPT4ge1xuICAgICAgICAgICAgdHlwZSA9PSBcImlucHV0XCIgPyBvcHRpb25zSW5wdXRDb250YWluZXIuaGlkZSgpIDogb3B0aW9uc0lucHV0Q29udGFpbmVyLnNob3coKVxuICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZVxuICAgICAgICB9KVxuICAgICAgICBvcHRpb25zSW5wdXQub25DaGFuZ2UodmFsdWUgPT4gdGhpcy5vcHRpb25zID0gdmFsdWUuc3BsaXQoXCIsXCIpLm1hcChpdGVtID0+IGl0ZW0udHJpbSgpKSlcbiAgICAgICAgbmFtZUlucHV0Lm9uQ2hhbmdlKHZhbHVlID0+IHt0aGlzLm5hbWUgPSB2YWx1ZTsgYXR0ck5hbWUuc2V0VGV4dChgPCR7dmFsdWV9PmApfSlcblxuICAgICAgICAvLyBmb290ZXIgYnV0dG9uc1xuICAgICAgICBjb25zdCBmb290ZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoe2NsczogXCJmcm9udG1hdHRlci12YWx1ZS1ncmlkLWZvb3RlclwifSlcbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQoZm9vdGVyKVxuICAgICAgICBzYXZlQnV0dG9uLnNldEljb24oXCJjaGVja21hcmtcIilcbiAgICAgICAgc2F2ZUJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmlsZUNsYXNzLnVwZGF0ZUF0dHJpYnV0ZSh0aGlzLnR5cGUsIHRoaXMub3B0aW9ucywgdGhpcy5uYW1lLCB0aGlzLmF0dHIpXG4gICAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgfSlcbiAgICAgICAgaWYodGhpcy5hdHRyKXtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZUJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQoZm9vdGVyKVxuICAgICAgICAgICAgcmVtb3ZlQnV0dG9uLnNldEljb24oXCJ0cmFzaFwiKVxuICAgICAgICAgICAgcmVtb3ZlQnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcClcbiAgICAgICAgICAgICAgICBjb25maXJtTW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiUGxlYXNlIGNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICBjb25maXJtTW9kYWwuY29udGVudEVsLmNyZWF0ZURpdigpLnNldFRleHQoYERvIHlvdSByZWFsbHkgd2FudCB0byByZW1vdmUgJHt0aGlzLmF0dHIubmFtZX0gYXR0cmlidXRlIGZyb20gJHt0aGlzLmZpbGVDbGFzcy5uYW1lfT9gKVxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1Gb290ZXIgPSBjb25maXJtTW9kYWwuY29udGVudEVsLmNyZWF0ZURpdih7Y2xzOiBcImZyb250bWF0dGVyLXZhbHVlLWdyaWQtZm9vdGVyXCJ9KVxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbmZpcm1Gb290ZXIpXG4gICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbi5zZXRJY29uKFwiY2hlY2ttYXJrXCIpXG4gICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxlQ2xhc3MucmVtb3ZlQXR0cmlidXRlKHRoaXMuYXR0cilcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybU1vZGFsLmNsb3NlKClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBjb25zdCBkaXNtaXNzQnV0dG9uID0gbmV3IEV4dHJhQnV0dG9uQ29tcG9uZW50KGNvbmZpcm1Gb290ZXIpXG4gICAgICAgICAgICAgICAgZGlzbWlzc0J1dHRvbi5zZXRJY29uKFwiY3Jvc3NcIilcbiAgICAgICAgICAgICAgICBkaXNtaXNzQnV0dG9uLm9uQ2xpY2soKCkgPT4gdGhpcy5jbG9zZSgpKVxuICAgICAgICAgICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gbmV3IEV4dHJhQnV0dG9uQ29tcG9uZW50KGZvb3RlcilcbiAgICAgICAgY2FuY2VsQnV0dG9uLnNldEljb24oXCJjcm9zc1wiKVxuICAgICAgICBjYW5jZWxCdXR0b24ub25DbGljaygoKSA9PiB0aGlzLmNsb3NlKCkpXG4gICAgfVxufSIsImltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwibWFpblwiXG5pbXBvcnQge0Ryb3Bkb3duQ29tcG9uZW50LCBNb2RhbCwgQXBwLCBURmlsZX0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCB7Y3JlYXRlRmlsZUNsYXNzfSBmcm9tIFwic3JjL2ZpbGVDbGFzcy9maWxlQ2xhc3NcIlxuaW1wb3J0IEZpbGVDbGFzc0F0dHJpYnV0ZU1vZGFsIGZyb20gXCJzcmMvZmlsZUNsYXNzL0ZpbGVDbGFzc0F0dHJpYnV0ZU1vZGFsXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwgZXh0ZW5kcyBNb2RhbHtcblxuICAgIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3NcbiAgICBmaWxlOiBURmlsZVxuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcywgZmlsZTogVEZpbGUpe1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKVxuICAgICAgICB0aGlzLmZpbGUgPSBmaWxlXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXG4gICAgfVxuXG4gICAgb25PcGVuKCl7XG4gICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KGBTZWxlY3QgdGhlIGZpZWxkIHRvIHVwZGF0ZWApXG4gICAgICAgIGNyZWF0ZUZpbGVDbGFzcyh0aGlzLnBsdWdpbiwgdGhpcy5maWxlLmJhc2VuYW1lKS50aGVuKGZpbGVDbGFzcyA9PiB7XG4gICAgICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChgU2VsZWN0IHRoZSBmaWVsZCB0byB1cGRhdGUgaW4gJHtmaWxlQ2xhc3MubmFtZX1gKVxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0Q29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KClcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChzZWxlY3RDb250YWluZXIpXG4gICAgICAgICAgICBzZWxlY3QuYWRkT3B0aW9uKFwic2VsZWN0IGFuIGF0dHJpYnV0ZVwiLCBcIi0tc2VsZWN0IGFuIGF0dHJpYnV0ZS0tXCIpXG4gICAgICAgICAgICBmaWxlQ2xhc3MuYXR0cmlidXRlcy5mb3JFYWNoKGF0dHIgPT4ge1xuICAgICAgICAgICAgICAgIHNlbGVjdC5hZGRPcHRpb24oYXR0ci5uYW1lLCBhdHRyLm5hbWUpXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBzZWxlY3QuYWRkT3B0aW9uKFwiKytuZXdBdHRyKytcIiwgXCIrK0FkZCBhIG5ldyBhdHRyaWJ1dGUrK1wiKVxuICAgICAgICAgICAgc2VsZWN0Lm9uQ2hhbmdlKChhdHRyTmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKGF0dHJOYW1lID09IFwiKytuZXdBdHRyXCIpe1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBGaWxlQ2xhc3NBdHRyaWJ1dGVNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIGZpbGVDbGFzcylcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwub3BlbigpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IEZpbGVDbGFzc0F0dHJpYnV0ZU1vZGFsKHRoaXMucGx1Z2luLmFwcCwgZmlsZUNsYXNzLCBmaWxlQ2xhc3MuYXR0cmlidXRlcy5maWx0ZXIoYXR0ciA9PiBhdHRyLm5hbWUgPT0gYXR0ck5hbWUpWzBdKVxuICAgICAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG59IiwiaW1wb3J0IFN1cGVyY2hhcmdlZExpbmtzIGZyb20gXCJtYWluXCJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIE1lbnUgfSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IHZhbHVlTXVsdGlTZWxlY3RNb2RhbCBmcm9tIFwic3JjL29wdGlvbk1vZGFscy92YWx1ZU11bHRpU2VsZWN0TW9kYWxcIlxuaW1wb3J0IHZhbHVlVGV4dElucHV0TW9kYWwgZnJvbSBcInNyYy9vcHRpb25Nb2RhbHMvdmFsdWVUZXh0SW5wdXRNb2RhbFwiXG5pbXBvcnQgdmFsdWVUb2dnbGVNb2RhbCBmcm9tIFwic3JjL29wdGlvbk1vZGFscy92YWx1ZVRvZ2dsZU1vZGFsXCJcbmltcG9ydCB2YWx1ZVNlbGVjdE1vZGFsIGZyb20gXCJzcmMvb3B0aW9uTW9kYWxzL3ZhbHVlU2VsZWN0TW9kYWxcIlxuaW1wb3J0IEZpZWxkIGZyb20gXCJzcmMvRmllbGRcIlxuaW1wb3J0IGNob29zZVNlY3Rpb25Nb2RhbCBmcm9tIFwiLi4vb3B0aW9uTW9kYWxzL2Nob29zZVNlY3Rpb25Nb2RhbFwiXG5pbXBvcnQgU2VsZWN0TW9kYWwgZnJvbSBcInNyYy9vcHRpb25Nb2RhbHMvU2VsZWN0TW9kYWxcIlxuaW1wb3J0IHtjcmVhdGVGaWxlQ2xhc3MsIEZpbGVDbGFzc30gZnJvbSBcInNyYy9maWxlQ2xhc3MvZmlsZUNsYXNzXCJcbmltcG9ydCB7IHJlcGxhY2VWYWx1ZXMgfSBmcm9tIFwiLi9yZXBsYWNlVmFsdWVzXCJcbmltcG9ydCBGaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbCBmcm9tIFwic3JjL2ZpbGVDbGFzcy9GaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbFwiXG5cbmZ1bmN0aW9uIGlzTWVudShjYXRlZ29yeTogTWVudSB8IFNlbGVjdE1vZGFsKTogY2F0ZWdvcnkgaXMgTWVudSB7XG4gICAgcmV0dXJuIChjYXRlZ29yeSBhcyBNZW51KS5hZGRJdGVtICE9PSB1bmRlZmluZWRcbn1cblxuZnVuY3Rpb24gaXNTZWxlY3QoY2F0ZWdvcnk6IE1lbnUgfCBTZWxlY3RNb2RhbCk6IGNhdGVnb3J5IGlzIFNlbGVjdE1vZGFsIHtcbiAgICByZXR1cm4gKGNhdGVnb3J5IGFzIFNlbGVjdE1vZGFsKS5tb2RhbHMgIT09IHVuZGVmaW5lZFxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPcHRpb25zTGlzdHtcbiAgICBhcHA6IEFwcFxuICAgIGZpbGU6IFRGaWxlXG4gICAgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rc1xuICAgIHBhdGg6IHN0cmluZ1xuICAgIGNhdGVnb3J5OiBNZW51IHwgU2VsZWN0TW9kYWxcblx0ZmlsZUNsYXNzOiBGaWxlQ2xhc3NcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIGZpbGU6IFRGaWxlLCBjYXRlZ29yeTogTWVudSB8IFNlbGVjdE1vZGFsKXtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZVxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxuICAgICAgICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnlcbiAgICB9XG5cblx0Y3JlYXRlRXh0cmFPcHRpb25MaXN0KCl7XG5cdFx0Y29uc3QgY2FjaGUgPSB0aGlzLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRDYWNoZSh0aGlzLmZpbGUucGF0aClcblx0XHRpZihjYWNoZS5mcm9udG1hdHRlcil7XG5cdFx0XHRjb25zdMKge3Bvc2l0aW9uLCAuLi5hdHRyaWJ1dGVzfSA9IGNhY2hlLmZyb250bWF0dGVyXG5cdFx0XHRPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGtleSA9PiB7XG5cdFx0XHRcdGlmKHRoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbGx5SWdub3JlZEZpZWxkcy5pbmNsdWRlcyhrZXkpKXtcblx0XHRcdFx0XHRkZWxldGUgYXR0cmlidXRlc1trZXldXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHRpZihpc01lbnUodGhpcy5jYXRlZ29yeSkpe3RoaXMuY2F0ZWdvcnkuYWRkU2VwYXJhdG9yKCl9XG5cdFx0XHRsZXQgZmlsZUNsYXNzRm9yRmllbGRzID0gZmFsc2Vcblx0XHRcdGxldCBmaWxlQ2xhc3NGaWVsZHM6IHN0cmluZ1tdID0gW11cblx0XHRcdGlmKE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmluY2x1ZGVzKCdmaWxlQ2xhc3MnKSl7XG5cdFx0XHRcdGNvbnN0IGZpbGVDbGFzcyA9IGF0dHJpYnV0ZXNbJ2ZpbGVDbGFzcyddXG5cdFx0XHRcdGNyZWF0ZUZpbGVDbGFzcyh0aGlzLnBsdWdpbiwgZmlsZUNsYXNzKS50aGVuKGZpbGVDbGFzcyA9PiB7XG5cdFx0XHRcdFx0dGhpcy5maWxlQ2xhc3MgPSBmaWxlQ2xhc3Ncblx0XHRcdFx0XHRmaWxlQ2xhc3NGaWVsZHMgPSBmaWxlQ2xhc3MuYXR0cmlidXRlcy5tYXAoYXR0ciA9PiBhdHRyLm5hbWUpXG5cdFx0XHRcdFx0ZmlsZUNsYXNzRm9yRmllbGRzID0gdHJ1ZVxuXHRcdFx0XHRcdE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goa2V5ID0+IHtcblx0XHRcdFx0XHRcdGlmKCFmaWxlQ2xhc3NGaWVsZHMuaW5jbHVkZXMoa2V5KSAmJiBrZXkgIT0gJ2ZpbGVDbGFzcycpe1xuXHRcdFx0XHRcdFx0XHRkZWxldGUgYXR0cmlidXRlc1trZXldXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRjb25zdCBmaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbCA9IG5ldyBGaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbCh0aGlzLnBsdWdpbiwgdGhpcy5maWxlQ2xhc3MuZ2V0Q2xhc3NGaWxlKCkpXG5cdFx0XHRcdFx0aWYoaXNNZW51KHRoaXMuY2F0ZWdvcnkpKXtcblx0XHRcdFx0XHRcdHRoaXMuY2F0ZWdvcnkuYWRkU2VwYXJhdG9yKClcblx0XHRcdFx0XHRcdHRoaXMuY2F0ZWdvcnkuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpdGVtLnNldEljb24oXCJnZWFyXCIpXG5cdFx0XHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoYE1hbmFnZSA8JHt0aGlzLmZpbGVDbGFzcy5uYW1lfT4gZmllbGRzYClcblx0XHRcdFx0XHRcdFx0aXRlbS5vbkNsaWNrKChldnQpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRmaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbC5vcGVuKClcblx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0XHR0aGlzLmNhdGVnb3J5LmFkZE9wdGlvbihcIm1hbmFnZV9maWxlQ2xhc3NfYXR0cmlidXRlc1wiLCBcIk1hbmFnZSBmaWxlQ2xhc3MgYXR0cmlidXRlc1wiKVxuXHRcdFx0XHRcdFx0dGhpcy5jYXRlZ29yeS5tb2RhbHNbXCJhZGRfZmllbGRfYXRfc2VjdGlvblwiXSA9ICgpID0+IGZpbGVDbGFzc0F0dHJpYnV0ZVNlbGVjdE1vZGFsLm9wZW4oKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHR0aGlzLmNyZWF0ZUV4dHJhT3B0aW9uc0xpc3RGb3JGcm9udG1hdHRlcihhdHRyaWJ1dGVzLCkudGhlbigoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNyZWF0ZUV4dHJhT3B0aW9uc0xpc3RGb3JJbmxpbmVGaWVsZHModGhpcy5maWxlLCBmaWxlQ2xhc3NGb3JGaWVsZHMsIGZpbGVDbGFzc0ZpZWxkcykudGhlbigoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmKGlzTWVudSh0aGlzLmNhdGVnb3J5KSl7dGhpcy5jYXRlZ29yeS5hZGRTZXBhcmF0b3IoKX1cblx0XHRcdFx0XHRcdFx0dGhpcy5hZGRTZWN0aW9uU2VsZWN0TW9kYWxPcHRpb24odGhpcy5wbHVnaW4pXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdH0pLmNhdGNoKChlcnJvcikgPT4ge1xuXHRcdFx0XHRcdHRoaXMuY3JlYXRlRXh0cmFPcHRpb25zTGlzdEZvckZyb250bWF0dGVyKGF0dHJpYnV0ZXMpLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5jcmVhdGVFeHRyYU9wdGlvbnNMaXN0Rm9ySW5saW5lRmllbGRzKHRoaXMuZmlsZSkudGhlbigoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmKGlzTWVudSh0aGlzLmNhdGVnb3J5KSl7dGhpcy5jYXRlZ29yeS5hZGRTZXBhcmF0b3IoKX1cblx0XHRcdFx0XHRcdFx0dGhpcy5hZGRTZWN0aW9uU2VsZWN0TW9kYWxPcHRpb24odGhpcy5wbHVnaW4pXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdH0pXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmNyZWF0ZUV4dHJhT3B0aW9uc0xpc3RGb3JGcm9udG1hdHRlcihhdHRyaWJ1dGVzKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLmNyZWF0ZUV4dHJhT3B0aW9uc0xpc3RGb3JJbmxpbmVGaWVsZHModGhpcy5maWxlKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRcdGlmKGlzTWVudSh0aGlzLmNhdGVnb3J5KSl7dGhpcy5jYXRlZ29yeS5hZGRTZXBhcmF0b3IoKX1cblx0XHRcdFx0XHRcdHRoaXMuYWRkU2VjdGlvblNlbGVjdE1vZGFsT3B0aW9uKHRoaXMucGx1Z2luKVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuY3JlYXRlRXh0cmFPcHRpb25zTGlzdEZvcklubGluZUZpZWxkcyh0aGlzLmZpbGUpLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRpZihpc01lbnUodGhpcy5jYXRlZ29yeSkpe3RoaXMuY2F0ZWdvcnkuYWRkU2VwYXJhdG9yKCl9XG5cdFx0XHRcdHRoaXMuYWRkU2VjdGlvblNlbGVjdE1vZGFsT3B0aW9uKHRoaXMucGx1Z2luKVxuXHRcdFx0fSlcblx0XHR9XG5cdFx0XG5cdH1cblxuXHRhc3luYyBjcmVhdGVFeHRyYU9wdGlvbnNMaXN0Rm9ySW5saW5lRmllbGRzKGZpbGU6VEZpbGUsIGZpbGVDbGFzc0ZvckZpZWxkczogYm9vbGVhbiA9IGZhbHNlLCBmaWxlQ2xhc3NGaWVsZHM6IHN0cmluZ1tdID0gW10pOlByb21pc2U8dm9pZD57XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGxldCBhdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge31cblx0XHRcdGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cCgvW19cXCp+YF0qKFswLTlcXHdcXHB7TGV0dGVyfVxccHtFbW9qaV9QcmVzZW50YXRpb259XVstMC05XFx3XFxwe0xldHRlcn1cXHB7RW1vamlfUHJlc2VudGF0aW9ufVxcc10qKVtfXFwqfmBdKlxccyo6OiguKyk/L3UpXG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKS50aGVuKChyZXN1bHQ6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRyZXN1bHQuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+IHtcblx0XHRcdFx0XHRjb25zdCByZWdleFJlc3VsdCA9IGxpbmUubWF0Y2gocmVnZXgpXG5cdFx0XHRcdFx0aWYocmVnZXhSZXN1bHQgXG5cdFx0XHRcdFx0XHQmJiByZWdleFJlc3VsdC5sZW5ndGggPiAwIFxuXHRcdFx0XHRcdFx0JiYgIXRoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbGx5SWdub3JlZEZpZWxkcy5pbmNsdWRlcyhyZWdleFJlc3VsdFsxXS50cmltKCkpKXtcblx0XHRcdFx0XHRcdGlmKGZpbGVDbGFzc0ZvckZpZWxkcyl7XG5cdFx0XHRcdFx0XHRcdGlmKGZpbGVDbGFzc0ZpZWxkcy5pbmNsdWRlcyhyZWdleFJlc3VsdFsxXS50cmltKCkpKXtcblx0XHRcdFx0XHRcdFx0XHRhdHRyaWJ1dGVzW3JlZ2V4UmVzdWx0WzFdLnRyaW0oKV0gPSByZWdleFJlc3VsdC5sZW5ndGggPiAxICYmIHJlZ2V4UmVzdWx0WzJdID8gcmVnZXhSZXN1bHRbMl0udHJpbSgpIDogXCJcIlxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRcdFx0YXR0cmlidXRlc1tyZWdleFJlc3VsdFsxXS50cmltKCldID0gcmVnZXhSZXN1bHQubGVuZ3RoID4gMSAmJiByZWdleFJlc3VsdFsyXSA/IHJlZ2V4UmVzdWx0WzJdLnRyaW0oKSA6IFwiXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHRcdGlmKE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmxlbmd0aCA+IDApe1xuXHRcdFx0XHRcdGlmKGlzTWVudSh0aGlzLmNhdGVnb3J5KSl7dGhpcy5jYXRlZ29yeS5hZGRTZXBhcmF0b3IoKX1cblx0XHRcdFx0XHR0aGlzLmJ1aWxkRXh0cmFPcHRpb25zTGlzdChhdHRyaWJ1dGVzKVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJlc29sdmUoKVxuXHRcdFx0fSlcblx0XHR9KVxuXHR9XG5cblx0YXN5bmMgY3JlYXRlRXh0cmFPcHRpb25zTGlzdEZvckZyb250bWF0dGVyKGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pe1xuXHRcdHRoaXMuYnVpbGRFeHRyYU9wdGlvbnNMaXN0KGF0dHJpYnV0ZXMsKVxuXHR9XG5cblx0YnVpbGRFeHRyYU9wdGlvbnNMaXN0KGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pIHtcblx0XHRPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKChrZXk6IHN0cmluZykgPT4ge1xuXHRcdFx0Y29uc3QgdmFsdWUgPSBhdHRyaWJ1dGVzW2tleV1cblx0XHRcdGNvbnN0IHByb3BlcnR5U2V0dGluZ3MgPSB0aGlzLmdldFByb3BlcnR5U2V0dGluZ3Moa2V5KVxuXHRcdFx0aWYocHJvcGVydHlTZXR0aW5ncyAmJiBwcm9wZXJ0eVNldHRpbmdzLnZhbHVlcyl7XG5cdFx0XHRcdGlmKHByb3BlcnR5U2V0dGluZ3MuaXNDeWNsZSl7XG5cdFx0XHRcdFx0dGhpcy5hZGRDeWNsZU1lbnVPcHRpb24oa2V5LCB2YWx1ZSwgcHJvcGVydHlTZXR0aW5ncylcblx0XHRcdFx0fSBlbHNlIGlmKHByb3BlcnR5U2V0dGluZ3MuaXNNdWx0aSl7XG5cdFx0XHRcdFx0dGhpcy5hZGRNdWx0aU1lbnVPcHRpb24oa2V5LCB2YWx1ZSwgcHJvcGVydHlTZXR0aW5ncylcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLmFkZFNlbGVjdE1lbnVPcHRpb24oa2V5LCB2YWx1ZSwgcHJvcGVydHlTZXR0aW5ncylcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmKGlzQm9vbGVhbih2YWx1ZSkgfHwgL3RydWUvaS50ZXN0KHZhbHVlKSB8fCAvZmFsc2UvaS50ZXN0KHZhbHVlKSl7XG5cdFx0XHRcdGxldCB0b0Jvb2xlYW5WYWx1ZTogYm9vbGVhblxuXHRcdFx0XHRpZihpc0Jvb2xlYW4odmFsdWUpKXtcblx0XHRcdFx0XHR0b0Jvb2xlYW5WYWx1ZSA9IHZhbHVlXG5cdFx0XHRcdH0gZWxzZSBpZigvdHJ1ZS9pLnRlc3QodmFsdWUpKXtcblx0XHRcdFx0XHR0b0Jvb2xlYW5WYWx1ZSA9IHRydWVcblx0XHRcdFx0fSBlbHNlIGlmKC9mYWxzZS9pLnRlc3QodmFsdWUpKXtcblx0XHRcdFx0XHR0b0Jvb2xlYW5WYWx1ZSA9IGZhbHNlXG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5hZGRUb2dnbGVNZW51T3B0aW9uKGtleSwgdG9Cb29sZWFuVmFsdWUpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmFkZFRleHRJbnB1dE1lbnVPcHRpb24oa2V5LCB2YWx1ZSA/IHZhbHVlLnRvU3RyaW5nKCkgOiBcIlwiKVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0YWRkU2VjdGlvblNlbGVjdE1vZGFsT3B0aW9uKHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MpOiB2b2lke1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IGNob29zZVNlY3Rpb25Nb2RhbCh0aGlzLnBsdWdpbiwgdGhpcy5maWxlKVxuICAgICAgICBpZihpc01lbnUodGhpcy5jYXRlZ29yeSkpe1xuICAgICAgICAgICAgdGhpcy5jYXRlZ29yeS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRJY29uKFwicGVuY2lsXCIpXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIkFkZCBmaWVsZCBhdCBzZWN0aW9uLi4uXCIpXG4gICAgICAgICAgICAgICAgaXRlbS5vbkNsaWNrKChldnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwub3BlbigpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZihpc1NlbGVjdCh0aGlzLmNhdGVnb3J5KSl7XG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5LmFkZE9wdGlvbihcImFkZF9maWVsZF9hdF9zZWN0aW9uXCIsIFwiQWRkIGZpZWxkIGF0IHNlY3Rpb24uLi5cIilcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkubW9kYWxzW1wiYWRkX2ZpZWxkX2F0X3NlY3Rpb25cIl0gPSAoKSA9PiBtb2RhbC5vcGVuKClcbiAgICAgICAgfVxuXHR9XG5cblx0YWRkQ3ljbGVNZW51T3B0aW9uKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgcHJvcGVydHlTZXR0aW5nczogRmllbGQpOiB2b2lke1xuXHRcdGNvbnN0IHZhbHVlcyA9IHByb3BlcnR5U2V0dGluZ3MudmFsdWVzXG5cdFx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlcylcblx0XHRjb25zdCBrZXlGb3JWYWx1ZSA9IGtleXMuZmluZChrZXkgPT4gdmFsdWVzW2tleV0gPT09IHZhbHVlKVxuXHRcdGxldCBuZXh0VmFsdWU6IHN0cmluZ1xuXHRcdGlmKGtleUZvclZhbHVlKXtcblx0XHRcdGNvbnN0IG5leHRLZXkgPSBrZXlzWyhrZXlzLmluZGV4T2Yoa2V5Rm9yVmFsdWUpKzEpICUga2V5cy5sZW5ndGhdXG5cdFx0XHRuZXh0VmFsdWUgPSB2YWx1ZXNbbmV4dEtleV1cblx0XHR9IGVsc2Uge1xuXHRcdFx0bmV4dFZhbHVlID0gdmFsdWVzW09iamVjdC5rZXlzKHZhbHVlcylbMF1dXG5cdFx0fVxuICAgICAgICBpZihpc01lbnUodGhpcy5jYXRlZ29yeSkpe1xuICAgICAgICAgICAgdGhpcy5jYXRlZ29yeS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShgJHtuYW1lfSA6ICR7dmFsdWV9IOKWtyAke25leHRWYWx1ZX1gKVxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0SWNvbignc3dpdGNoJylcbiAgICAgICAgICAgICAgICBpdGVtLm9uQ2xpY2soKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXBsYWNlVmFsdWVzKHRoaXMucGx1Z2luLmFwcCwgdGhpcy5maWxlLCBuYW1lLCBuZXh0VmFsdWUpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZihpc1NlbGVjdCh0aGlzLmNhdGVnb3J5KSl7XG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5LmFkZE9wdGlvbihgJHtuYW1lfV8ke3ZhbHVlfV8ke25leHRWYWx1ZX1gLCBgJHtuYW1lfSA6ICR7dmFsdWV9IOKWtyAke25leHRWYWx1ZX1gKVxuICAgICAgICAgICAgdGhpcy5jYXRlZ29yeS5tb2RhbHNbYCR7bmFtZX1fJHt2YWx1ZX1fJHtuZXh0VmFsdWV9YF0gPSAoKSA9PiBcbiAgICAgICAgICAgIHJlcGxhY2VWYWx1ZXModGhpcy5wbHVnaW4uYXBwLCB0aGlzLmZpbGUsIG5hbWUsIG5leHRWYWx1ZSlcbiAgICAgICAgfVxuXHR9XG5cblx0YWRkTXVsdGlNZW51T3B0aW9uKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgcHJvcGVydHlTZXR0aW5nczogRmllbGQpOiB2b2lke1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IHZhbHVlTXVsdGlTZWxlY3RNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIHRoaXMuZmlsZSwgbmFtZSwgdmFsdWUsIHByb3BlcnR5U2V0dGluZ3MpXG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiU2VsZWN0IHZhbHVlc1wiKVxuICAgICAgICBpZihpc01lbnUodGhpcy5jYXRlZ29yeSkpe1xuICAgICAgICAgICAgdGhpcy5jYXRlZ29yeS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShgVXBkYXRlIDwke25hbWV9PmApXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRJY29uKCdidWxsZXQtbGlzdCcpXG4gICAgICAgICAgICAgICAgaXRlbS5vbkNsaWNrKChldnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwub3BlbigpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgfSBlbHNlIGlmKGlzU2VsZWN0KHRoaXMuY2F0ZWdvcnkpKXtcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkuYWRkT3B0aW9uKGB1cGRhdGVfJHtuYW1lfWAsIGBVcGRhdGUgPCR7bmFtZX0+YClcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkubW9kYWxzW2B1cGRhdGVfJHtuYW1lfWBdID0gKCkgPT4gbW9kYWwub3BlbigpXG4gICAgICAgfVxuXHR9XG5cblx0YWRkU2VsZWN0TWVudU9wdGlvbihuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIHByb3BlcnR5U2V0dGluZ3M6IEZpZWxkKTogdm9pZHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyB2YWx1ZVNlbGVjdE1vZGFsKHRoaXMucGx1Z2luLmFwcCwgdGhpcy5maWxlLCBuYW1lLCB2YWx1ZSwgcHJvcGVydHlTZXR0aW5ncylcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJTZWxlY3QgdmFsdWVcIilcbiAgICAgICAgaWYoaXNNZW51KHRoaXMuY2F0ZWdvcnkpKXtcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoYFVwZGF0ZSAke25hbWV9YClcbiAgICAgICAgICAgICAgICBpdGVtLnNldEljb24oJ3JpZ2h0LXRyaWFuZ2xlJylcbiAgICAgICAgICAgICAgICBpdGVtLm9uQ2xpY2soKGV2dDogTW91c2VFdmVudCkgPT4gbW9kYWwub3BlbigpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmKGlzU2VsZWN0KHRoaXMuY2F0ZWdvcnkpKXtcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkuYWRkT3B0aW9uKGB1cGRhdGVfJHtuYW1lfWAsIGBVcGRhdGUgPCR7bmFtZX0+YClcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkubW9kYWxzW2B1cGRhdGVfJHtuYW1lfWBdID0gKCkgPT4gbW9kYWwub3BlbigpXG4gICAgICAgIH1cblx0fVxuXG5cdGFkZFRvZ2dsZU1lbnVPcHRpb24obmFtZTogc3RyaW5nLCB2YWx1ZTogYm9vbGVhbik6IHZvaWR7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgdmFsdWVUb2dnbGVNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIHRoaXMuZmlsZSwgbmFtZSwgdmFsdWUpXG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KGBDaGFuZ2UgVmFsdWUgZm9yIDwke25hbWV9PmApXG4gICAgICAgIGlmKGlzTWVudSh0aGlzLmNhdGVnb3J5KSl7XG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKGBVcGRhdGUgPCR7bmFtZX0+YClcbiAgICAgICAgICAgICAgICBpdGVtLnNldEljb24oJ2NoZWNrbWFyaycpXG4gICAgICAgICAgICAgICAgaXRlbS5vbkNsaWNrKChldnQ6IE1vdXNlRXZlbnQpID0+IHttb2RhbC5vcGVuKCl9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmKGlzU2VsZWN0KHRoaXMuY2F0ZWdvcnkpKXtcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkuYWRkT3B0aW9uKGB1cGRhdGVfJHtuYW1lfWAsIGBVcGRhdGUgPCR7bmFtZX0+YClcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkubW9kYWxzW2B1cGRhdGVfJHtuYW1lfWBdID0gKCkgPT4gbW9kYWwub3BlbigpXG4gICAgICAgIH1cblx0fVxuXG5cdGFkZFRleHRJbnB1dE1lbnVPcHRpb24obmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogdm9pZHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyB2YWx1ZVRleHRJbnB1dE1vZGFsKHRoaXMucGx1Z2luLmFwcCwgdGhpcy5maWxlLCBuYW1lLCB2YWx1ZSlcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoYENoYW5nZSBWYWx1ZSBmb3IgPCR7bmFtZX0+YClcbiAgICAgICAgaWYoaXNNZW51KHRoaXMuY2F0ZWdvcnkpKXtcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoYFVwZGF0ZSA8JHtuYW1lfT5gKVxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0SWNvbigncGVuY2lsJylcbiAgICAgICAgICAgICAgICBpdGVtLm9uQ2xpY2soKGV2dDogTW91c2VFdmVudCkgPT4gbW9kYWwub3BlbigpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmKGlzU2VsZWN0KHRoaXMuY2F0ZWdvcnkpKXtcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkuYWRkT3B0aW9uKGB1cGRhdGVfJHtuYW1lfWAsIGBVcGRhdGUgPCR7bmFtZX0+YClcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkubW9kYWxzW2B1cGRhdGVfJHtuYW1lfWBdID0gKCkgPT4gbW9kYWwub3BlbigpXG4gICAgICAgIH1cblx0fVxuXG5cdGdldFByb3BlcnR5U2V0dGluZ3MocHJvcGVydHlOYW1lOiBzdHJpbmcpOiBGaWVsZHtcblx0XHRjb25zdCBtYXRjaGluZ1NldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlc2V0RmllbGRzLmZpbHRlcihwID0+IHAubmFtZSA9PSBwcm9wZXJ0eU5hbWUpXG5cdFx0aWYodGhpcy5maWxlQ2xhc3Mpe1xuXHRcdFx0Y29uc3QgZmlsZUNsYXNzQXR0cmlidXRlc1dpdGhOYW1lID0gdGhpcy5maWxlQ2xhc3MuYXR0cmlidXRlcy5maWx0ZXIoYXR0ciA9PiBhdHRyLm5hbWUgPT0gcHJvcGVydHlOYW1lKVxuXHRcdFx0aWYoZmlsZUNsYXNzQXR0cmlidXRlc1dpdGhOYW1lLmxlbmd0aCA+IDApe1xuXHRcdFx0XHRjb25zdCBmaWxlQ2xhc3NBdHRyaWJ1dGUgPSBmaWxlQ2xhc3NBdHRyaWJ1dGVzV2l0aE5hbWVbMF1cblx0XHRcdFx0aWYoZmlsZUNsYXNzQXR0cmlidXRlLm9wdGlvbnMpe1xuXHRcdFx0XHRcdHJldHVybiBmaWxlQ2xhc3NBdHRyaWJ1dGUuZ2V0RmllbGQoKVxuXHRcdFx0XHR9IGVsc2UgaWYobWF0Y2hpbmdTZXR0aW5ncy5sZW5ndGggPiAwKXtcblx0XHRcdFx0XHRyZXR1cm4gbWF0Y2hpbmdTZXR0aW5nc1swXVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmKG1hdGNoaW5nU2V0dGluZ3MubGVuZ3RoID4gMCl7XG5cdFx0XHRcdHJldHVybiBtYXRjaGluZ1NldHRpbmdzWzBdXG5cdFx0fVxuXHR9XG59IiwiaW1wb3J0IHtURmlsZX0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwibWFpblwiXG5pbXBvcnQgT3B0aW9uc0xpc3QgZnJvbSBcInNyYy9vcHRpb25zL09wdGlvbnNMaXN0XCJcbmltcG9ydCBGaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbCBmcm9tIFwic3JjL2ZpbGVDbGFzcy9GaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbFwiXG5cbmNsYXNzIGxpbmtDb250ZXh0TWVudSB7XG4gICAgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rc1xuXHRmaWxlOiBURmlsZVxuXHRvcHRpb25zTGlzdDogT3B0aW9uc0xpc3RcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3Mpe1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxuICAgICAgICB0aGlzLmNyZWF0ZUNvbnRleHRNZW51KClcbiAgICB9XG5cblx0Y3JlYXRlQ29udGV4dE1lbnUoKTogdm9pZHtcblx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbignZmlsZS1tZW51JywgKG1lbnUsIGFic3RyYWN0RmlsZSwgc291cmNlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGlzcGxheUZpZWxkc0luQ29udGV4dE1lbnUgJiYgKFxuXHRcdFx0XHRcdHNvdXJjZSA9PT0gXCJsaW5rLWNvbnRleHQtbWVudVwiIHx8IFxuXHRcdFx0XHRcdHNvdXJjZSA9PT0gXCJjYWxlbmRhci1jb250ZXh0LW1lbnVcIiB8fCBcblx0XHRcdFx0XHRzb3VyY2UgPT09ICdwYW5lLW1vcmUtb3B0aW9ucycgfHxcblx0XHRcdFx0XHRzb3VyY2UgPT09ICdmaWxlLWV4cGxvcmVyLWNvbnRleHQtbWVudScpKXtcblx0XHRcdFx0XHRjb25zdCBmaWxlcyA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKG1kRmlsZSA9PiBtZEZpbGUucGF0aCA9PSBhYnN0cmFjdEZpbGUucGF0aClcblx0XHRcdFx0XHRpZihmaWxlcy5sZW5ndGggPiAwKXtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGUgPSBmaWxlc1swXVxuXHRcdFx0XHRcdFx0dGhpcy5maWxlID0gZmlsZVxuXHRcdFx0XHRcdFx0aWYoZmlsZS5wYXJlbnQucGF0aCArIFwiL1wiID09IHRoaXMucGx1Z2luLnNldHRpbmdzLmNsYXNzRmlsZXNQYXRoKXtcblx0XHRcdFx0XHRcdFx0bWVudS5hZGRTZXBhcmF0b3IoKVxuXHRcdFx0XHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpdGVtLnNldEljb24oXCJnZWFyXCIpXG5cdFx0XHRcdFx0XHRcdFx0aXRlbS5zZXRUaXRsZShgTWFuYWdlIDwke2ZpbGUuYmFzZW5hbWV9PiBmaWVsZHNgKVxuXHRcdFx0XHRcdFx0XHRcdGl0ZW0ub25DbGljaygoZXZ0KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbCA9IG5ldyBGaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbCh0aGlzLnBsdWdpbiwgZmlsZSlcblx0XHRcdFx0XHRcdFx0XHRcdGZpbGVDbGFzc0F0dHJpYnV0ZVNlbGVjdE1vZGFsLm9wZW4oKVxuXHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0aGlzLm9wdGlvbnNMaXN0ID0gbmV3IE9wdGlvbnNMaXN0KHRoaXMucGx1Z2luLCB0aGlzLmZpbGUsIG1lbnUpXG5cdFx0XHRcdFx0XHRcdHRoaXMub3B0aW9uc0xpc3QuY3JlYXRlRXh0cmFPcHRpb25MaXN0KClcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cbiAgICAgICAgICAgIH0pXG5cdFx0KTtcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBsaW5rQ29udGV4dE1lbnUiLCJpbXBvcnQge0Ryb3Bkb3duQ29tcG9uZW50fSBmcm9tIFwib2JzaWRpYW5cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWxlY3RNb2RhbCBleHRlbmRzIERyb3Bkb3duQ29tcG9uZW50IHtcbiAgICBtb2RhbHM6IFJlY29yZDxzdHJpbmcsIGFueT5cblxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCl7XG4gICAgICAgIHN1cGVyKGNvbnRhaW5lckVsKVxuICAgICAgICB0aGlzLm1vZGFscyA9IHt9XG4gICAgfVxufSIsImltcG9ydCB7QXBwLCBNb2RhbCwgVEZpbGV9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3MgZnJvbSBcIm1haW5cIlxuaW1wb3J0IE9wdGlvbnNMaXN0IGZyb20gXCJzcmMvb3B0aW9ucy9PcHRpb25zTGlzdFwiXG5pbXBvcnQgU2VsZWN0TW9kYWwgZnJvbSBcInNyYy9vcHRpb25Nb2RhbHMvU2VsZWN0TW9kYWxcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RlRmllbGRzQ29tbWFuZHNNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwdWJsaWMgYXBwOiBBcHA7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzO1xuICAgIHByaXZhdGUgZmlsZTogVEZpbGVcbiAgICBwcml2YXRlIHNlbGVjdDogU2VsZWN0TW9kYWxcbiAgICBvcHRpb25zTGlzdDogT3B0aW9uc0xpc3RcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzLCBmaWxlOiBURmlsZSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGVcbiAgICB9XG5cbiAgICBvbk9wZW4oKXtcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoYFNlbGVjdCB0aGUgZmllbGQgdG8gbWFuYWdlYClcbiAgICAgICAgY29uc3Qgb3B0aW9uc0xpc3RDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKVxuICAgICAgICB0aGlzLnNlbGVjdCA9IG5ldyBTZWxlY3RNb2RhbChvcHRpb25zTGlzdENvbnRhaW5lcilcbiAgICAgICAgdGhpcy5zZWxlY3QuYWRkT3B0aW9uKFwiLS0tXCIsIFwiQ2hvb3NlIEZpZWxkXCIpXG4gICAgICAgIHRoaXMub3B0aW9uc0xpc3QgPSBuZXcgT3B0aW9uc0xpc3QodGhpcy5wbHVnaW4sIHRoaXMuZmlsZSwgdGhpcy5zZWxlY3QpXG4gICAgICAgIHRoaXMub3B0aW9uc0xpc3QuY3JlYXRlRXh0cmFPcHRpb25MaXN0KClcbiAgICAgICAgdGhpcy5zZWxlY3Qub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdC5tb2RhbHNbdmFsdWVdKClcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnNlbGVjdC5zZWxlY3RFbC5mb2N1cygpXG4gICAgfVxufSIsImludGVyZmFjZSBDU1NMaW5rIHtcbiAgICBpc1RhZzogYm9vbGVhblxuICAgIG5hbWU6IHN0cmluZ1xuICAgIHZhbHVlOiBzdHJpbmdcbiAgICBtYXRjaENhc2VTZW5zaXRpdmU6IGJvb2xlYW5cbiAgICBtYXRjaDogJ2V4YWN0JyB8ICdjb250YWlucycgfCAnc3RhcnRzd2l0aCcgfCAnZW5kc3dpdGgnXG4gICAgbGlua3NUeXBlczogc3RyaW5nW11cbn1cblxuY29uc3QgbGlua1R5cGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XG4gICAgXCJiYWNrTGlua3NcIjogW1wiYS5pbnRlcm5hbC1saW5rXCJdLFxuICAgIFwib3V0Z29pbmdMaW5rc1wiOiBbXCJhLmludGVybmFsLWxpbmtcIl0sXG4gICAgXCJmaWxlRXhwbG9yZXJcIjogW1wiZGl2Lm5hdi1maWxlLXRpdGxlLWNvbnRlbnRcIl0sXG4gICAgXCJzZWFyY2hcIjogW1wiLnRyZWUtaXRlbS1pbm5lclwiXSxcbiAgICBcImJyZWFkY3J1bWJcIjogW1wiZGl2LmludGVybmFsLWxpbmtcIiwgXCJ0ZC5pbnRlcm5hbC1saW5rXCJdLFxuICAgIFwiZWRpdG9yXCI6IFtcInNwYW4uY20taG1kLWludGVybmFsLWxpbmtcIl1cbn1cblxuY29uc3QgbWF0Y2hUeXBlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAnZXhhY3QnOiBcIkV4YWN0IHdvcmRcIixcbiAgICAnY29udGFpbnMnOiBcIkNvbnRhaW5zIHRoaXMgdmFsdWVcIixcbiAgICAnd2hpdGVTcGFjZSc6IFwiVmFsdWUgd2l0aGluIHdoaXRlc3BhY2Ugc2VwYXJhdGVkIHdvcmRzXCIsXG4gICAgJ3N0YXJ0c3dpdGgnOiBcIlN0YXJ0IHdpdGggdGhpcyB2YWx1ZVwiLFxuICAgICdlbmRzd2l0aCc6IFwiRW5kcyB3aXRoIHRoaXMgdmFsdWVcIlxufVxuXG5jb25zdCBtYXRjaFNpZ246IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgJ2V4YWN0JzogXCJcIixcbiAgICAnY29udGFpbnMnOiBcIipcIixcbiAgICAnc3RhcnRzd2l0aCc6IFwiXlwiLFxuICAgICdlbmRzd2l0aCc6IFwiJFwiLFxuICAgICd3aGl0ZVNwYWNlJzogXCJ+XCJcbn1cblxuY2xhc3MgQ1NTTGluayB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaXNUYWcgPSBmYWxzZVxuICAgICAgICB0aGlzLm5hbWUgPSBcIlwiXG4gICAgICAgIHRoaXMudmFsdWUgPSBcIlwiXG4gICAgICAgIHRoaXMubWF0Y2hDYXNlU2Vuc2l0aXZlID0gZmFsc2VcbiAgICAgICAgdGhpcy5tYXRjaCA9IFwiZXhhY3RcIlxuICAgICAgICB0aGlzLmxpbmtzVHlwZXMgPSBPYmplY3Qua2V5cyhsaW5rVHlwZXMpXG4gICAgfVxuXG4gICAgcmVuZGVyKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMubGlua3NUeXBlcy5sZW5ndGggPT0gT2JqZWN0LmtleXMobGlua1R5cGVzKS5sZW5ndGgpXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkTGlua3NUeXBlczogc3RyaW5nW10gPSBbXVxuXG4gICAgICAgIGNvbnN0IGluc3RydWN0aW9uczogc3RyaW5nW10gPSBbXCIvKlN1cGVyY2hhcmdlZCBsaW5rcyBzdHlsaW5nXFxuY29weSBhbmQgcGFzdGUgdGhpcyBpbiB5b3VyIGNzcyBzbmlwcGV0XFxuXCJdXG4gICAgICAgIGlmICh0aGlzLmxpbmtzVHlwZXMubGVuZ3RoID09IE9iamVjdC5rZXlzKGxpbmtUeXBlcykubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBpZiBldmVyeXRoaW5nIGlzIHNlbGVjdGVkIDogYSBzaW5nbGUgY3NzIHNlbGVjdG9yIGlzIG5lZWRlZFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJiZWVuIGhlcmVcIilcbiAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uID0gYFtkYXRhLWxpbmstJHt0aGlzLmlzVGFnID9cbiAgICAgICAgICAgICAgICBcInRhZ3NcIiA6IHRoaXMubmFtZX0ke21hdGNoU2lnblt0aGlzLm1hdGNoXX09XCIke3RoaXMuaXNUYWcgPyBcIiNcIiA6IFwiXCJ9JHt0aGlzLnZhbHVlfVwiJHt0aGlzLm1hdGNoQ2FzZVNlbnNpdGl2ZSA/XG4gICAgICAgICAgICAgICAgICAgIFwiXCIgOiBcIiBpXCJ9XXtcXG4gICAgLy9wdXQgeW91ciBzdHlsZXMgaGVyZVxcbn1cXG5gXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaChpbnN0cnVjdGlvbilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGlmIG5vdDogY3JlYXRlIHNwZWNpZmljIHNlbGVjdG9yc1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJiZWVuIHRoZXJlXCIpXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhsaW5rVHlwZXMpLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGlua3NUeXBlcy5jb250YWlucyhlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExpbmtzVHlwZXMucHVzaCguLi5saW5rVHlwZXNbZWxlbWVudF0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZWxlY3RlZExpbmtzVHlwZXMuZm9yRWFjaChzZWxlY3RvciA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzZWxlY3RvciBcIiwgc2VsZWN0b3IpXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb24gPSBgJHtzZWxlY3Rvcn1bZGF0YS1saW5rLSR7dGhpcy5pc1RhZyA/XG4gICAgICAgICAgICAgICAgICAgIFwidGFnc1wiIDogdGhpcy5uYW1lfSR7bWF0Y2hTaWduW3RoaXMubWF0Y2hdfT1cIiR7dGhpcy5pc1RhZyA/IFwiI1wiIDogXCJcIn0ke3RoaXMudmFsdWV9XCIke3RoaXMubWF0Y2hDYXNlU2Vuc2l0aXZlID9cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIgOiBcIiBpXCJ9XXtcXG5cIiAgICAvL3B1dCB5b3VyIHN0eWxlcyBoZXJlXFxufVxcbmBcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaChpbnN0cnVjdGlvbilcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW5zdHJ1Y3Rpb25zLmpvaW4oJ1xcbicpXG4gICAgfVxufVxuXG5leHBvcnQgeyBsaW5rVHlwZXMsIG1hdGNoVHlwZXMsIENTU0xpbmsgfSIsImltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwibWFpblwiXG5pbXBvcnQgeyBEcm9wZG93bkNvbXBvbmVudCwgVG9nZ2xlQ29tcG9uZW50LCBNb2RhbCwgQXBwLCBUZXh0Q29tcG9uZW50LCBUZXh0QXJlYUNvbXBvbmVudCwgQnV0dG9uQ29tcG9uZW50LCBFeHRyYUJ1dHRvbkNvbXBvbmVudCB9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQgeyBsaW5rVHlwZXMsIG1hdGNoVHlwZXMsIENTU0xpbmsgfSBmcm9tICcuL2Nzc0xpbmsnXG5cbmNsYXNzIENTU0J1aWxkZXJNb2RhbCBleHRlbmRzIE1vZGFsIHtcblxuICAgIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3NcbiAgICBjc3NMaW5rOiBDU1NMaW5rXG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzKSB7XG4gICAgICAgIHN1cGVyKHBsdWdpbi5hcHApXG4gICAgICAgIHRoaXMuY3NzTGluayA9IG5ldyBDU1NMaW5rKClcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KGBEZXNjcmliZSB0aGUgd2F5IHlvdSB3YW50IHRvIHN0eWxlIHlvdXIgbGlua3NgKVxuICAgICAgICAvLyBjYXNlIHNlbnNpdGl2ZVxuICAgICAgICBjb25zdCBjYXNlU2Vuc2l0aXZlVG9nZ2xlckNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpXG4gICAgICAgIGNvbnN0IGNhc2VTZW5zaXRpdmVUb2dnbGVyID0gdGhpcy5jcmVhdGVUb2dnbGVyQ29udGFpbmVyKGNhc2VTZW5zaXRpdmVUb2dnbGVyQ29udGFpbmVyLCBcIkNhc2Ugc2Vuc2l0aXZlXCIpXG4gICAgICAgIGNhc2VTZW5zaXRpdmVUb2dnbGVyLnNldFRvb2x0aXAoXCJzaG91bGQgdGhlIGNzcyBzZWxlY3RvciBiZSBjYXNlIHNlbnNpdGl2ZT9cIilcbiAgICAgICAgY2FzZVNlbnNpdGl2ZVRvZ2dsZXIuc2V0VmFsdWUodGhpcy5jc3NMaW5rLm1hdGNoQ2FzZVNlbnNpdGl2ZSlcbiAgICAgICAgY2FzZVNlbnNpdGl2ZVRvZ2dsZXIub25DaGFuZ2UodmFsdWUgPT4gdGhpcy5jc3NMaW5rLm1hdGNoQ2FzZVNlbnNpdGl2ZSA9IHZhbHVlKVxuXG4gICAgICAgIC8vIG1hdGNoaW5nIHR5cGVcbiAgICAgICAgY29uc3QgbWF0Y2hpbmdUeXBlU2VsZWN0Q29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KClcbiAgICAgICAgY29uc3QgbWF0Y2hpbmdUeXBlU2VsZWN0TGFiZWwgPSBtYXRjaGluZ1R5cGVTZWxlY3RDb250YWluZXIuY3JlYXRlRGl2KClcbiAgICAgICAgbWF0Y2hpbmdUeXBlU2VsZWN0TGFiZWwuc2V0VGV4dChcIk1hdGNoaW5nIHR5cGU6IFwiKVxuICAgICAgICBjb25zdCBzZWxlY3QgPSBuZXcgRHJvcGRvd25Db21wb25lbnQobWF0Y2hpbmdUeXBlU2VsZWN0Q29udGFpbmVyKVxuICAgICAgICBPYmplY3Qua2V5cyhtYXRjaFR5cGVzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBzZWxlY3QuYWRkT3B0aW9uKGtleSwgbWF0Y2hUeXBlc1trZXldKVxuICAgICAgICAgICAgaWYgKGtleSA9PSB0aGlzLmNzc0xpbmsubWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3Quc2V0VmFsdWUoa2V5KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBzZWxlY3Qub25DaGFuZ2UoKHZhbHVlOiBcImV4YWN0XCIgfCBcImNvbnRhaW5zXCIgfCBcInN0YXJ0c3dpdGhcIiB8IFwiZW5kc3dpdGhcIikgPT4ge1xuICAgICAgICAgICAgdGhpcy5jc3NMaW5rLm1hdGNoID0gdmFsdWVcbiAgICAgICAgfSlcblxuICAgICAgICAvLyBpcyB0YWdcbiAgICAgICAgY29uc3QgdGFnVG9nZ2xlckNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpXG4gICAgICAgIGNvbnN0IGlzVGFnVG9nZ2xlciA9IHRoaXMuY3JlYXRlVG9nZ2xlckNvbnRhaW5lcih0YWdUb2dnbGVyQ29udGFpbmVyLCBcIlRhZ1wiKVxuICAgICAgICBpc1RhZ1RvZ2dsZXIuc2V0VG9vbHRpcChcIklzIHRoaXMgYXR0cmlidXRlIGEgdGFnP1wiKVxuICAgICAgICBpc1RhZ1RvZ2dsZXIuc2V0VmFsdWUodGhpcy5jc3NMaW5rLmlzVGFnKVxuICAgICAgICBpc1RhZ1RvZ2dsZXIub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5jc3NMaW5rLmlzVGFnID0gdmFsdWVcbiAgICAgICAgICAgIGlmICghdmFsdWUpIHsgYXR0ck5hbWVDb250YWluZXIuc2hvdygpIH0gZWxzZSB7IGF0dHJOYW1lQ29udGFpbmVyLmhpZGUoKSB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gYXR0cmlidXRlIG5hbWVcbiAgICAgICAgY29uc3QgYXR0ck5hbWVDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKVxuICAgICAgICBjb25zdCBhdHRyTmFtZSA9IHRoaXMuY3JlYXRlSW5wdXRDb250YWluZXIoYXR0ck5hbWVDb250YWluZXIsIFwiTmFtZVwiLCBcIkF0dHJpYnV0ZSBuYW1lXCIpXG4gICAgICAgIGF0dHJOYW1lLm9uQ2hhbmdlKG5hbWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5jc3NMaW5rLm5hbWUgPSBuYW1lXG4gICAgICAgIH0pXG4gICAgICAgIGlmICghdGhpcy5jc3NMaW5rLmlzVGFnKSB7XG4gICAgICAgICAgICBhdHRyTmFtZUNvbnRhaW5lci5zaG93KClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF0dHJOYW1lQ29udGFpbmVyLmhpZGUoKVxuICAgICAgICB9XG4gICAgICAgIC8vIGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAgICBjb25zdCBhdHRyVmFsdWVDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKVxuICAgICAgICBjb25zdCBhdHRyVmFsdWUgPSB0aGlzLmNyZWF0ZUlucHV0Q29udGFpbmVyKGF0dHJWYWx1ZUNvbnRhaW5lciwgXCJWYWx1ZVwiLCBcIkF0dHJpYnV0ZSBvciBUYWcgKHdpdGhvdXQgIykgdmFsdWVcIilcbiAgICAgICAgYXR0clZhbHVlLm9uQ2hhbmdlKHZhbHVlID0+IHsgdGhpcy5jc3NMaW5rLnZhbHVlID0gdmFsdWUgfSlcblxuICAgICAgICAvLyBsaW5rcyBjYXRlZ29yaWVzXG4gICAgICAgIGNvbnN0IGxpbmtUeXBlc1NlbGVjdENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpXG4gICAgICAgIE9iamVjdC5rZXlzKGxpbmtUeXBlcykuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkVmFsdWVUb2dnbGVyKGxpbmtUeXBlc1NlbGVjdENvbnRhaW5lciwgdmFsdWUpXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gZ2VuZXJhdGUgYnV0dG9uXG4gICAgICAgIGNvbnN0IGZvb3RlciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGZvb3RlcilcbiAgICAgICAgc2F2ZUJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiR2VuZXJhdGUgQ1NTIEJvaWxlcnBsYXRlXCIpXG4gICAgICAgIHNhdmVCdXR0b24ub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICBjc3NCb2lsZXJQbGF0ZS5zZXRWYWx1ZSh0aGlzLmNzc0xpbmsucmVuZGVyKCkpXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy9yZXN1bHRcbiAgICAgICAgY29uc3QgY3NzQm9pbGVyUGxhdGVDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKVxuICAgICAgICBjb25zdCBjc3NCb2lsZXJQbGF0ZSA9IG5ldyBUZXh0QXJlYUNvbXBvbmVudChjc3NCb2lsZXJQbGF0ZUNvbnRhaW5lcilcbiAgICAgICAgY3NzQm9pbGVyUGxhdGUuaW5wdXRFbC5zZXRBdHRyKFwicm93c1wiLCBcIjEwXCIpXG4gICAgICAgIGNzc0JvaWxlclBsYXRlLmlucHV0RWwuc2V0QXR0cihcInN0eWxlXCIsIFwid2lkdGg6IDMwZW1cIilcblxuICAgIH1cblxuICAgIGJ1aWxkVmFsdWVUb2dnbGVyKHZhbHVlR3JpZDogSFRNTERpdkVsZW1lbnQsIGxpbmtUeXBlOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgdmFsdWVTZWxlY3RvckNvbnRhaW5lciA9IHZhbHVlR3JpZC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiBcImZyb250bWF0dGVyLXZhbHVlLXNlbGVjdG9yLWNvbnRhaW5lclwiXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IHZhbHVlVG9nZ2xlckNvbnRhaW5lciA9IHZhbHVlU2VsZWN0b3JDb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgIGNsczogXCJmcm9udG1hdHRlci12YWx1ZS1zZWxlY3Rvci10b2dnbGVyXCJcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgdmFsdWVUb2dnbGVyID0gbmV3IFRvZ2dsZUNvbXBvbmVudCh2YWx1ZVRvZ2dsZXJDb250YWluZXIpXG4gICAgICAgIHRoaXMuY3NzTGluay5saW5rc1R5cGVzLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IGxpbmtUeXBlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVUb2dnbGVyLnNldFZhbHVlKHRydWUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHZhbHVlVG9nZ2xlci5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgIXRoaXMuY3NzTGluay5saW5rc1R5cGVzLmluY2x1ZGVzKGxpbmtUeXBlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3NzTGluay5saW5rc1R5cGVzLnB1c2gobGlua1R5cGUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jc3NMaW5rLmxpbmtzVHlwZXMucmVtb3ZlKGxpbmtUeXBlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBjb25zdCB2YWx1ZUxhYmVsID0gdmFsdWVTZWxlY3RvckNvbnRhaW5lci5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiBcImZyb250bWF0dGVyLXZhbHVlLXNlbGVjdG9yLWxhYmVsXCJcbiAgICAgICAgfSlcbiAgICAgICAgdmFsdWVMYWJlbC5zZXRUZXh0KGxpbmtUeXBlKVxuICAgIH1cblxuICAgIGNyZWF0ZVRvZ2dsZXJDb250YWluZXIocGFyZW50Tm9kZTogSFRNTERpdkVsZW1lbnQsIGxhYmVsOiBzdHJpbmcpOiBUb2dnbGVDb21wb25lbnQge1xuICAgICAgICBjb25zdCBwcm9wZXJ0eUNvbnRhaW5lckxhYmVsID0gcGFyZW50Tm9kZS5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiAnZnJvbnRtYXR0ZXItY2hlY2tib3gtdG9nZ2xlcidcbiAgICAgICAgfSlcbiAgICAgICAgcHJvcGVydHlDb250YWluZXJMYWJlbC5zZXRUZXh0KGxhYmVsKVxuICAgICAgICBjb25zdCB0b2dnbGVyID0gbmV3IFRvZ2dsZUNvbXBvbmVudChwYXJlbnROb2RlKVxuICAgICAgICByZXR1cm4gdG9nZ2xlclxuICAgIH1cblxuICAgIGNyZWF0ZUlucHV0Q29udGFpbmVyKHBhcmVudE5vZGU6IEhUTUxEaXZFbGVtZW50LCBsYWJlbDogc3RyaW5nLCBwbGFjZWhvbGRlcjogc3RyaW5nID0gXCJcIik6IFRleHRDb21wb25lbnQge1xuICAgICAgICBjb25zdCBwcm9wZXJ0eU5hbWVDb250YWluZXJMYWJlbCA9IHBhcmVudE5vZGUuY3JlYXRlRGl2KClcbiAgICAgICAgcHJvcGVydHlOYW1lQ29udGFpbmVyTGFiZWwuc2V0VGV4dChsYWJlbClcbiAgICAgICAgY29uc3QgaW5wdXQgPSBuZXcgVGV4dENvbXBvbmVudChwYXJlbnROb2RlKVxuICAgICAgICBpbnB1dC5zZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlcilcbiAgICAgICAgcmV0dXJuIGlucHV0XG4gICAgfVxufVxuXG5leHBvcnQgeyBDU1NCdWlsZGVyTW9kYWwgfSIsImltcG9ydCB7IFBsdWdpbiwgTWFya2Rvd25WaWV3LCBOb3RpY2UsIEFwcCwgZWRpdG9yVmlld0ZpZWxkIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nVGFiIGZyb20gXCJzcmMvc2V0dGluZ3MvU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nVGFiXCJcclxuaW1wb3J0IHtcclxuXHR1cGRhdGVFbExpbmtzLFxyXG5cdHVwZGF0ZVZpc2libGVMaW5rcyxcclxuXHR1cGRhdGVEaXZMaW5rcyxcclxuXHRjbGVhckV4dHJhQXR0cmlidXRlcyxcclxuXHR1cGRhdGVEaXZFeHRyYUF0dHJpYnV0ZXMsXHJcblx0ZmV0Y2hUYXJnZXRBdHRyaWJ1dGVzU3luY1xyXG59IGZyb20gXCJzcmMvbGlua0F0dHJpYnV0ZXMvbGlua0F0dHJpYnV0ZXNcIlxyXG5pbXBvcnQgeyBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcInNyYy9zZXR0aW5ncy9TdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzXCJcclxuaW1wb3J0IEZpZWxkIGZyb20gJ3NyYy9GaWVsZCc7XHJcbmltcG9ydCBsaW5rQ29udGV4dE1lbnUgZnJvbSBcInNyYy9vcHRpb25zL2xpbmtDb250ZXh0TWVudVwiXHJcbmltcG9ydCBOb3RlRmllbGRzQ29tbWFuZHNNb2RhbCBmcm9tIFwic3JjL29wdGlvbnMvTm90ZUZpZWxkc0NvbW1hbmRzTW9kYWxcIlxyXG5pbXBvcnQgRmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwgZnJvbSAnc3JjL2ZpbGVDbGFzcy9GaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbCc7XHJcbmltcG9ydCB7IENTU0J1aWxkZXJNb2RhbCB9IGZyb20gJ3NyYy9jc3NCdWlsZGVyL2Nzc0J1aWxkZXJNb2RhbCdcclxuaW1wb3J0IHsgRGVjb3JhdGlvbiwgRGVjb3JhdGlvblNldCwgRWRpdG9yVmlldywgVmlld1BsdWdpbiwgVmlld1VwZGF0ZSwgV2lkZ2V0VHlwZSB9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCI7XHJcbmltcG9ydCB7IFJhbmdlU2V0QnVpbGRlciB9IGZyb20gXCJAY29kZW1pcnJvci9yYW5nZXNldFwiO1xyXG5pbXBvcnQgeyBzeW50YXhUcmVlIH0gZnJvbSBcIkBjb2RlbWlycm9yL2xhbmd1YWdlXCI7XHJcbmltcG9ydCB7IHRva2VuQ2xhc3NOb2RlUHJvcCB9IGZyb20gXCJAY29kZW1pcnJvci9zdHJlYW0tcGFyc2VyXCI7XHJcbmltcG9ydCB7IFByZWMgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivc3RhdGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN1cGVyY2hhcmdlZExpbmtzIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5nczogU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncztcclxuXHRpbml0aWFsUHJvcGVydGllczogQXJyYXk8RmllbGQ+ID0gW11cclxuXHRzZXR0aW5nVGFiOiBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdUYWJcclxuXHRwcml2YXRlIG9ic2VydmVyczogTXV0YXRpb25PYnNlcnZlcltdO1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zb2xlLmxvZygnU3VwZXJjaGFyZ2VkIGxpbmtzIGxvYWRlZCcpO1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcblxyXG5cdFx0dGhpcy5zZXR0aW5ncy5wcmVzZXRGaWVsZHMuZm9yRWFjaChwcm9wID0+IHtcclxuXHRcdFx0Y29uc3QgcHJvcGVydHkgPSBuZXcgRmllbGQoKVxyXG5cdFx0XHRPYmplY3QuYXNzaWduKHByb3BlcnR5LCBwcm9wKVxyXG5cdFx0XHR0aGlzLmluaXRpYWxQcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpXHJcblx0XHR9KVxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93blBvc3RQcm9jZXNzb3IoKGVsLCBjdHgpID0+IHtcclxuXHRcdFx0dXBkYXRlRWxMaW5rcyh0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncywgZWwsIGN0eClcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgKCkgPT4ge1xyXG5cdFx0XHR1cGRhdGVEaXZMaW5rcyh0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncyk7XHJcblx0XHR9KSk7XHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbignY2hhbmdlZCcsIChfZmlsZSkgPT4ge1xyXG5cdFx0XHR1cGRhdGVWaXNpYmxlTGlua3ModGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MpO1xyXG5cdFx0XHR1cGRhdGVEaXZMaW5rcyh0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncyk7XHJcblx0XHR9KSk7XHJcblxyXG5cclxuXHRcdGNvbnN0IGV4dCA9IFByZWMubG93ZXN0KHRoaXMuYnVpbGRDTVZpZXdQbHVnaW4odGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MpKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFZGl0b3JFeHRlbnNpb24oZXh0KTtcclxuXHJcblx0XHR0aGlzLm9ic2VydmVycyA9IFtdO1xyXG5cclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHRoaXMuaW5pdFZpZXdPYnNlcnZlcnModGhpcykpO1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwibGF5b3V0LWNoYW5nZVwiLCAoKSA9PiB0aGlzLmluaXRWaWV3T2JzZXJ2ZXJzKHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogXCJmaWVsZF9vcHRpb25zXCIsXHJcblx0XHRcdG5hbWU6IFwiZmllbGQgb3B0aW9uc1wiLFxyXG5cdFx0XHRob3RrZXlzOiBbXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0bW9kaWZpZXJzOiBbXCJBbHRcIl0sXHJcblx0XHRcdFx0XHRrZXk6ICdPJyxcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRdLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZlxyXG5cdFx0XHRcdGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgJiYgbGVhZi52aWV3LmZpbGUpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGZpZWxkc09wdGlvbnNNb2RhbCA9IG5ldyBOb3RlRmllbGRzQ29tbWFuZHNNb2RhbCh0aGlzLmFwcCwgdGhpcywgbGVhZi52aWV3LmZpbGUpXHJcblx0XHRcdFx0XHRmaWVsZHNPcHRpb25zTW9kYWwub3BlbigpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0LyogVE9ETyA6IGFkZCBhIGNvbnRleHQgbWVudSBmb3IgZmlsZUNsYXNzIGZpbGVzIHRvIHNob3cgdGhlIHNhbWUgb3B0aW9ucyBhcyBpbiBGaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbCovXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogXCJmaWxlQ2xhc3NBdHRyX29wdGlvbnNcIixcclxuXHRcdFx0bmFtZTogXCJmaWxlQ2xhc3MgYXR0cmlidXRlcyBvcHRpb25zXCIsXHJcblx0XHRcdGhvdGtleXM6IFtcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRtb2RpZmllcnM6IFtcIkFsdFwiXSxcclxuXHRcdFx0XHRcdGtleTogJ1AnLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdF0sXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmXHJcblx0XHRcdFx0aWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldyAmJiBsZWFmLnZpZXcuZmlsZSAmJiBgJHtsZWFmLnZpZXcuZmlsZS5wYXJlbnQucGF0aH0vYCA9PSB0aGlzLnNldHRpbmdzLmNsYXNzRmlsZXNQYXRoKSB7XHJcblx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBGaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbCh0aGlzLCBsZWFmLnZpZXcuZmlsZSlcclxuXHRcdFx0XHRcdG1vZGFsLm9wZW4oKVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKFwiVGhpcyBpcyBub3QgYSBmaWxlQ2xhc3NcIiwgMjUwMClcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogXCJjc3Nfc25pcHBldF9oZWxwZXJcIixcclxuXHRcdFx0bmFtZTogXCJDU1MgU25pcHBldCBoZWxwZXJcIixcclxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdFx0XHRjb25zdCBmb3JtTW9kYWwgPSBuZXcgQ1NTQnVpbGRlck1vZGFsKHRoaXMpXHJcblx0XHRcdFx0Zm9ybU1vZGFsLm9wZW4oKVxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IGxpbmtDb250ZXh0TWVudSh0aGlzKVxyXG5cdH1cclxuXHJcblx0aW5pdFZpZXdPYnNlcnZlcnMocGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcykge1xyXG5cdFx0cGx1Z2luLm9ic2VydmVycy5mb3JFYWNoKChvYnNlcnZlcikgPT4gb2JzZXJ2ZXIuZGlzY29ubmVjdCgpKTtcclxuXHRcdHBsdWdpbi5yZWdpc3RlclZpZXdUeXBlKCdiYWNrbGluaycsIHBsdWdpbik7XHJcblx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnb3V0Z29pbmctbGluaycsIHBsdWdpbik7XHJcblx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnc2VhcmNoJywgcGx1Z2luKTtcclxuXHRcdHBsdWdpbi5yZWdpc3RlclZpZXdUeXBlKCdicmVhZGNydW1icy1tYXRyaXgnLCBwbHVnaW4sICdpbnRlcm5hbC1saW5rJywgJycsIGZhbHNlKTtcclxuXHRcdHBsdWdpbi5yZWdpc3RlclZpZXdUeXBlKCdncmFwaC1hbmFseXNpcycsIHBsdWdpbiwgJ2ludGVybmFsLWxpbmsnLCAnJywgZmFsc2UpO1xyXG5cdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ3N0YXJyZWQnLCBwbHVnaW4sICduYXYtZmlsZScsICduYXYtZmlsZS10aXRsZS1jb250ZW50Jyk7XHJcblx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnZmlsZS1leHBsb3JlcicsIHBsdWdpbiwgJ25hdi1maWxlJywgJ25hdi1maWxlLXRpdGxlLWNvbnRlbnQnKTtcclxuXHR9XHJcblxyXG5cdHJlZ2lzdGVyVmlld1R5cGUodmlld1R5cGVOYW1lOiBzdHJpbmcsIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIHBhcmVudF9jbGFzcyA9ICd0cmVlLWl0ZW0nLCBvd25fY2xhc3MgPSAndHJlZS1pdGVtLWlubmVyJywgc2VhcmNoUGFyZW50ID0gdHJ1ZSkge1xyXG5cdFx0Y29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSh2aWV3VHlwZU5hbWUpO1xyXG5cdFx0aWYgKGxlYXZlcy5sZW5ndGggPiAxKSBjb25zb2xlLmVycm9yKCdtb3JlIHRoYW4gb25lICcgKyB2aWV3VHlwZU5hbWUgKyAnIHBhbmVsJyk7XHJcblx0XHRlbHNlIGlmIChsZWF2ZXMubGVuZ3RoIDwgMSkgcmV0dXJuO1xyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHBsdWdpbi53YXRjaENvbnRhaW5lcihsZWF2ZXNbMF0udmlldy5jb250YWluZXJFbCwgcGx1Z2luLCBwYXJlbnRfY2xhc3MsIG93bl9jbGFzcywgc2VhcmNoUGFyZW50KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHdhdGNoQ29udGFpbmVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIHBhcmVudF9jbGFzcyA9ICd0cmVlLWl0ZW0nLCBvd25fY2xhc3MgPSAndHJlZS1pdGVtLWlubmVyJywgc2VhcmNoUGFyZW50ID0gdHJ1ZSkge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSBwbHVnaW4uc2V0dGluZ3M7XHJcblx0XHRjb25zdCBhcHAgPSBwbHVnaW4uYXBwO1xyXG5cdFx0bGV0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKHJlY29yZHMsIF8pID0+IHtcclxuXHRcdFx0cmVjb3Jkcy5mb3JFYWNoKChtdXRhdGlvbikgPT4ge1xyXG5cdFx0XHRcdGlmIChtdXRhdGlvbi50eXBlID09PSAnY2hpbGRMaXN0Jykge1xyXG5cdFx0XHRcdFx0bXV0YXRpb24uYWRkZWROb2Rlcy5mb3JFYWNoKChuKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmICgnY2xhc3NOYW1lJyBpbiBuKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0XHRcdFx0XHRcdGlmIChuLmNsYXNzTmFtZS5pbmNsdWRlcyAmJiB0eXBlb2Ygbi5jbGFzc05hbWUuaW5jbHVkZXMgPT09ICdmdW5jdGlvbicgJiYgbi5jbGFzc05hbWUuaW5jbHVkZXMocGFyZW50X2NsYXNzKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNlYXJjaFBhcmVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlRGl2cyA9IChuIGFzIEhUTUxFbGVtZW50KS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG93bl9jbGFzcyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZURpdnMubGVuZ3RoOyArK2kpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBsaW5rID0gZmlsZURpdnNbaV0gYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xlYXJFeHRyYUF0dHJpYnV0ZXMobGluayk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNldHRpbmdzLmVuYWJsZUJhY2tsaW5rcykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dXBkYXRlRGl2RXh0cmFBdHRyaWJ1dGVzKGFwcCwgc2V0dGluZ3MsIGxpbmssIFwiXCIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNsZWFyRXh0cmFBdHRyaWJ1dGVzKG4gYXMgSFRNTEVsZW1lbnQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR1cGRhdGVEaXZFeHRyYUF0dHJpYnV0ZXMoYXBwLCBzZXR0aW5ncywgbiBhcyBIVE1MRWxlbWVudCwgXCJcIik7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdH0pO1xyXG5cdFx0b2JzZXJ2ZXIub2JzZXJ2ZShjb250YWluZXIsIHsgc3VidHJlZTogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlLCBhdHRyaWJ1dGVzOiBmYWxzZSB9KTtcclxuXHRcdHBsdWdpbi5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcblx0fVxyXG5cclxuXHRidWlsZENNVmlld1BsdWdpbihhcHA6IEFwcCwgX3NldHRpbmdzOiBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzKSB7XHJcblx0XHQvLyBJbXBsZW1lbnRzIHRoZSBsaXZlIHByZXZpZXcgc3VwZXJjaGFyZ2luZ1xyXG5cdFx0Ly8gQ29kZSBzdHJ1Y3R1cmUgYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL25vdGhpbmdpc2xvc3Qvb2JzaWRpYW4tY202LWF0dHJpYnV0ZXMvYmxvYi83NDNkNzFiMGFhNjE2NDA3MTQ5YTBiNmVhNWZmZWEyOGUyMTU0MTU4L3NyYy9tYWluLnRzXHJcblx0XHQvLyBDb2RlIGhlbHAgY3JlZGl0cyB0byBATm90aGluZ0lzTG9zdCEgVGhleSBoYXZlIGJlZW4gYSBncmVhdCBoZWxwIGdldHRpbmcgdGhpcyB0byB3b3JrIHByb3Blcmx5LlxyXG5cdFx0Y2xhc3MgSGVhZGVyV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XHJcblx0XHRcdGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cclxuXHJcblx0XHRcdGNvbnN0cnVjdG9yKGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pIHtcclxuXHRcdFx0XHRzdXBlcigpO1xyXG5cdFx0XHRcdHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXNcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dG9ET00oKSB7XHJcblx0XHRcdFx0bGV0IGhlYWRlckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcblx0XHRcdFx0aGVhZGVyRWwuc2V0QXR0cnModGhpcy5hdHRyaWJ1dGVzKTtcclxuXHRcdFx0XHRoZWFkZXJFbC5hZGRDbGFzcygnZGF0YS1saW5rLWljb24nKTtcclxuXHRcdFx0XHQvLyBjcmVhdGUgYSBuYWl2ZSBicmVhZCBjcnVtYlxyXG5cdFx0XHRcdHJldHVybiBoZWFkZXJFbDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWdub3JlRXZlbnQoKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGNvbnN0IHNldHRpbmdzID0gX3NldHRpbmdzO1xyXG5cdFx0Y29uc3Qgdmlld1BsdWdpbiA9IFZpZXdQbHVnaW4uZnJvbUNsYXNzKFxyXG5cdFx0XHRjbGFzcyB7XHJcblx0XHRcdFx0ZGVjb3JhdGlvbnM6IERlY29yYXRpb25TZXQ7XHJcblxyXG5cdFx0XHRcdGNvbnN0cnVjdG9yKHZpZXc6IEVkaXRvclZpZXcpIHtcclxuXHRcdFx0XHRcdHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmJ1aWxkRGVjb3JhdGlvbnModmlldyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR1cGRhdGUodXBkYXRlOiBWaWV3VXBkYXRlKSB7XHJcblx0XHRcdFx0XHRpZiAodXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLnZpZXdwb3J0Q2hhbmdlZCkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmRlY29yYXRpb25zID0gdGhpcy5idWlsZERlY29yYXRpb25zKHVwZGF0ZS52aWV3KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGRlc3Ryb3koKSB7IH1cclxuXHJcblx0XHRcdFx0YnVpbGREZWNvcmF0aW9ucyh2aWV3OiBFZGl0b3JWaWV3KSB7XHJcblx0XHRcdFx0XHRsZXQgYnVpbGRlciA9IG5ldyBSYW5nZVNldEJ1aWxkZXI8RGVjb3JhdGlvbj4oKTtcclxuXHRcdFx0XHRcdGlmICghc2V0dGluZ3MuZW5hYmxlRWRpdG9yKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBidWlsZGVyLmZpbmlzaCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Y29uc3QgbWRWaWV3ID0gdmlldy5zdGF0ZS5maWVsZChlZGl0b3JWaWV3RmllbGQpIGFzIE1hcmtkb3duVmlldztcclxuXHRcdFx0XHRcdGxldCBsYXN0QXR0cmlidXRlcyA9IHt9O1xyXG5cdFx0XHRcdFx0Zm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIHZpZXcudmlzaWJsZVJhbmdlcykge1xyXG5cdFx0XHRcdFx0XHRzeW50YXhUcmVlKHZpZXcuc3RhdGUpLml0ZXJhdGUoe1xyXG5cdFx0XHRcdFx0XHRcdGZyb20sXHJcblx0XHRcdFx0XHRcdFx0dG8sXHJcblx0XHRcdFx0XHRcdFx0ZW50ZXI6ICh0eXBlLCBmcm9tLCB0bykgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgdG9rZW5Qcm9wcyA9IHR5cGUucHJvcCh0b2tlbkNsYXNzTm9kZVByb3ApO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRva2VuUHJvcHMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgcHJvcHMgPSBuZXcgU2V0KHRva2VuUHJvcHMuc3BsaXQoXCIgXCIpKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgaXNMaW5rID0gcHJvcHMuaGFzKFwiaG1kLWludGVybmFsLWxpbmtcIik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGlzQWxpYXMgPSBwcm9wcy5oYXMoXCJsaW5rLWFsaWFzXCIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBpc1BpcGUgPSBwcm9wcy5oYXMoXCJsaW5rLWFsaWFzLXBpcGVcIik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGlmIChwcm9wcy5oYXMoXCJobWQtaW50ZXJuYWwtbGlua1wiKSkge2NvbnNvbGUubG9nKFwicHJvcHNcIiwgdHlwZSwgZnJvbSwgdG8pfVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaXNMaW5rICYmICFpc0FsaWFzICYmICFpc1BpcGUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRsZXQgbGlua1RleHQgPSB2aWV3LnN0YXRlLmRvYy5zbGljZVN0cmluZyhmcm9tLCB0byk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGlua1RleHQgPSBsaW5rVGV4dC5zcGxpdChcIiNcIilbMF07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IGZpbGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChsaW5rVGV4dCwgbWRWaWV3LmZpbGUuYmFzZW5hbWUpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChmaWxlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsZXQgX2F0dHJpYnV0ZXMgPSBmZXRjaFRhcmdldEF0dHJpYnV0ZXNTeW5jKGFwcCwgc2V0dGluZ3MsIGZpbGUsIHRydWUpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAobGV0IGtleSBpbiBfYXR0cmlidXRlcykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyaWJ1dGVzW1wiZGF0YS1saW5rLVwiICsga2V5XSA9IF9hdHRyaWJ1dGVzW2tleV07XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsZXQgZGVjbyA9IERlY29yYXRpb24ubWFyayh7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJpYnV0ZXNcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IGljb25EZWNvID0gRGVjb3JhdGlvbi53aWRnZXQoe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR3aWRnZXQ6IG5ldyBIZWFkZXJXaWRnZXQoYXR0cmlidXRlcyksXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJ1aWxkZXIuYWRkKGZyb20sIGZyb20sIGljb25EZWNvKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJ1aWxkZXIuYWRkKGZyb20sIHRvLCBkZWNvKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGxhc3RBdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoaXNMaW5rICYmIGlzQWxpYXMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRsZXQgZGVjbyA9IERlY29yYXRpb24ubWFyayh7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyaWJ1dGVzOiBsYXN0QXR0cmlidXRlc1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0YnVpbGRlci5hZGQoZnJvbSwgdG8sIGRlY28pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KVxyXG5cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiBidWlsZGVyLmZpbmlzaCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGRlY29yYXRpb25zOiB2ID0+IHYuZGVjb3JhdGlvbnNcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHRcdHJldHVybiB2aWV3UGx1Z2luO1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHR0aGlzLm9ic2VydmVycy5mb3JFYWNoKChvYnNlcnZlcikgPT4gb2JzZXJ2ZXIuZGlzY29ubmVjdCgpKTtcclxuXHRcdGNvbnNvbGUubG9nKCdTdXBlcmNoYXJnZWQgbGlua3MgdW5sb2FkZWQnKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncy5wcmVzZXRGaWVsZHMgPSB0aGlzLmluaXRpYWxQcm9wZXJ0aWVzXHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxufSJdLCJuYW1lcyI6WyJTZXR0aW5nIiwiTW9kYWwiLCJUZXh0Q29tcG9uZW50IiwiVG9nZ2xlQ29tcG9uZW50IiwiQnV0dG9uQ29tcG9uZW50IiwiTm90aWNlIiwiUGx1Z2luU2V0dGluZ1RhYiIsImdldEFsbFRhZ3MiLCJnZXRMaW5rcGF0aCIsIk1hcmtkb3duVmlldyIsIkV4dHJhQnV0dG9uQ29tcG9uZW50IiwidmFsdWVUb2dnbGVNb2RhbCIsIkRyb3Bkb3duQ29tcG9uZW50IiwidmFsdWVTZWxlY3RNb2RhbCIsIlRleHRBcmVhQ29tcG9uZW50IiwiUGx1Z2luIiwiUHJlYyIsIldpZGdldFR5cGUiLCJWaWV3UGx1Z2luIiwidmlldyIsIlJhbmdlU2V0QnVpbGRlciIsImVkaXRvclZpZXdGaWVsZCIsInN5bnRheFRyZWUiLCJ0b2tlbkNsYXNzTm9kZVByb3AiLCJEZWNvcmF0aW9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE0QkE7QUFDTyxTQUFTLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQzdCLElBQUksSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ2YsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO0FBQ3ZGLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwQixJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxPQUFPLE1BQU0sQ0FBQyxxQkFBcUIsS0FBSyxVQUFVO0FBQ3ZFLFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUNoRixZQUFZLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMxRixnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQyxTQUFTO0FBQ1QsSUFBSSxPQUFPLENBQUMsQ0FBQztBQUNiLENBQUM7QUFnQkQ7QUFDTyxTQUFTLFNBQVMsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUU7QUFDN0QsSUFBSSxTQUFTLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxPQUFPLEtBQUssWUFBWSxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLFVBQVUsT0FBTyxFQUFFLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7QUFDaEgsSUFBSSxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxVQUFVLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDL0QsUUFBUSxTQUFTLFNBQVMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO0FBQ25HLFFBQVEsU0FBUyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO0FBQ3RHLFFBQVEsU0FBUyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsTUFBTSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQyxFQUFFO0FBQ3RILFFBQVEsSUFBSSxDQUFDLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLFVBQVUsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQzlFLEtBQUssQ0FBQyxDQUFDO0FBQ1A7O0FDcEVBLE1BQU0sS0FBSztJQUVWLFlBQVksT0FBZSxFQUFFLEVBQ2QsU0FBaUMsRUFBRSxFQUNuQyxLQUFhLEVBQUUsRUFDZixVQUFtQixLQUFLLEVBQ3hCLFVBQW1CLEtBQUssRUFDeEIscUJBQTZCLEVBQUU7UUFDN0MsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUE7UUFDaEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7UUFDZCxJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQTtRQUNaLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxrQkFBa0IsQ0FBQTtRQUM1QyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtLQUNwQztJQUVlLGNBQWMsQ0FBQyxLQUFZOztZQUNwQyxJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUE7WUFDZCxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRztnQkFDaEMsSUFBRyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLE1BQU0sRUFBQztvQkFDeEMsTUFBTSxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7aUJBQzdCO2FBQ0osQ0FBQyxDQUFBO1lBQ0YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUE7WUFDdEMsT0FBTyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUE7U0FDM0I7S0FBQTtJQUVELE9BQU8sWUFBWSxDQUFDLE1BQWEsRUFBRSxNQUFhO1FBQzVDLE1BQU0sQ0FBQyxFQUFFLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQTtRQUNyQixNQUFNLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUE7UUFDekIsTUFBTSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFBO1FBQy9CLE1BQU0sQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQTtRQUMvQixNQUFNLENBQUMsa0JBQWtCLEdBQUcsTUFBTSxDQUFDLGtCQUFrQixDQUFBO1FBQ3JELE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ2hDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQTtTQUN0QyxDQUFDLENBQUE7UUFDRixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNoQyxJQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFDO2dCQUN2QyxPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUE7YUFDMUI7U0FDSixDQUFDLENBQUE7S0FDTDs7O01DN0NnQixZQUFhLFNBQVFBLGdCQUFPO0lBSzdDLFlBQVksV0FBd0IsRUFBRSxRQUFlLEVBQUUsR0FBUSxFQUFFLE1BQXlCO1FBQ3RGLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUNsQixJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQTtRQUM5QixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtRQUN4QixJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQTtRQUNkLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO1FBQ3BCLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFBO1FBQzdCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQTtRQUNwQixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUE7S0FFekI7SUFFRCxzQkFBc0I7UUFDbEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXO1lBQ3ZCLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLE1BQU0sTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQTtLQUMvRztJQUdELGFBQWE7UUFDVCxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNiLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO2lCQUNsQixVQUFVLENBQUMsTUFBTSxDQUFDO2lCQUNsQixPQUFPLENBQUM7Z0JBQ0wsSUFBSSxLQUFLLEdBQUcsSUFBSSxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUNqRyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7YUFDaEIsQ0FBQyxDQUFDO1NBQ04sQ0FBQyxDQUFBO0tBQ0w7SUFFRCxlQUFlO1FBQ1gsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDYixDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztpQkFDakIsVUFBVSxDQUFDLFFBQVEsQ0FBQztpQkFDcEIsT0FBTyxDQUFDO2dCQUNMLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtnQkFDdEcsSUFBRyx1QkFBdUIsRUFBQztvQkFDdkIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsdUJBQXVCLENBQUMsQ0FBQTtpQkFDaEU7Z0JBQ0QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtnQkFDeEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQTthQUM3QixDQUFDLENBQUM7U0FDTixDQUFDLENBQUM7S0FDTjtJQUVELE9BQU8scUJBQXFCLENBQUMsUUFBZ0IsRUFBRSxHQUFRO1FBQ25ELE9BQU8sSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUMsTUFBTTtZQUM5QixJQUFJLE1BQU0sR0FBa0IsRUFBRSxDQUFBO1lBQzlCLE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxJQUFJLElBQUksUUFBUSxDQUFDLENBQUE7WUFDcEYsSUFBRyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBQztnQkFDaEIsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO2dCQUNyQixHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFjO29CQUNyQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJO3dCQUMzQixJQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUM7NEJBQ25CLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUE7eUJBQzNCO3FCQUNKLENBQUMsQ0FBQTtvQkFDRixPQUFPLENBQUMsTUFBTSxDQUFDLENBQUE7aUJBQ2xCLENBQUMsQ0FBQTthQUNMO2lCQUFNO2dCQUNILE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQTthQUNkO1NBQ0osQ0FBQyxDQUFDO0tBRU47OztNQ3JFZ0Isa0JBQW1CLFNBQVFDLGNBQUs7SUFlakQsWUFBWSxHQUFRLEVBQUUsTUFBeUIsRUFBRSxzQkFBbUMsRUFBRSxhQUF1QixFQUFFLFFBQWdCO1FBQzNILEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQWRkLDJCQUFzQixHQUF5QixFQUFFLENBQUE7UUFJakQsVUFBSyxHQUFZLEtBQUssQ0FBQTtRQUt0QixRQUFHLEdBQVksSUFBSSxDQUFBO1FBTWYsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7UUFDcEIsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUE7UUFDbEMsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFBO1FBQ2xDLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxzQkFBc0IsQ0FBQTtRQUNwRCxJQUFJLFFBQVEsRUFBRTtZQUNWLElBQUksQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFBO1lBQ2hCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1lBQ3hCLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUE7WUFDekMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxFQUFFLEdBQUcsUUFBUSxDQUFDLEVBQUUsQ0FBQTtZQUNyQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDbEMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQTthQUN0RCxDQUFDLENBQUE7U0FDTDthQUFNO1lBQ0gsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFBO1lBQ2IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsSUFBSTtnQkFDdEMsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksS0FBSyxFQUFFO29CQUNqRCxLQUFLLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUE7aUJBQ2hDO2FBQ0osQ0FBQyxDQUFBO1lBQ0YsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFBO1lBQzNCLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQTtZQUNuQyxJQUFJLENBQUMsZUFBZSxDQUFDLEVBQUUsR0FBRyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUE7U0FDN0M7S0FDSjtJQUVELE1BQU07UUFDRixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxJQUFJLEVBQUUsRUFBRTtZQUMxQixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFBO1NBQzVEO2FBQU07WUFDSCxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyw4QkFBOEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFBO1NBQzNFO1FBQ0QsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFBO0tBQ3BCO0lBRUQsT0FBTztRQUNILE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUE7UUFDbEQsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUU7WUFDWCxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxXQUFXO2dCQUNqQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxNQUFNLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUE7U0FDbkg7YUFBTSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDbkIsSUFBSSxZQUFZLENBQUMsSUFBSSxDQUFDLHNCQUFzQixFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7U0FDdEY7S0FDSjtJQUVELGdCQUFnQixDQUFDLE1BQXNCO1FBQ25DLE1BQU0sQ0FBQyxPQUFPLENBQUMsa0JBQWtCLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFBO0tBQ3JGO0lBRUQsd0JBQXdCLENBQUMsVUFBMEI7UUFDL0MsTUFBTSwwQkFBMEIsR0FBRyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDekQsMEJBQTBCLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUE7UUFDcEQsTUFBTSxLQUFLLEdBQUcsSUFBSUMsc0JBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUMzQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQTtRQUMvQixLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ3BCLEtBQUssQ0FBQyxjQUFjLENBQUMsc0JBQXNCLENBQUMsQ0FBQTtRQUM1QyxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUs7WUFDaEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFBO1lBQzFCLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGdDQUFnQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUE7WUFDMUUsa0JBQWtCLENBQUMscUJBQXFCLENBQUMsS0FBSyxDQUFDLENBQUE7U0FDbEQsQ0FBQyxDQUFBO1FBQ0YsT0FBTyxLQUFLLENBQUE7S0FDZjtJQUVELHNCQUFzQixDQUFDLFVBQTBCLEVBQUUsS0FBYTtRQUM1RCxNQUFNLHNCQUFzQixHQUFHLFVBQVUsQ0FBQyxTQUFTLENBQUM7WUFDaEQsR0FBRyxFQUFFLDhCQUE4QjtTQUN0QyxDQUFDLENBQUE7UUFDRixzQkFBc0IsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDckMsTUFBTSxPQUFPLEdBQUcsSUFBSUMsd0JBQWUsQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUMvQyxPQUFPLE9BQU8sQ0FBQTtLQUNqQjtJQUVELHVCQUF1QixDQUFDLFVBQTBCO1FBQzlDLE1BQU0sc0JBQXNCLEdBQUcsVUFBVSxDQUFDLFNBQVMsRUFBRSxDQUFBO1FBQ3JELHNCQUFzQixDQUFDLE9BQU8sQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFBO1FBQ3pFLE1BQU0sS0FBSyxHQUFHLElBQUlELHNCQUFhLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDM0MsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQTtRQUNyRCxLQUFLLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFBO1FBQzVCLEtBQUssQ0FBQyxjQUFjLENBQUMscUJBQXFCLENBQUMsQ0FBQTtRQUMzQyxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLGtCQUFrQixHQUFHLEtBQUssQ0FBQyxDQUFBO1FBQ2pFLE9BQU8sS0FBSyxDQUFBO0tBQ2Y7SUFFRCxpQkFBaUIsQ0FBQyxHQUFXO1FBQ3pCLElBQUksU0FBUyxHQUEyQixFQUFFLENBQUE7UUFDMUMsS0FBSyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRTtZQUNuQyxJQUFJLEdBQUcsS0FBSyxJQUFJLEVBQUU7Z0JBQ2QsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFBO2FBQy9DO1NBQ0o7UUFDRCxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxTQUFTLENBQUE7S0FDbkM7SUFFRCxvQkFBb0IsQ0FBQyxVQUEwQixFQUFFLE1BQXNCLEVBQUUsR0FBVztRQUNoRixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQTtRQUNuQyxNQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDL0IsTUFBTSxjQUFjLEdBQUcsVUFBVSxDQUFDLFNBQVMsQ0FBQztZQUN4QyxHQUFHLEVBQUUsOEJBQThCO1NBQ3RDLENBQUMsQ0FBQTtRQUNGLE1BQU0sS0FBSyxHQUFHLElBQUlBLHNCQUFhLENBQUMsY0FBYyxDQUFDLENBQUE7UUFDL0MsS0FBSyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUMzQixLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUs7WUFDaEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFBO1lBQ2pDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQTtZQUM3QixrQkFBa0IsQ0FBQyxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsQ0FBQTtTQUNsRCxDQUFDLENBQUE7UUFDRixNQUFNLGlCQUFpQixHQUFHLElBQUlFLHdCQUFlLENBQUMsY0FBYyxDQUFDLENBQUE7UUFDN0QsaUJBQWlCLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQzthQUM3QixPQUFPLENBQUMsQ0FBQyxHQUFlO1lBQ3JCLEdBQUcsQ0FBQyxjQUFjLENBQUE7WUFDbEIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFBO1lBQzNCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQTtZQUM3QixVQUFVLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxDQUFBO1lBQ3RDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUE7U0FFNUMsQ0FBQyxDQUFBO1FBQ04sSUFBSSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQzdDLE1BQU0sa0JBQWtCLEdBQUcsSUFBSUEsd0JBQWUsQ0FBQyxjQUFjLENBQUMsQ0FBQTtZQUM5RCxrQkFBa0IsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDckMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBZTtnQkFDdkMsTUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFBO2dCQUM3QixNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtnQkFDbEcsSUFBSSxjQUFjLEVBQUU7b0JBQ2hCLE1BQU0sVUFBVSxHQUFHLGNBQWMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFBO29CQUMvQyxNQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO29CQUM1RSxJQUFJLFFBQVEsRUFBRTt3QkFDVixjQUFjLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFBO3dCQUNsQyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsU0FBUyxDQUFBO3dCQUM1QixLQUFLLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFBO3dCQUMxQixNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsVUFBVSxDQUFBO3FCQUMzQjtpQkFDSjthQUNKLENBQUMsQ0FBQTtTQUNMO1FBRUQsT0FBTyxLQUFLLENBQUE7S0FDZjtJQUVELFVBQVU7UUFDTixNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQztZQUNqQyxHQUFHLEVBQUUsd0JBQXdCO1NBQ2hDLENBQUMsQ0FBQTtRQUNGLE1BQU0sT0FBTyxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUM7WUFDMUIsR0FBRyxFQUFFLHlCQUF5QjtTQUNqQyxDQUFDLENBQUE7O1FBRUYsTUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFBO1FBQ3pDLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsd0JBQXdCLENBQUMsYUFBYSxDQUFDLENBQUE7UUFFdkUsT0FBTyxDQUFDLFNBQVMsQ0FBQyxFQUFFLEdBQUcsRUFBRSx1QkFBdUIsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFBOztRQUlsRSxNQUFNLGNBQWMsR0FBRyxPQUFPLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDMUMsSUFBSSxDQUFDLHVCQUF1QixHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxjQUFjLEVBQUUsWUFBWSxDQUFDLENBQUE7UUFDeEYsSUFBSSxDQUFDLHVCQUF1QixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQzVELElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxVQUFVLENBQUMseUNBQXlDLENBQUMsQ0FBQTtRQUNsRixJQUFJLENBQUMsdUJBQXVCLENBQUMsUUFBUSxDQUFDLEtBQUs7WUFDdkMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFBO1lBQzdCLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUU7Z0JBQ2hELElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtnQkFDN0IsSUFBSSxDQUFDLHVCQUF1QixDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQTthQUMvQztTQUNKLENBQUMsQ0FBQTtRQUVGLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRSxHQUFHLEVBQUUsdUJBQXVCLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQTs7UUFJbEUsTUFBTSxjQUFjLEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFBO1FBQzFDLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxJQUFJLENBQUMsc0JBQXNCLENBQUMsY0FBYyxFQUFFLFlBQVksQ0FBQyxDQUFBO1FBQ3hGLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUM1RCxJQUFJLENBQUMsdUJBQXVCLENBQUMsVUFBVSxDQUFDLDhDQUE4QyxDQUFDLENBQUE7UUFDdkYsSUFBSSxDQUFDLHVCQUF1QixDQUFDLFFBQVEsQ0FBQyxLQUFLO1lBQ3ZDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtZQUM3QixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFO2dCQUNoRCxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUE7Z0JBQzdCLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUE7YUFDL0M7U0FDSixDQUFDLENBQUE7UUFFRixPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUUsR0FBRyxFQUFFLHVCQUF1QixFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUE7O1FBSWxFLE1BQU0scUJBQXFCLEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFBO1FBQ2pELElBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUMsdUJBQXVCLENBQUMscUJBQXFCLENBQUMsQ0FBQTtRQUVoRixPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUUsR0FBRyxFQUFFLHVCQUF1QixFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUE7O1FBR2xFLE1BQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQTtRQUN0QyxNQUFNLGdCQUFnQixHQUFHLFVBQVUsQ0FBQyxTQUFTLEVBQUUsQ0FBQTtRQUMvQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDL0IsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLGtCQUFrQixNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQTtRQUM1RixNQUFNLGNBQWMsR0FBRyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDN0MsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHO1lBQ3pDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLGNBQWMsRUFBRSxnQkFBZ0IsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFBO1NBQ3JHLENBQUMsQ0FBQTs7UUFHRixNQUFNLGdCQUFnQixHQUFHLFVBQVUsQ0FBQyxTQUFTLEVBQUUsQ0FBQTtRQUMvQyxNQUFNLFFBQVEsR0FBRyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDcEQsUUFBUSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUE7UUFDeEIsUUFBUSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUE7UUFDNUIsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQWU7WUFDbEMsR0FBRyxDQUFDLGNBQWMsQ0FBQTtZQUNsQixJQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUM7aUJBQzNCLElBQUksQ0FBQyxNQUFNLE1BQU0sSUFBSSxDQUFDLG9CQUFvQixDQUFDLGNBQWMsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLENBQUMsQ0FBQSxFQUFFLENBQUMsQ0FBQTtTQUUvRixDQUFDLENBQUE7UUFFRixPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUUsR0FBRyxFQUFFLHVCQUF1QixFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUE7O1FBR2xFLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDM0MsTUFBTSxhQUFhLEdBQUcsSUFBSUosZ0JBQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUMzQyxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ3hELGFBQWEsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDbkU7SUFFRCxnQkFBZ0IsQ0FBQyxDQUFrQjtRQUMvQixDQUFDLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQzthQUNmLE9BQU8sQ0FBQyxXQUFXLENBQUM7YUFDcEIsT0FBTyxDQUFDO1lBQ0wsSUFBSSxLQUFLLEdBQUcsS0FBSyxDQUFBO1lBQ2pCLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUNuQyxrQkFBa0IsQ0FBQyxrQkFBa0IsQ0FDakMsSUFBSSxDQUFDLG1CQUFtQixFQUFFLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQzFELHlDQUF5QyxDQUM1QyxDQUFDO2dCQUNGLEtBQUssR0FBRyxJQUFJLENBQUM7YUFDaEI7WUFDRCxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxJQUFJLEVBQUUsRUFBRTtnQkFDMUIsa0JBQWtCLENBQUMsa0JBQWtCLENBQ2pDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsT0FBTyxFQUMxRCxnQ0FBZ0MsQ0FDbkMsQ0FBQztnQkFDRixLQUFLLEdBQUcsSUFBSSxDQUFBO2FBQ2Y7WUFDRCxJQUFJLENBQUMsc0JBQXNCLENBQUMsT0FBTyxDQUFDLEtBQUs7Z0JBQ3JDLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO29CQUNwQyxrQkFBa0IsQ0FBQyxrQkFBa0IsQ0FDakMsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGdCQUFnQixFQUNuRCx5Q0FBeUMsQ0FDNUMsQ0FBQztvQkFDRixLQUFLLEdBQUcsSUFBSSxDQUFDO2lCQUNoQjtnQkFDRCxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtvQkFDbkMsa0JBQWtCLENBQUMsa0JBQWtCLENBQ2pDLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsRUFDbkQsK0JBQStCLENBQ2xDLENBQUM7b0JBQ0YsS0FBSyxHQUFHLElBQUksQ0FBQztpQkFDaEI7Z0JBQ0QsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssSUFBSSxFQUFFLEVBQUU7b0JBQzNCLGtCQUFrQixDQUFDLGtCQUFrQixDQUNqQyxLQUFLLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLEVBQ25ELHVCQUF1QixDQUMxQixDQUFDO29CQUNGLEtBQUssR0FBRyxJQUFJLENBQUM7aUJBQ2hCO2FBQ0osQ0FBQyxDQUFBO1lBQ0YsSUFBSSxLQUFLLEVBQUU7Z0JBQ1AsSUFBSUssZUFBTSxDQUFDLDJCQUEyQixDQUFDLENBQUM7Z0JBQ3hDLE9BQU87YUFDVjtZQUNELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1lBQ2xCLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUN0RyxJQUFJLHVCQUF1QixFQUFFO2dCQUN6QixLQUFLLENBQUMsWUFBWSxDQUFDLHVCQUF1QixFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTthQUM3RDtpQkFBTTtnQkFDSCxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7YUFDcEQ7WUFDRCxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUE7WUFDcEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQTtZQUMxQixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDaEIsQ0FBQSxDQUFDLENBQUE7UUFDTixPQUFPLENBQUMsQ0FBQTtLQUNYO0lBRUQsa0JBQWtCLENBQUMsQ0FBdUI7UUFDdEMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUM7YUFDYixVQUFVLENBQUMsUUFBUSxDQUFDO2FBQ3BCLE9BQU8sQ0FBQztZQUNMLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDOztZQUVuQixJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxJQUFJLEVBQUUsRUFBRTtnQkFDakMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQTthQUNyRDtZQUNELElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNoQixDQUFDLENBQUM7UUFDUCxPQUFPLENBQUMsQ0FBQztLQUNaOztJQUlELE9BQU8sa0JBQWtCLENBQUMsU0FBd0IsRUFBRSxXQUFvQixFQUFFLE9BQWdCO1FBQ3RGLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ3pDLElBQUksT0FBTyxFQUFFO1lBRVQsSUFBSSxJQUFJLEdBQUcsU0FBUyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUNwRCxtQkFBbUIsQ0FDSixDQUFDO1lBRXBCLElBQUksQ0FBQyxJQUFJLEVBQUU7Z0JBQ1AsSUFBSSxHQUFHLFNBQVMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxrQkFBa0IsRUFBRSxDQUFDLENBQUM7YUFDakQ7WUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQztZQUN6QixJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1NBQ2pDO0tBQ0o7SUFDRCxPQUFPLHFCQUFxQixDQUFDLFNBQXdCO1FBQ2pELElBQUksU0FBUyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFDMUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUE7WUFDM0MsU0FBUyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUN2QyxTQUFTLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FDbkQsQ0FBQTtTQUNKO0tBQ0o7OztNQy9VZ0IsMkJBQTRCLFNBQVFDLHlCQUFnQjtJQUd4RSxZQUFZLEdBQVEsRUFBRSxNQUF5QjtRQUM5QyxLQUFLLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0tBQ3JCO0lBRUQsT0FBTztRQUNOLElBQUksRUFBQyxXQUFXLEVBQUMsR0FBRyxJQUFJLENBQUM7UUFFekIsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBRXBCLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEVBQUMsSUFBSSxFQUFFLGtDQUFrQyxFQUFDLENBQUMsQ0FBQzs7UUFFdkUsSUFBSU4sZ0JBQU8sQ0FBQyxXQUFXLENBQUM7YUFDdEIsT0FBTyxDQUFDLCtCQUErQixDQUFDO2FBQ3hDLE9BQU8sQ0FBQyxtREFBbUQsQ0FBQzthQUM1RCxXQUFXLENBQUMsQ0FBQyxJQUFJO1lBQU0sSUFBSTtpQkFDMUIsY0FBYyxDQUFDLDZDQUE2QyxDQUFDO2lCQUM3RCxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2lCQUMxRCxRQUFRLENBQUMsQ0FBTyxLQUFLO2dCQUNyQixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzNFLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQzthQUNqQyxDQUFBLENBQUMsQ0FBQTtZQUNGLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztZQUN0QixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7U0FDdkIsQ0FBQyxDQUFDO1FBRUosSUFBSUEsZ0JBQU8sQ0FBQyxXQUFXLENBQUM7YUFDdEIsT0FBTyxDQUFDLGtCQUFrQixDQUFDO2FBQzNCLE9BQU8sQ0FBQyxrRkFBa0YsQ0FBQzthQUMzRixTQUFTLENBQUMsTUFBTTtZQUNoQixNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFBO1lBQ2xELE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSztnQkFDcEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQTtnQkFDekMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQTthQUMxQixDQUFDLENBQUE7U0FDRixDQUFDLENBQUE7UUFFSCxJQUFJQSxnQkFBTyxDQUFDLFdBQVcsQ0FBQzthQUN0QixPQUFPLENBQUMsd0JBQXdCLENBQUM7YUFDakMsT0FBTyxDQUFDLHVEQUF1RCxDQUFDO2FBQ2hFLFNBQVMsQ0FBQyxNQUFNO1lBQ2hCLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLENBQUE7WUFDcEQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLO2dCQUNwQixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFBO2dCQUMzQyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFBO2FBQzFCLENBQUMsQ0FBQTtTQUNGLENBQUMsQ0FBQTtRQUVILElBQUlBLGdCQUFPLENBQUMsV0FBVyxDQUFDO2FBQ3RCLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQzthQUM5QixPQUFPLENBQUMsNkVBQTZFLENBQUM7YUFDdEYsU0FBUyxDQUFDLE1BQU07WUFDaEIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQTtZQUNyRCxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUs7Z0JBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUE7Z0JBQzVDLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLENBQUE7YUFDMUIsQ0FBQyxDQUFBO1NBQ0YsQ0FBQyxDQUFBOztRQUdILElBQUlBLGdCQUFPLENBQUMsV0FBVyxDQUFDO2FBQ3RCLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQzthQUNyQyxPQUFPLENBQUMsMkdBQTJHLENBQUM7YUFDcEgsU0FBUyxDQUFDLE1BQU07WUFDaEIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQTtZQUNoRCxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUs7Z0JBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUE7Z0JBQ3ZDLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLENBQUE7YUFDMUIsQ0FBQyxDQUFBO1NBQ0YsQ0FBQyxDQUFBOztRQUdILElBQUlBLGdCQUFPLENBQUMsV0FBVyxDQUFDO2FBQ3ZCLE9BQU8sQ0FBQyxzREFBc0QsQ0FBQzthQUMvRCxPQUFPLENBQUMsc0VBQXNFLENBQUM7YUFDL0UsU0FBUyxDQUFDLE1BQU07WUFDaEIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFBO1lBQ3ZELE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSztnQkFDcEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsa0JBQWtCLEdBQUcsS0FBSyxDQUFBO2dCQUMvQyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFBO2FBQzFCLENBQUMsQ0FBQTtTQUNILENBQUMsQ0FBQTs7O1FBSUYsSUFBSUEsZ0JBQU8sQ0FBQyxXQUFXLENBQUM7YUFDdEIsT0FBTyxDQUFDLHVDQUF1QyxDQUFDO2FBQ2hELE9BQU8sQ0FBQywrRUFBK0UsQ0FBQzthQUN4RixTQUFTLENBQUMsQ0FBQyxNQUF1QjtZQUNsQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLDBCQUEwQixDQUFDLENBQUE7WUFDaEUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLO2dCQUNwQixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQywwQkFBMEIsR0FBRyxLQUFLLENBQUE7Z0JBQ3ZELElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLENBQUE7YUFDMUIsQ0FBQyxDQUFBO1NBQ0YsQ0FBQyxDQUFBOztRQUVILElBQUlBLGdCQUFPLENBQUMsV0FBVyxDQUFDO2FBQ3RCLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQzthQUN6QixPQUFPLENBQUMsNEVBQTRFLENBQUM7YUFDckYsV0FBVyxDQUFDLENBQUMsSUFBSTtZQUFNLElBQUk7aUJBQzFCLGNBQWMsQ0FBQyx5Q0FBeUMsQ0FBQztpQkFDekQsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDL0QsUUFBUSxDQUFDLENBQU8sS0FBSztnQkFDckIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMscUJBQXFCLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNoRixNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLENBQUM7YUFDakMsQ0FBQSxDQUFDLENBQUE7WUFDRixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7WUFDdEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1NBQ3ZCLENBQUMsQ0FBQzs7UUFHSixJQUFJQSxnQkFBTyxDQUFDLFdBQVcsQ0FBQzthQUN2QixPQUFPLENBQUMsa0JBQWtCLENBQUM7YUFDM0IsT0FBTyxDQUFDLHVFQUF1RSxDQUFDO2FBQ2hGLE9BQU8sQ0FBQyxDQUFDLElBQUk7WUFBTSxJQUFJO2lCQUN0QixjQUFjLENBQUMsT0FBTyxDQUFDO2lCQUN2QixRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDO2lCQUM3QyxRQUFRLENBQUMsQ0FBTyxLQUFLO2dCQUNyQixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFBO2dCQUMzQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLENBQUM7YUFDakMsQ0FBQSxDQUFDLENBQUE7U0FDRixDQUFDLENBQUM7O1FBR0gsSUFBSUEsZ0JBQU8sQ0FBQyxXQUFXLENBQUM7YUFDdEIsT0FBTyxDQUFDLDBCQUEwQixDQUFDO2FBQ25DLE9BQU8sQ0FBQyxrRUFBa0UsQ0FBQzthQUMzRSxTQUFTLENBQUMsQ0FBQyxNQUF1QjtZQUNsQyxJQUFJLENBQUMsR0FBRyxNQUFNO2lCQUNaLFVBQVUsQ0FBQywwQkFBMEIsQ0FBQztpQkFDdEMsYUFBYSxDQUFDLEdBQUcsQ0FBQztpQkFDbEIsT0FBTyxDQUFDO2dCQUNSLElBQUksS0FBSyxHQUFHLElBQUksa0JBQWtCLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxDQUFDO2dCQUN2RSxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7YUFDYixDQUFBLENBQUMsQ0FBQztZQUVKLE9BQU8sQ0FBQyxDQUFDO1NBQ1QsQ0FBQyxDQUFDOztRQUdKLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLElBQUk7WUFDaEMsTUFBTSxRQUFRLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQTtZQUM1QixNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQTtZQUN0QyxJQUFJLFlBQVksQ0FBQyxXQUFXLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBO1NBQzlELENBQUMsQ0FBQTtLQUNGOzs7U0N2SmMsb0JBQW9CLENBQUMsSUFBaUI7SUFDbEQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUk7UUFDdkMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUNqQyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtTQUNsQztLQUNKLENBQUMsQ0FBQTtBQUNOLENBQUM7U0FFZSx5QkFBeUIsQ0FBQyxHQUFRLEVBQUUsUUFBbUMsRUFBRSxJQUFXLEVBQUUsV0FBb0I7O0lBQ3RILElBQUksU0FBUyxHQUEyQixFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQTtJQUNwRCxNQUFNLEtBQUssR0FBRyxHQUFHLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUNsRCxJQUFJLENBQUMsS0FBSztRQUFFLE9BQU87SUFFbkIsTUFBTSxXQUFXLEdBQUcsS0FBSyxDQUFDLFdBQVcsQ0FBQTtJQUNyQyxJQUFJLFdBQVcsRUFBRTtRQUNiLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsU0FBUztZQUN2QyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFFO2dCQUM5QyxJQUFJLFNBQVMsS0FBSyxLQUFLLElBQUksU0FBUyxLQUFLLE1BQU0sRUFBRTtvQkFDN0MsU0FBUyxDQUFDLE1BQU0sQ0FBQyxJQUFJLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQztpQkFDL0M7cUJBQU07b0JBQ0gsU0FBUyxDQUFDLFNBQVMsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQTtpQkFDaEQ7YUFDSjtTQUNKLENBQUMsQ0FBQTtLQUNMO0lBRUQsSUFBSSxRQUFRLENBQUMsVUFBVSxFQUFFO1FBQ3JCLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSU8sbUJBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDcEQ7SUFFRCxJQUFJLFdBQVcsRUFBRTtRQUNiLFNBQVMsQ0FBQyxXQUFXLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO0tBQzFDOztJQUdELE1BQU0sVUFBVSxHQUFHLENBQUMsR0FBRztRQUNuQixRQUFRLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBYTtZQUM1QyxNQUFNLEtBQUssR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUN4QyxJQUFJLEtBQUssRUFBRTtnQkFDUCxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFBO2FBQzNCO1NBQ0osQ0FBQyxDQUFBO0tBQ0wsQ0FBQztJQUVGLElBQUksUUFBUSxDQUFDLGtCQUFrQixJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsRUFBRTtRQUMzRSxNQUFNLEdBQUcsR0FBRyxNQUFBLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsMENBQUUsR0FBRyxDQUFDO1FBQzlDLElBQUksR0FBRyxFQUFFO1lBQ0wsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1NBQ2xCOztZQUVHLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUNyQixJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxHQUFRLEtBQ3JELFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FDbEIsQ0FDSixDQUFDO0tBQ1Q7SUFFRCxPQUFPLFNBQVMsQ0FBQTtBQUNwQixDQUFDO0FBRUQsU0FBUyxlQUFlLENBQUMsSUFBaUIsRUFBRSxTQUFpQztJQUN6RSxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHO1FBQzlCLElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxHQUFHLEdBQUcsRUFBRSxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtRQUNyRCxJQUFJLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUM7S0FDbkMsQ0FBQyxDQUFBO0FBQ04sQ0FBQztBQUVELFNBQVMseUJBQXlCLENBQUMsR0FBUSxFQUFFLFFBQW1DLEVBQUUsSUFBaUIsRUFBRSxRQUFnQjtJQUNqSCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN6RCxNQUFNLElBQUksR0FBRyxHQUFHLENBQUMsYUFBYSxDQUFDLG9CQUFvQixDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQTtJQUV2RSxJQUFJLElBQUksRUFBRTtRQUNOLE1BQU0sU0FBUyxHQUFHLHlCQUF5QixDQUFDLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQ3ZFLGVBQWUsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUE7S0FDbkM7QUFDTCxDQUFDO1NBRWUsd0JBQXdCLENBQUMsR0FBUSxFQUFFLFFBQW1DLEVBQUUsSUFBaUIsRUFBRSxRQUFnQixFQUFFLFFBQWlCO0lBQzFJLElBQUksQ0FBQyxRQUFRLEVBQUU7UUFDWCxRQUFRLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztLQUMvQjtJQUNELE1BQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxhQUFhLENBQUMsb0JBQW9CLENBQUNDLG9CQUFXLENBQUMsUUFBUSxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUE7SUFFcEYsSUFBSSxJQUFJLEVBQUU7UUFDTixNQUFNLFNBQVMsR0FBRyx5QkFBeUIsQ0FBQyxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUN0RSxlQUFlLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFBO0tBQ25DO0FBQ0wsQ0FBQztTQUdlLGNBQWMsQ0FBQyxHQUFRLEVBQUUsUUFBbUM7SUFDeEUsTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDMUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUM7SUFFMUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQWlCO1FBQzNCLG9CQUFvQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzNCLHdCQUF3QixDQUFDLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0tBQ3JELENBQUMsQ0FBQTtJQUVGLE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxDQUFBO0lBQ3RELFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFpQjtRQUMvQixvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQixJQUFJLFFBQVEsQ0FBQyxjQUFjLEVBQUU7WUFDekIsd0JBQXdCLENBQUMsR0FBRyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7U0FDckQ7S0FDSixDQUFDLENBQUE7QUFDTixDQUFDO1NBRWUsYUFBYSxDQUFDLEdBQVEsRUFBRSxRQUFtQyxFQUFFLEVBQWUsRUFBRSxHQUFpQztJQUMzSCxNQUFNLEtBQUssR0FBRyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUNyRCxNQUFNLFFBQVEsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDekQsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQWlCO1FBQzVCLG9CQUFvQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzNCLHlCQUF5QixDQUFDLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0tBQzVELENBQUMsQ0FBQTtBQUNOLENBQUM7U0FFZSxrQkFBa0IsQ0FBQyxHQUFRLEVBQUUsUUFBbUM7SUFDNUUsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUMsT0FBTyxDQUFDLFlBQVksSUFBSSxvQkFBb0IsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFBO0lBQ3RGLEdBQUcsQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJO1FBQ2pDLElBQUksSUFBSSxDQUFDLElBQUksWUFBWUMscUJBQVksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNyRCxNQUFNLElBQUksR0FBVSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztZQUNuQyxNQUFNLFVBQVUsR0FBRyxHQUFHLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUN2RCxJQUFJLFVBQVUsQ0FBQyxLQUFLLEVBQUU7Z0JBQ2xCLFVBQVUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBZTtvQkFDckMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFBO29CQUNuRCxNQUFNLElBQUksR0FBRyxHQUFHLENBQUMsYUFBYSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUE7b0JBQ3hFLElBQUksSUFBSSxFQUFFO3dCQUNOLE1BQU0sU0FBUyxHQUFHLHlCQUF5QixDQUFDLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFBO3dCQUN2RSxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyx5QkFBeUIsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUE7d0JBQ3BHLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxZQUF5QixLQUFLLGVBQWUsQ0FBQyxZQUFZLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQTtxQkFDakc7aUJBQ0osQ0FBQyxDQUFBO2FBQ0w7U0FDSjtLQUNKLENBQUMsQ0FBQTtBQUNOOztBQzVITyxNQUFNLGdCQUFnQixHQUE4QjtJQUMxRCxnQkFBZ0IsRUFBRSxFQUFFO0lBQ3BCLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLFlBQVksRUFBRSxFQUFFO0lBQ2hCLDBCQUEwQixFQUFFLElBQUk7SUFDaEMscUJBQXFCLEVBQUUsRUFBRTtJQUN6QixjQUFjLEVBQUUsRUFBRTtJQUNsQixrQkFBa0IsRUFBRSxJQUFJO0lBQ3hCLFlBQVksRUFBRSxJQUFJO0lBQ2xCLGNBQWMsRUFBRSxJQUFJO0lBQ3BCLGVBQWUsRUFBRSxJQUFJO0NBQ3JCOztTQ3hCcUIsYUFBYSxDQUFDLEdBQVEsRUFBRSxJQUFXLEVBQUUsU0FBaUIsRUFBRSxLQUFhOztRQUN2RixHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFjO1lBQ3JDLElBQUksVUFBVSxHQUFpQixFQUFFLENBQUE7WUFDakMsSUFBSSxZQUFZLEdBQUcsS0FBSyxDQUFBO1lBQ3hCLElBQUksZ0JBQWdCLEdBQUcsS0FBSyxDQUFBO1lBQzVCLElBQUksY0FBYyxHQUFHLEtBQUssQ0FBQTtZQUMxQixJQUFJLGFBQWEsR0FBRyxLQUFLLENBQUE7WUFDekIsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSTtnQkFDdkIsSUFBRyxJQUFJLElBQUUsS0FBSyxJQUFJLENBQUMsWUFBWSxJQUFJLENBQUMsZ0JBQWdCLEVBQUM7b0JBQ2pELFlBQVksR0FBRyxJQUFJLENBQUE7aUJBQ3RCO2dCQUNELElBQUcsSUFBSSxJQUFJLEtBQUssSUFBSSxDQUFDLFlBQVksRUFBQztvQkFDOUIsSUFBRyxDQUFDLGdCQUFnQixFQUFDO3dCQUNqQixnQkFBZ0IsR0FBRyxJQUFJLENBQUE7d0JBQ3ZCLGFBQWEsR0FBRyxJQUFJLENBQUE7cUJBQ3ZCO3lCQUFNLElBQUcsQ0FBQyxjQUFjLEVBQUM7d0JBQ3RCLGNBQWMsR0FBRyxJQUFJLENBQUE7d0JBQ3JCLGFBQWEsR0FBRyxLQUFLLENBQUE7cUJBQ3hCO2lCQUNKO2dCQUNELElBQUcsYUFBYSxFQUFDO29CQUNiLE1BQU0sS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLEdBQUcsU0FBUyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUE7b0JBQzlDLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUE7b0JBQ3JDLElBQUcsV0FBVyxJQUFJLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFDO3dCQUNyQyxNQUFNLFVBQVUsR0FBRyxLQUFLLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUE7d0JBQzNFLE1BQU0sUUFBUSxHQUFHLFVBQVUsQ0FBQyxNQUFNLElBQUksQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQTt3QkFDdEYsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLFNBQVMsS0FBSyxRQUFRLEVBQUUsQ0FBQyxDQUFBO3FCQUMvQzt5QkFBTTt3QkFDSCxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsQ0FBQTtxQkFDN0I7aUJBQ0o7cUJBQU07b0JBQ0gsTUFBTSxLQUFLLEdBQUcsSUFBSSxNQUFNLENBQUMsY0FBYyxTQUFTLHFCQUFxQixFQUFFLEdBQUcsQ0FBQyxDQUFBO29CQUMzRSxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFBO29CQUMzQixJQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBQzt3QkFDakIsTUFBTSxVQUFVLEdBQUcsS0FBSyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFBO3dCQUMzRSxNQUFNLFFBQVEsR0FBRyxVQUFVLENBQUMsTUFBTSxJQUFJLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUE7d0JBQ3BGLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sUUFBUSxFQUFFLENBQUMsQ0FBQTtxQkFDckU7eUJBQU07d0JBQ0gsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtxQkFDeEI7aUJBQ0o7YUFDSixDQUFDLENBQUE7WUFDRixHQUFHLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFBO1NBQ2hELENBQUMsQ0FBQTtLQUNMOzs7TUN6Q29CLHFCQUFzQixTQUFRUixjQUFLO0lBVXBELFlBQVksR0FBUSxFQUFFLElBQVcsRUFBRSxJQUFZLEVBQUUsYUFBcUIsRUFBRSxRQUFlLEVBQUUsYUFBcUIsQ0FBQyxDQUFDLEVBQUUsZ0JBQXlCLEtBQUssRUFBRSxNQUFlLEtBQUs7UUFDbEssS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ1YsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUE7UUFDZCxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtRQUNoQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtRQUNoQixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtRQUN4QixJQUFJLENBQUMsTUFBTSxHQUFHLGFBQWEsR0FBRyxhQUFhLENBQUMsUUFBUSxFQUFFLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUE7UUFDMUgsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUE7UUFDNUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUE7UUFDbEMsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUE7S0FDakI7SUFFRCxNQUFNO1FBQ0YsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7WUFDdkMsR0FBRyxFQUFFLHlCQUF5QjtTQUNqQyxDQUFDLENBQUE7UUFDRixZQUFZLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWM7WUFDOUYsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsRUFBRSxjQUFjLENBQUMsQ0FBQTtTQUNyRCxDQUFDLENBQUE7S0FDTDtJQUVELGlCQUFpQixDQUFDLFNBQXlCLEVBQUMsV0FBbUI7UUFDM0QsTUFBTSxzQkFBc0IsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDO1lBQy9DLEdBQUcsRUFBRSxzQ0FBc0M7U0FDOUMsQ0FBQyxDQUFBO1FBQ0YsTUFBTSxxQkFBcUIsR0FBRyxzQkFBc0IsQ0FBQyxTQUFTLENBQUM7WUFDM0QsR0FBRyxFQUFFLG9DQUFvQztTQUM1QyxDQUFDLENBQUE7UUFDRixNQUFNLFlBQVksR0FBRyxJQUFJRSx3QkFBZSxDQUFDLHFCQUFxQixDQUFDLENBQUE7UUFDL0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSztZQUNyQixJQUFJLEtBQUssSUFBSSxXQUFXLEVBQUM7Z0JBQ3JCLFlBQVksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUE7YUFDOUI7U0FDSixDQUFDLENBQUE7UUFDRixZQUFZLENBQUMsUUFBUSxDQUFDLEtBQUs7WUFDdkIsSUFBRyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBQztnQkFDM0MsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUE7YUFDaEM7WUFDRCxJQUFHLENBQUMsS0FBSyxFQUFDO2dCQUNOLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFBO2FBQ2xDO1NBQ0osQ0FBQyxDQUFBO1FBQ0YsTUFBTSxVQUFVLEdBQUcsc0JBQXNCLENBQUMsU0FBUyxDQUFDO1lBQ2hELEdBQUcsRUFBRSxrQ0FBa0M7U0FDMUMsQ0FBQyxDQUFBO1FBQ0YsVUFBVSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQTtLQUNsQztJQUVELGtCQUFrQixDQUFDLFNBQXlCLEVBQUUsY0FBd0I7UUFDbEUsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHO1lBQ3pDLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1lBQzdDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLEVBQUUsV0FBVyxDQUFDLENBQUE7U0FDakQsQ0FBQyxDQUFBO1FBQ0YsY0FBYyxDQUFDLE9BQU8sQ0FBQyxLQUFLO1lBQ3hCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUE7U0FDM0MsQ0FBQyxDQUFBO1FBQ0YsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7WUFDcEMsR0FBRyxFQUFFLCtCQUErQjtTQUN2QyxDQUFDLENBQUE7UUFDRixNQUFNLFVBQVUsR0FBRyxJQUFJQyx3QkFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFBO1FBQzlDLFVBQVUsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUE7UUFDL0IsVUFBVSxDQUFDLE9BQU8sQ0FBQztZQUNmLElBQUcsSUFBSSxDQUFDLFVBQVUsSUFBSSxDQUFDLENBQUMsRUFBQztnQkFDckIsYUFBYSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7YUFDdkU7aUJBQUk7Z0JBQ0QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTTtvQkFDdEMsSUFBSSxVQUFVLEdBQWEsRUFBRSxDQUFBO29CQUM3QixJQUFHLElBQUksQ0FBQyxHQUFHLEVBQUM7d0JBQ1IsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHLEdBQUcsSUFBSSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQTt3QkFDMUYsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsV0FBVyxLQUFLLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQTtxQkFDM0U7eUJBQU07d0JBQ0gsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsV0FBVzs0QkFDekMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTs0QkFDckIsSUFBRyxXQUFXLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBQztnQ0FDOUIsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHLEdBQUcsSUFBSSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQTs2QkFDN0Y7eUJBQ0osQ0FBQyxDQUFBO3FCQUNMO29CQUVELElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQTtvQkFDdkQsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFBO2lCQUNmLENBQUMsQ0FBQTthQUNMO1lBRUQsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFBO1NBQ2YsQ0FBQyxDQUFBO1FBQ0YsTUFBTSxZQUFZLEdBQUcsSUFBSU0sNkJBQW9CLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDckQsWUFBWSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUM3QixZQUFZLENBQUMsT0FBTyxDQUFDLE1BQU0sSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUE7S0FDM0M7OztNQ3JHZ0IsbUJBQW9CLFNBQVFULGNBQUs7SUFTbEQsWUFBWSxHQUFRLEVBQUUsSUFBVyxFQUFFLElBQVksRUFBRSxLQUFhLEVBQUUsYUFBcUIsQ0FBQyxDQUFDLEVBQUUsZ0JBQXlCLEtBQUssRUFBRSxNQUFlLEtBQUs7UUFDekksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ1YsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUE7UUFDZCxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtRQUNoQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtRQUNoQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQTtRQUNsQixJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQTtRQUM1QixJQUFJLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQTtRQUNsQyxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQTtLQUNqQjtJQUVELE1BQU07UUFDRixNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQztZQUN0QyxHQUFHLEVBQUUseUJBQXlCO1NBQ2pDLENBQUMsQ0FBQTtRQUNGLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUE7S0FDOUI7SUFFRCxZQUFZLENBQUMsUUFBd0I7UUFDakMsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUN0QyxJQUFJLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQztRQUNyQixJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBUTtZQUNyQixDQUFDLENBQUMsY0FBYyxFQUFFLENBQUE7WUFDbEIsSUFBRyxJQUFJLENBQUMsVUFBVSxJQUFJLENBQUMsQ0FBQyxFQUFDO2dCQUNyQixhQUFhLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUE7YUFDcEU7aUJBQ0k7Z0JBQ0QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTTtvQkFDdEMsSUFBSSxVQUFVLEdBQWEsRUFBRSxDQUFBO29CQUM3QixJQUFHLElBQUksQ0FBQyxHQUFHLEVBQUM7d0JBQ1IsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHLEdBQUcsSUFBSSxJQUFJLE9BQU8sQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUE7d0JBQ3ZGLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLFdBQVcsS0FBSyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUE7cUJBQzNFO3lCQUFNO3dCQUNILE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLFdBQVc7NEJBQ3pDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7NEJBQ3JCLElBQUcsV0FBVyxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUM7Z0NBQzlCLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxhQUFhLEdBQUcsR0FBRyxHQUFHLElBQUksSUFBSSxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxDQUFBOzZCQUMxRjt5QkFDSixDQUFDLENBQUE7cUJBQ0w7b0JBQ0QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFBO29CQUN2RCxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7aUJBQ2YsQ0FBQyxDQUFBO2FBQ0w7WUFDRCxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7U0FDZixDQUFBO1FBQ0QsTUFBTSxPQUFPLEdBQUcsSUFBSUMsc0JBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUN2QyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFBO1FBQ3ZCLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQzVCLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLDBCQUEwQixDQUFDLENBQUE7S0FFdkQ7OztNQzVEZ0JTLGtCQUFpQixTQUFRVixjQUFLO0lBTS9DLFlBQVksR0FBUSxFQUFFLElBQVcsRUFBRSxJQUFZLEVBQUUsS0FBYztRQUMzRCxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDVixJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQTtRQUNkLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFBO1FBQ2hCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFBO1FBQ2hCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO0tBQ3JCO0lBRUQsTUFBTTtRQUNGLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDO1lBQ3RDLEdBQUcsRUFBRSxxQkFBcUI7U0FDN0IsQ0FBQyxDQUFBO1FBQ0YsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQTtLQUM5QjtJQUVELFlBQVksQ0FBQyxRQUF3QjtRQUNqQyxNQUFNLE9BQU8sR0FBRyxJQUFJRSx3QkFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQzdDLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQzVCLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNkLGFBQWEsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsTUFBTSxHQUFHLE9BQU8sQ0FBQyxDQUFBO1NBQ3RFLENBQUMsQ0FBQTtLQUNMOzs7TUN6QmdCLGdCQUFpQixTQUFRRixjQUFLO0lBVy9DLFlBQVksR0FBUSxFQUFFLElBQVcsRUFBRSxJQUFZLEVBQUUsS0FBYSxFQUFFLFFBQWUsRUFBRSxhQUFxQixDQUFDLENBQUMsRUFBRSxnQkFBeUIsS0FBSyxFQUFFLE1BQWUsS0FBSztRQUMxSixLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDVixJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQTtRQUNkLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFBO1FBQ2hCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFBO1FBQ2hCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO1FBQ2xCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBQ3hCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFBO1FBQ3BCLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFBO1FBQzVCLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFBO1FBQ2xDLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFBO0tBQ2pCO0lBRUQsTUFBTTtRQUNGLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDO1lBQ3RDLEdBQUcsRUFBRSx5QkFBeUI7U0FDakMsQ0FBQyxDQUFBO1FBQ0YsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQTtLQUM5QjtJQUVELFlBQVksQ0FBQyxRQUF3QjtRQUNqQyxNQUFNLFFBQVEsR0FBRyxJQUFJVywwQkFBaUIsQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUNoRCxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFBO1FBQ2hELE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFBO1FBQ25DLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQ2xDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUc7WUFDM0IsUUFBUSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7U0FDL0MsQ0FBQyxDQUFDO1FBQ0gsSUFBRyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUM7WUFDMUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7U0FDaEM7UUFDRCxZQUFZLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWM7WUFDOUYsY0FBYyxDQUFDLE9BQU8sQ0FBQyxLQUFLLElBQUksUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQTtZQUNqRSxJQUFHLGNBQWMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFDO2dCQUNuQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTthQUNoQztZQUNELFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxJQUFJLFdBQVcsR0FBRyxLQUFLLEdBQUcsRUFBRSxDQUFDLENBQUE7WUFDN0UsTUFBTSxZQUFZLEdBQUcsSUFBSVIsd0JBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQTtZQUNsRCxZQUFZLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQztpQkFDOUIsT0FBTyxDQUFDLFdBQVcsQ0FBQztpQkFDcEIsT0FBTyxDQUFDO2dCQUNMLElBQUcsSUFBSSxDQUFDLFVBQVUsSUFBSSxDQUFDLENBQUMsRUFBQztvQkFDckIsSUFBRyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksRUFBRSxFQUFDO3dCQUNwQyxhQUFhLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO3FCQUMvRDtpQkFDSjtxQkFBTTtvQkFDSCxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNO3dCQUN0QyxJQUFJLFVBQVUsR0FBYSxFQUFFLENBQUE7d0JBQzdCLElBQUcsSUFBSSxDQUFDLEdBQUcsRUFBQzs0QkFDUixVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsYUFBYSxHQUFHLEdBQUcsR0FBRyxJQUFJLElBQUksUUFBUSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsQ0FBQTs0QkFDeEYsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsV0FBVyxLQUFLLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQTt5QkFDM0U7NkJBQU07NEJBQ0gsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsV0FBVztnQ0FDekMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtnQ0FDckIsSUFBRyxXQUFXLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBQztvQ0FDOUIsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHLEdBQUcsSUFBSSxJQUFJLFFBQVEsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUE7aUNBQzNGOzZCQUNKLENBQUMsQ0FBQTt5QkFDTDt3QkFDRCxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUE7d0JBQ3ZELElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQTtxQkFDZixDQUFDLENBQUE7aUJBQ0w7Z0JBQ0QsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFBO2FBQ2YsQ0FBQSxDQUFDLENBQUE7U0FDTCxDQUFDLENBQUE7S0FFTDs7O01DaEZnQixnQkFBaUIsU0FBUUgsY0FBSztJQVEvQyxZQUFZLE1BQXlCLEVBQUUsVUFBa0IsRUFBRSxJQUFXLEVBQUUsYUFBc0IsRUFBRSxHQUFZO1FBQ3hHLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDakIsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUE7UUFDNUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUE7UUFDbEMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUE7UUFDaEIsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUE7S0FDakI7SUFFRCxNQUFNO1FBQ0YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQTtRQUN4QyxNQUFNLG9CQUFvQixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDdkQsTUFBTSxrQkFBa0IsR0FBRyxvQkFBb0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQTtRQUMzRCxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUE7UUFDMUMsTUFBTSxXQUFXLEdBQUcsSUFBSUMsc0JBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFBO1FBQ3pELFdBQVcsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUE7UUFDeEMsTUFBTSxtQkFBbUIsR0FBRyxvQkFBb0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQTtRQUM1RCxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUE7UUFDNUMsTUFBTSxZQUFZLEdBQUcsSUFBSUEsc0JBQWEsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFBO1FBQzNELFlBQVksQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUE7UUFDMUMsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7WUFDM0MsR0FBRyxFQUFFLDhCQUE4QjtTQUN0QyxDQUFDLENBQUE7UUFDRixNQUFNLFVBQVUsR0FBRyxJQUFJRSx3QkFBZSxDQUFDLGFBQWEsQ0FBQyxDQUFBO1FBQ3JELFVBQVUsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUE7UUFDL0IsVUFBVSxDQUFDLE9BQU8sQ0FBQztZQUNmLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU07Z0JBQ3RDLElBQUksVUFBVSxHQUFhLEVBQUUsQ0FBQTtnQkFDN0IsSUFBRyxJQUFJLENBQUMsR0FBRyxFQUFDO29CQUNSLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxXQUFXLENBQUMsUUFBUSxFQUFFLEdBQUcsSUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHLEdBQUcsSUFBSSxJQUFJLFlBQVksQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUE7b0JBQ3pHLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLFdBQVcsS0FBSyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUE7aUJBQzNFO3FCQUFNO29CQUNILE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLFdBQVc7d0JBQ3pDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7d0JBQ3JCLElBQUcsV0FBVyxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUM7NEJBQzlCLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxXQUFXLENBQUMsUUFBUSxFQUFFLEdBQUcsSUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHLEdBQUcsSUFBSSxJQUFJLFlBQVksQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUE7eUJBQzVHO3FCQUNKLENBQUMsQ0FBQTtpQkFDTDtnQkFDRCxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUE7Z0JBQ3ZELElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQTthQUNmLENBQUMsQ0FBQTtTQUNMLENBQUMsQ0FBQTtRQUNGLE1BQU0sWUFBWSxHQUFHLElBQUlNLDZCQUFvQixDQUFDLGFBQWEsQ0FBQyxDQUFBO1FBQzVELFlBQVksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7UUFDN0IsWUFBWSxDQUFDLE9BQU8sQ0FBQztZQUNqQixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7U0FDZixDQUFDLENBQUE7S0FHTDs7O01DckRnQixnQkFBaUIsU0FBUVQsY0FBSztJQVEvQyxZQUFZLE1BQXlCLEVBQUUsSUFBVSxFQUFFLFVBQWtCLEVBQUUsSUFBWSxFQUFFLGFBQXNCLEVBQUUsR0FBWTtRQUNySCxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ2pCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFBO1FBQ2hCLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFBO1FBQzVCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO1FBQ3BCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFBO1FBQ2hCLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFBO1FBQ2xDLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFBO0tBQ2pCO0lBRUQsTUFBTTtRQUNGLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLHdCQUF3QixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUMsRUFBRSxHQUFHLEtBQUssR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFBO1FBQzdHLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDNUMsTUFBTSx5QkFBeUIsR0FBRyxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDdkQsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJVywwQkFBaUIsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFBO1FBQ3pFLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsY0FBYyxDQUFDLENBQUE7UUFDakQsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUMxQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLE9BQU87WUFDN0MsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFBO1NBQ3pELENBQUMsQ0FBQTtRQUNGLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxLQUFLO1lBQzNCLElBQUcsS0FBSyxJQUFJLE9BQU8sRUFBQztnQkFDaEIsTUFBTSxhQUFhLEdBQUcsSUFBSSxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtnQkFDakgsYUFBYSxDQUFDLElBQUksRUFBRSxDQUFBO2dCQUNwQixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7YUFDZjtpQkFBTTtnQkFDSCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsSUFBSSxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO2dCQUN6RixJQUFHLEtBQUssQ0FBQyxrQkFBa0IsS0FBSyxLQUFLLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBQztvQkFDbEYsSUFBRyxLQUFLLENBQUMsT0FBTyxFQUFDO3dCQUNiLE1BQU0sVUFBVSxHQUFHLElBQUkscUJBQXFCLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO3dCQUN2SSxVQUFVLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxxQkFBcUIsS0FBSyxFQUFFLENBQUMsQ0FBQTt3QkFDeEQsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFBO3FCQUNwQjt5QkFBTTt3QkFDSCxNQUFNLFVBQVUsR0FBRyxJQUFJQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7d0JBQ2xJLFVBQVUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLG9CQUFvQixLQUFLLEVBQUUsQ0FBQyxDQUFBO3dCQUN2RCxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUE7cUJBQ3BCO2lCQUNKO3FCQUFNO29CQUNILE1BQU0sVUFBVSxHQUFHLElBQUksbUJBQW1CLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtvQkFDekgsVUFBVSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsbUJBQW1CLEtBQUssRUFBRSxDQUFDLENBQUE7b0JBQ3RELFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtpQkFDcEI7Z0JBQ0QsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFBO2FBQ2Y7U0FDSixDQUFDLENBQUE7S0FDTDs7O01DeERnQixrQkFBbUIsU0FBUVosY0FBSztJQUtqRCxZQUFZLE1BQXlCLEVBQUUsSUFBVTtRQUM3QyxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ2pCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFBO1FBQ2hCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO0tBQ3ZCO0lBRUQsTUFBTTtRQUNGLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGlDQUFpQyxDQUFDLENBQUE7UUFDdkQsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7WUFDdEMsR0FBRyxFQUFFLHlCQUF5QjtTQUNqQyxDQUFDLENBQUE7UUFDRixNQUFNLFFBQVEsR0FBRyxJQUFJVywwQkFBaUIsQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUNoRCxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFBO1FBQ2hELFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFDLGFBQWEsQ0FBQyxDQUFBO1FBQ3BDLFFBQVEsQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFDLEtBQUssQ0FBQyxDQUFBO1FBQ2pDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU07WUFDL0MsSUFBSSxZQUFZLEdBQUcsS0FBSyxDQUFBO1lBQ3hCLElBQUksZ0JBQWdCLEdBQUcsS0FBSyxDQUFBO1lBQzVCLElBQUksY0FBYyxHQUFHLEtBQUssQ0FBQTtZQUMxQixJQUFJLGFBQWEsR0FBRyxLQUFLLENBQUE7WUFDaEIsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtnQkFDeEMsSUFBRyxJQUFJLElBQUUsS0FBSyxJQUFJLENBQUMsWUFBWSxJQUFJLENBQUMsZ0JBQWdCLEVBQUM7b0JBQ2hFLFlBQVksR0FBRyxJQUFJLENBQUE7aUJBQ25CO2dCQUNELElBQUcsSUFBSSxJQUFJLEtBQUssSUFBSSxDQUFDLFlBQVksRUFBQztvQkFDakMsSUFBRyxDQUFDLGdCQUFnQixFQUFDO3dCQUNwQixnQkFBZ0IsR0FBRyxJQUFJLENBQUE7d0JBQ3ZCLGFBQWEsR0FBRyxJQUFJLENBQUE7cUJBQ3BCO3lCQUFNLElBQUcsQ0FBQyxjQUFjLEVBQUM7d0JBQ3pCLGNBQWMsR0FBRyxJQUFJLENBQUE7d0JBQ3JCLGFBQWEsR0FBRyxLQUFLLENBQUE7cUJBQ3JCO2lCQUNEO2dCQUNELElBQUcsYUFBYSxFQUFDO29CQUNELFFBQVEsQ0FBQyxTQUFTLENBQUMsZUFBZSxVQUFVLEVBQUUsRUFBRSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxHQUFHLEtBQUssR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFBO2lCQUM5RztxQkFBSTtvQkFDRCxRQUFRLENBQUMsU0FBUyxDQUFDLFFBQVEsVUFBVSxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsR0FBRyxLQUFLLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQTtpQkFDdkc7YUFDSixDQUFDLENBQUE7WUFDRixRQUFRLENBQUMsUUFBUSxDQUFDLEtBQUs7Z0JBQ25CLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUE7Z0JBQzNELE1BQU0sUUFBUSxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtnQkFDOUIsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO2dCQUN4QyxNQUFNLGFBQWEsR0FBRyxRQUFRLElBQUksYUFBYSxHQUFHLElBQUksR0FBRyxLQUFLLENBQUE7Z0JBQzlELE1BQU0sR0FBRyxHQUFHLFFBQVEsSUFBSSxLQUFLLEdBQUcsSUFBSSxHQUFHLEtBQUssQ0FBQTtnQkFDNUMsTUFBTSxLQUFLLEdBQUcsSUFBSSxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsVUFBVSxDQUFDLEVBQUUsYUFBYSxFQUFFLEdBQUcsQ0FBQyxDQUFBO2dCQUMxSCxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7Z0JBQ1osS0FBSyxDQUFDLElBQUksRUFBRSxDQUFBO2FBQ2YsQ0FBQyxDQUFBO1NBQ0wsQ0FBQyxDQUFBO0tBQ0w7OztBQ2pETCxNQUFNLEtBQUssR0FBMkI7SUFDbEMsT0FBTyxFQUFFLG1CQUFtQjtJQUM1QixRQUFRLEVBQUUsb0NBQW9DO0lBQzlDLE9BQU8sRUFBRSxxQ0FBcUM7SUFDOUMsT0FBTyxFQUFFLGtDQUFrQztDQUM5QyxDQUFBO0FBRUQsTUFBTSxrQkFBa0I7SUFFcEIsWUFBWSxHQUFXO1FBQ25CLE1BQU0sYUFBYSxHQUFHLElBQUksTUFBTSxDQUFDLGtIQUFrSCxDQUFDLENBQUE7UUFDcEosTUFBTSxTQUFTLEdBQUcsSUFBSSxNQUFNLENBQUMsNEdBQTRHLENBQUMsQ0FBQTtRQUNoSixNQUFNLGdCQUFnQixHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUE7UUFDM0MsTUFBTSxjQUFjLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUMzQyxJQUFHLGdCQUFnQixFQUFDO1lBQ2hCLElBQUksQ0FBQyxJQUFJLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUE7WUFDdEMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQTtZQUM1RCxJQUFJLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQTtZQUM1QixRQUFRLElBQUksQ0FBQyxJQUFJO2dCQUNiLEtBQUssT0FBTztvQkFDUixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztvQkFDcEIsTUFBTTtnQkFDVixLQUFLLE9BQU87b0JBQ1IsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7b0JBQ3BCLE1BQU07YUFHYjtZQUNELElBQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFBO1NBQ3JDO2FBQU0sSUFBRyxjQUFjLEVBQUM7WUFDckIsSUFBSSxDQUFDLElBQUksR0FBRyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUE7U0FDdkM7YUFBTTtZQUNILE1BQU0sS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUE7WUFDekMsTUFBTSxLQUFLLENBQUE7U0FDZDtLQUNKO0lBRUQsUUFBUTtRQUNKLElBQUksTUFBTSxHQUEyQixFQUFFLENBQUE7UUFDdkMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUUsS0FBSztZQUMvQixNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsTUFBTSxDQUFBO1NBQ3pCLENBQUMsQ0FBQTtRQUNGLE9BQU8sSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQTtLQUM3RTs7O0FDeENMLE1BQU0sZ0JBQWdCO0lBR2xCLFlBQVksUUFBbUI7UUFDM0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUE7S0FDM0I7SUFFRCxHQUFHO1FBQ0MsTUFBTSxzQkFBc0IsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLGdCQUFnQixFQUFFLENBQUMsTUFBTSxDQUFDLElBQUk7WUFDeEYsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDdkUsT0FBTyxLQUFLLENBQUMsV0FBVzttQkFDakIsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQzttQkFDcEQsS0FBSyxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQTtTQUM5RCxDQUFDLENBQUE7UUFDRixPQUFPLHNCQUFzQixDQUFBO0tBQ2hDO0lBRUQsR0FBRyxDQUFDLElBQVk7UUFDWixNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxDQUFBO1FBQ3RFLElBQUcsYUFBYSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUM7WUFDeEIsTUFBTSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsMkJBQTJCLENBQUMsQ0FBQTtZQUNwRCxNQUFNLEtBQUssQ0FBQTtTQUNkO1FBQ0QsSUFBSSxhQUFhLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtZQUMzQixNQUFNLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO1lBQzlDLE1BQU0sS0FBSyxDQUFBO1NBQ2Q7UUFDRCxPQUFPLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQTtLQUUxQjtJQUVELE9BQU8sQ0FBQyxJQUFZO1FBQ2hCLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLENBQUE7UUFDbEUsSUFBRyxhQUFhLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBQztZQUN4QixNQUFNLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQywyQkFBMkIsQ0FBQyxDQUFBO1lBQ3BELE1BQU0sS0FBSyxDQUFBO1NBQ2Q7UUFDRCxJQUFJLGFBQWEsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO1lBQzNCLE1BQU0sS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLHFCQUFxQixDQUFDLENBQUE7WUFDOUMsTUFBTSxLQUFLLENBQUE7U0FDZDtRQUNELE9BQU8sYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFBO0tBRTFCO0NBQ0o7QUFFRCxNQUFNLFNBQVM7SUFDWCxZQUFZLE1BQXlCLEVBQUUsSUFBWTtRQUMvQyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQTtRQUNwQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUk7WUFDaEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ3pDLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFBO0tBQ3ZCO0lBRUQsWUFBWTtRQUNSLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQTtRQUMxRCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksR0FBRyxjQUFjLEdBQUcsSUFBSSxDQUFDLElBQUksS0FBSyxDQUFDLENBQUE7UUFDdEgsSUFBRyxLQUFLLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBQztZQUNqQixNQUFNLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyx1Q0FBdUMsQ0FBQyxDQUFBO1lBQ2hFLE1BQU0sS0FBSyxDQUFBO1NBQ2Q7YUFBTTtZQUNILE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQ2xCO0tBQ0o7SUFFRCxhQUFhO1FBQ1QsT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxNQUFNO1lBQy9CLElBQUk7Z0JBQ0EsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFBO2dCQUNoQyxJQUFJLFVBQVUsR0FBOEIsRUFBRSxDQUFBO2dCQUM5QyxJQUFJLE1BQU0sR0FBYSxFQUFFLENBQUE7Z0JBQ3pCLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU07b0JBQ3hDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUk7d0JBQzNCLElBQUk7NEJBQ0EsTUFBTSxTQUFTLEdBQUcsSUFBSSxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQTs0QkFDOUMsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTt5QkFDN0I7d0JBQUMsT0FBTyxLQUFLLEVBQUU7NEJBQ1osTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTt5QkFDckI7cUJBQ0osQ0FBQyxDQUFBO29CQUNGLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFBO29CQUM1QixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQTtvQkFDcEIsT0FBTyxFQUFFLENBQUE7aUJBQ1osQ0FBQyxDQUFBO2FBQ0w7WUFBQyxPQUFPLEtBQUssRUFBRTtnQkFDWixNQUFNLENBQUMsS0FBSyxDQUFDLENBQUE7YUFDaEI7U0FDSixDQUFDLENBQUE7S0FDTDtJQUVELGVBQWUsQ0FBQyxPQUFlLEVBQUUsVUFBb0IsRUFBRSxPQUFlLEVBQUUsSUFBeUI7UUFDN0YsT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxNQUFNO1lBRS9CLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQTtZQUNoQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNO2dCQUN4QyxJQUFHLElBQUksRUFBQztvQkFDSixJQUFJLFVBQVUsR0FBYSxFQUFFLENBQUE7b0JBQzdCLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUk7d0JBQzNCLElBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUM7NEJBQzFCLElBQUcsT0FBTyxJQUFJLE9BQU8sRUFBQztnQ0FDbEIsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQTs2QkFDM0I7aUNBQU07Z0NBQ0gsSUFBSSxRQUFRLEdBQXdCLEVBQUUsQ0FBQTtnQ0FDdEMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQTtnQ0FDMUIsUUFBUSxDQUFDLFNBQVMsQ0FBQyxHQUFHLFVBQVUsQ0FBQTtnQ0FDaEMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLE9BQU8sTUFBTSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQTs2QkFDOUQ7eUJBQ0o7NkJBQU07NEJBQ0gsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTt5QkFDeEI7cUJBQ0osQ0FBQyxDQUFBO29CQUNGLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQTtpQkFDNUQ7cUJBQU07b0JBQ0gsSUFBSSxRQUFRLEdBQXdCLEVBQUUsQ0FBQTtvQkFDdEMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQTtvQkFDMUIsUUFBUSxDQUFDLFNBQVMsQ0FBQyxHQUFHLFVBQVUsQ0FBQTtvQkFDaEMsTUFBTSxLQUFLLEtBQUssT0FBTyxNQUFNLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFBO29CQUN4RCxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQTtpQkFDN0M7Z0JBQ0QsT0FBTyxFQUFFLENBQUE7YUFDWixDQUFDLENBQUE7U0FDTCxDQUFDLENBQUE7S0FDTDtJQUVELGVBQWUsQ0FBQyxJQUF3QjtRQUNwQyxPQUFPLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU07WUFDL0IsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFBO1lBQ2hDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU07Z0JBQ3hDLElBQUksVUFBVSxHQUFhLEVBQUUsQ0FBQTtnQkFDN0IsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSTtvQkFDM0IsSUFBRyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFDO3dCQUMzQixVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO3FCQUN4QjtpQkFDSixDQUFDLENBQUE7Z0JBQ0YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFBO2dCQUN6RCxPQUFPLEVBQUUsQ0FBQTthQUNaLENBQUMsQ0FBQTtTQUVMLENBQUMsQ0FBQTtLQUNMO0NBQ0o7QUFFRCxTQUFlLGVBQWUsQ0FBQyxNQUF5QixFQUFFLElBQVk7O1FBQ2xFLE9BQU8sSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsTUFBTTtZQUMvQixNQUFNLFNBQVMsR0FBRyxJQUFJLFNBQVMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDOUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLElBQUksQ0FBQztnQkFDM0IsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFBO2FBQ3JCLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLO2dCQUNYLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQTthQUNoQixDQUFDLENBQUE7U0FDTCxDQUFDLENBQUE7S0FDTDs7O01DL0pvQix1QkFBd0IsU0FBUVgsY0FBSztJQVF0RCxZQUFZLEdBQVEsRUFBRSxTQUFvQixFQUFFLElBQXlCO1FBQ2pFLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUxkLFNBQUksR0FBVyxPQUFPLENBQUE7UUFDdEIsWUFBTyxHQUFhLEVBQUUsQ0FBQTtRQUN0QixTQUFJLEdBQVcsRUFBRSxDQUFBO1FBSWIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUE7UUFDaEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUE7UUFDMUIsSUFBRyxJQUFJLENBQUMsSUFBSSxFQUFDO1lBQ1QsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxPQUFPLENBQUE7WUFDckMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQTtZQUNoQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFBO1NBQzdCO0tBQ0o7SUFFRCxNQUFNOztRQUVGLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxHQUFHLDhCQUE4QixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUE7O1FBR2xILE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsQ0FBQTtRQUNyRCxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDbEMsTUFBTSxTQUFTLEdBQUcsSUFBSUMsc0JBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFBO1FBQ3ZELElBQUksQ0FBQyxJQUFJLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLFNBQVMsQ0FBQyxjQUFjLENBQUMsZ0NBQWdDLENBQUMsQ0FBQTs7UUFHM0csTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxDQUFBO1FBQ25ELE1BQU0sUUFBUSxHQUFHLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUNqRCxNQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQzVDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQTtRQUNsQyxRQUFRLENBQUMsTUFBTSxDQUFDLHdCQUF3QixDQUFDLENBQUE7UUFDekMsTUFBTSxDQUFDLG1CQUFtQixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksWUFBWSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJO1lBQy9FLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsc0JBQXNCLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUE7U0FDekUsQ0FBQyxDQUFBOztRQUdGLE1BQU0sbUJBQW1CLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsRUFBQyxHQUFHLEVBQUUsc0NBQXNDLEVBQUMsQ0FBQyxDQUFBO1FBQ25HLE1BQU0sZUFBZSxHQUFHLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxFQUFDLEdBQUcsRUFBRSx5Q0FBeUMsRUFBQyxDQUFDLENBQUE7UUFDdkcsZUFBZSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUNqQyxNQUFNLGtCQUFrQixHQUFHLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxFQUFDLEdBQUcsRUFBRSxvQ0FBb0MsRUFBQyxDQUFDLENBQUE7UUFDckcsTUFBTSxVQUFVLEdBQUcsSUFBSVUsMEJBQWlCLENBQUMsa0JBQWtCLENBQUMsQ0FBQTtRQUM1RCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHO1lBQzFCLFVBQVUsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO1NBQ3hDLENBQUMsQ0FBQTtRQUNGLElBQUcsSUFBSSxDQUFDLElBQUksRUFBQztZQUNULFVBQVUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1NBQ2pDOztRQUdELE1BQU0scUJBQXFCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsRUFBQyxHQUFHLEVBQUUsc0NBQXNDLEVBQUMsQ0FBQyxDQUFBO1FBQ3JHLE1BQU0saUJBQWlCLEdBQUcscUJBQXFCLENBQUMsU0FBUyxDQUFDLEVBQUMsR0FBRyxFQUFFLDZDQUE2QyxFQUFDLENBQUMsQ0FBQTtRQUMvRyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDbkMsTUFBTSxZQUFZLEdBQUcsSUFBSUUsMEJBQWlCLENBQUMscUJBQXFCLENBQUMsQ0FBQTtRQUNqRSxZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUE7UUFDN0IsWUFBWSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFBO1FBQzlCLElBQUksQ0FBQyxJQUFJLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLE9BQU8sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsY0FBYyxDQUFDLGdDQUFnQyxDQUFDLENBQUE7UUFDdEosQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksT0FBTyxHQUFHLHFCQUFxQixDQUFDLElBQUksRUFBRSxHQUFHLHFCQUFxQixDQUFDLElBQUksRUFBRSxDQUFBOztRQUdoRyxVQUFVLENBQUMsUUFBUSxDQUFDLElBQUk7WUFDcEIsSUFBSSxJQUFJLE9BQU8sR0FBRyxxQkFBcUIsQ0FBQyxJQUFJLEVBQUUsR0FBRyxxQkFBcUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtZQUM3RSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtTQUNuQixDQUFDLENBQUE7UUFDRixZQUFZLENBQUMsUUFBUSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBQ3hGLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxNQUFLLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUEsRUFBQyxDQUFDLENBQUE7O1FBR2hGLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEVBQUMsR0FBRyxFQUFFLCtCQUErQixFQUFDLENBQUMsQ0FBQTtRQUMvRSxNQUFNLFVBQVUsR0FBRyxJQUFJVix3QkFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFBO1FBQzlDLFVBQVUsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUE7UUFDL0IsVUFBVSxDQUFDLE9BQU8sQ0FBQztZQUNmLElBQUksQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUM3RSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7U0FDZixDQUFDLENBQUE7UUFDRixJQUFHLElBQUksQ0FBQyxJQUFJLEVBQUM7WUFDVCxNQUFNLFlBQVksR0FBRyxJQUFJQSx3QkFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFBO1lBQ2hELFlBQVksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7WUFDN0IsWUFBWSxDQUFDLE9BQU8sQ0FBQztnQkFDakIsTUFBTSxZQUFZLEdBQUcsSUFBSUgsY0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtnQkFDeEMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQTtnQkFDOUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxPQUFPLENBQUMsZ0NBQWdDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxtQkFBbUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFBO2dCQUNuSSxNQUFNLGFBQWEsR0FBRyxZQUFZLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxFQUFDLEdBQUcsRUFBRSwrQkFBK0IsRUFBQyxDQUFDLENBQUE7Z0JBQzlGLE1BQU0sYUFBYSxHQUFHLElBQUlHLHdCQUFlLENBQUMsYUFBYSxDQUFDLENBQUE7Z0JBQ3hELGFBQWEsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUE7Z0JBQ2xDLGFBQWEsQ0FBQyxPQUFPLENBQUM7b0JBQ2xCLElBQUksQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtvQkFDekMsWUFBWSxDQUFDLEtBQUssRUFBRSxDQUFBO29CQUNwQixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7aUJBQ2YsQ0FBQyxDQUFBO2dCQUNGLE1BQU0sYUFBYSxHQUFHLElBQUlNLDZCQUFvQixDQUFDLGFBQWEsQ0FBQyxDQUFBO2dCQUM3RCxhQUFhLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFBO2dCQUM5QixhQUFhLENBQUMsT0FBTyxDQUFDLE1BQU0sSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUE7Z0JBQ3pDLFlBQVksQ0FBQyxJQUFJLEVBQUUsQ0FBQTthQUN0QixDQUFDLENBQUE7U0FDTDtRQUNELE1BQU0sWUFBWSxHQUFHLElBQUlBLDZCQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFBO1FBQ3JELFlBQVksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7UUFDN0IsWUFBWSxDQUFDLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFBO0tBQzNDOzs7TUN0R2dCLDZCQUE4QixTQUFRVCxjQUFLO0lBSzVELFlBQVksTUFBeUIsRUFBRSxJQUFXO1FBQzlDLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDakIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUE7UUFDaEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7S0FDdkI7SUFFRCxNQUFNO1FBQ0YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsNEJBQTRCLENBQUMsQ0FBQTtRQUNsRCxlQUFlLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTO1lBQzNELElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGlDQUFpQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQTtZQUN2RSxNQUFNLGVBQWUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxDQUFBO1lBQ2xELE1BQU0sTUFBTSxHQUFHLElBQUlXLDBCQUFpQixDQUFDLGVBQWUsQ0FBQyxDQUFBO1lBQ3JELE1BQU0sQ0FBQyxTQUFTLENBQUMscUJBQXFCLEVBQUUseUJBQXlCLENBQUMsQ0FBQTtZQUNsRSxTQUFTLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJO2dCQUM3QixNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO2FBQ3pDLENBQUMsQ0FBQTtZQUVGLE1BQU0sQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLHlCQUF5QixDQUFDLENBQUE7WUFDMUQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVE7Z0JBQ3JCLElBQUcsUUFBUSxJQUFJLFdBQVcsRUFBQztvQkFDdkIsTUFBTSxLQUFLLEdBQUcsSUFBSSx1QkFBdUIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsQ0FBQTtvQkFDckUsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFBO29CQUNaLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQTtpQkFDZjtxQkFBTTtvQkFDSCxNQUFNLEtBQUssR0FBRyxJQUFJLHVCQUF1QixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO29CQUNwSSxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUE7b0JBQ1osSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFBO2lCQUNmO2FBQ0osQ0FBQyxDQUFBO1NBQ0wsQ0FBQyxDQUFBO0tBQ0w7OztBQzNCTCxTQUFTLE1BQU0sQ0FBQyxRQUE0QjtJQUN4QyxPQUFRLFFBQWlCLENBQUMsT0FBTyxLQUFLLFNBQVMsQ0FBQTtBQUNuRCxDQUFDO0FBRUQsU0FBUyxRQUFRLENBQUMsUUFBNEI7SUFDMUMsT0FBUSxRQUF3QixDQUFDLE1BQU0sS0FBSyxTQUFTLENBQUE7QUFDekQsQ0FBQztNQUVvQixXQUFXO0lBUTVCLFlBQVksTUFBeUIsRUFBRSxJQUFXLEVBQUUsUUFBNEI7UUFDNUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUE7UUFDaEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7UUFDcEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUE7S0FDM0I7SUFFSixxQkFBcUI7UUFDcEIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ3BFLElBQUcsS0FBSyxDQUFDLFdBQVcsRUFBQztrQkFDZCxLQUE0QixLQUFLLENBQUMsV0FBVyxFQUEvQixVQUFVLGNBQXhCLFlBQXlCLEVBQW9CO1lBQ25ELE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUc7Z0JBQ2xDLElBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMscUJBQXFCLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFDO29CQUMzRCxPQUFPLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtpQkFDdEI7YUFDRCxDQUFDLENBQUE7WUFDRixJQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUM7Z0JBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsQ0FBQTthQUFDO1lBQ3ZELElBQUksa0JBQWtCLEdBQUcsS0FBSyxDQUFBO1lBQzlCLElBQUksZUFBZSxHQUFhLEVBQUUsQ0FBQTtZQUNsQyxJQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFDO2dCQUNoRCxNQUFNLFNBQVMsR0FBRyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUE7Z0JBQ3pDLGVBQWUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTO29CQUNyRCxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQTtvQkFDMUIsZUFBZSxHQUFHLFNBQVMsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7b0JBQzdELGtCQUFrQixHQUFHLElBQUksQ0FBQTtvQkFDekIsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRzt3QkFDbEMsSUFBRyxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxJQUFJLFdBQVcsRUFBQzs0QkFDdkQsT0FBTyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUE7eUJBQ3RCO3FCQUNELENBQUMsQ0FBQTtvQkFDRixNQUFNLDZCQUE2QixHQUFHLElBQUksNkJBQTZCLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUE7b0JBQ25ILElBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBQzt3QkFDeEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsQ0FBQTt3QkFDNUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJOzRCQUMxQixJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFBOzRCQUNwQixJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxDQUFBOzRCQUN2RCxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRztnQ0FDaEIsNkJBQTZCLENBQUMsSUFBSSxFQUFFLENBQUE7NkJBQ3BDLENBQUMsQ0FBQTt5QkFDRixDQUFDLENBQUE7cUJBQ0Y7eUJBQUk7d0JBQ0osSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsNkJBQTZCLEVBQUUsNkJBQTZCLENBQUMsQ0FBQTt3QkFDckYsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsc0JBQXNCLENBQUMsR0FBRyxNQUFNLDZCQUE2QixDQUFDLElBQUksRUFBRSxDQUFBO3FCQUN6RjtvQkFFRCxJQUFJLENBQUMsb0NBQW9DLENBQUMsVUFBVSxDQUFFLENBQUMsSUFBSSxDQUFDO3dCQUMzRCxJQUFJLENBQUMscUNBQXFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxrQkFBa0IsRUFBRSxlQUFlLENBQUMsQ0FBQyxJQUFJLENBQUM7NEJBQy9GLElBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBQztnQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksRUFBRSxDQUFBOzZCQUFDOzRCQUN2RCxJQUFJLENBQUMsMkJBQTJCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBO3lCQUM3QyxDQUFDLENBQUE7cUJBQ0YsQ0FBQyxDQUFBO2lCQUNGLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLO29CQUNkLElBQUksQ0FBQyxvQ0FBb0MsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUM7d0JBQzFELElBQUksQ0FBQyxxQ0FBcUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDOzRCQUMxRCxJQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUM7Z0NBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsQ0FBQTs2QkFBQzs0QkFDdkQsSUFBSSxDQUFDLDJCQUEyQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQTt5QkFDN0MsQ0FBQyxDQUFBO3FCQUNGLENBQUMsQ0FBQTtpQkFDRixDQUFDLENBQUE7YUFDRjtpQkFBTTtnQkFDTixJQUFJLENBQUMsb0NBQW9DLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDO29CQUMxRCxJQUFJLENBQUMscUNBQXFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQzt3QkFDMUQsSUFBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFDOzRCQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxFQUFFLENBQUE7eUJBQUM7d0JBQ3ZELElBQUksQ0FBQywyQkFBMkIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7cUJBQzdDLENBQUMsQ0FBQTtpQkFDRixDQUFDLENBQUE7YUFDRjtTQUNEO2FBQU07WUFDTixJQUFJLENBQUMscUNBQXFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQztnQkFDMUQsSUFBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFDO29CQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxFQUFFLENBQUE7aUJBQUM7Z0JBQ3ZELElBQUksQ0FBQywyQkFBMkIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7YUFDN0MsQ0FBQyxDQUFBO1NBQ0Y7S0FFRDtJQUVLLHFDQUFxQyxDQUFDLElBQVUsRUFBRSxxQkFBOEIsS0FBSyxFQUFFLGtCQUE0QixFQUFFOztZQUMxSCxPQUFPLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU07Z0JBQ2xDLElBQUksVUFBVSxHQUEyQixFQUFFLENBQUE7Z0JBQzNDLE1BQU0sS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLGlIQUFpSCxDQUFDLENBQUE7Z0JBQzNJLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBYztvQkFDcEQsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSTt3QkFDMUIsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQTt3QkFDckMsSUFBRyxXQUFXOytCQUNWLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQzsrQkFDdEIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUM7NEJBQy9FLElBQUcsa0JBQWtCLEVBQUM7Z0NBQ3JCLElBQUcsZUFBZSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBQztvQ0FDbEQsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFBO2lDQUN6Rzs2QkFDRDtpQ0FBSTtnQ0FDSixVQUFVLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUE7NkJBQ3pHO3lCQUNEO3FCQUNELENBQUMsQ0FBQTtvQkFDRixJQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBQzt3QkFDckMsSUFBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFDOzRCQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxFQUFFLENBQUE7eUJBQUM7d0JBQ3ZELElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxVQUFVLENBQUMsQ0FBQTtxQkFDdEM7b0JBQ0QsT0FBTyxFQUFFLENBQUE7aUJBQ1QsQ0FBQyxDQUFBO2FBQ0YsQ0FBQyxDQUFBO1NBQ0Y7S0FBQTtJQUVLLG9DQUFvQyxDQUFDLFVBQWtDOztZQUM1RSxJQUFJLENBQUMscUJBQXFCLENBQUMsVUFBVSxDQUFFLENBQUE7U0FDdkM7S0FBQTtJQUVELHFCQUFxQixDQUFDLFVBQWtDO1FBQ3ZELE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBVztZQUMzQyxNQUFNLEtBQUssR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDN0IsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDdEQsSUFBRyxnQkFBZ0IsSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUM7Z0JBQzlDLElBQUcsZ0JBQWdCLENBQUMsT0FBTyxFQUFDO29CQUMzQixJQUFJLENBQUMsa0JBQWtCLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxnQkFBZ0IsQ0FBQyxDQUFBO2lCQUNyRDtxQkFBTSxJQUFHLGdCQUFnQixDQUFDLE9BQU8sRUFBQztvQkFDbEMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQTtpQkFDckQ7cUJBQU07b0JBQ04sSUFBSSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQTtpQkFDdEQ7YUFDRDtpQkFBTSxJQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUM7Z0JBQ3pFLElBQUksY0FBdUIsQ0FBQTtnQkFDM0IsSUFBRyxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUM7b0JBQ25CLGNBQWMsR0FBRyxLQUFLLENBQUE7aUJBQ3RCO3FCQUFNLElBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBQztvQkFDN0IsY0FBYyxHQUFHLElBQUksQ0FBQTtpQkFDckI7cUJBQU0sSUFBRyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFDO29CQUM5QixjQUFjLEdBQUcsS0FBSyxDQUFBO2lCQUN0QjtnQkFDRCxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxFQUFFLGNBQWMsQ0FBQyxDQUFBO2FBQzdDO2lCQUFNO2dCQUNOLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLEVBQUUsS0FBSyxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQTthQUMvRDtTQUNELENBQUMsQ0FBQztLQUNIO0lBRUQsMkJBQTJCLENBQUMsTUFBeUI7UUFDcEQsTUFBTSxLQUFLLEdBQUcsSUFBSSxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUN0RCxJQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUM7WUFDckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJO2dCQUN2QixJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFBO2dCQUN0QixJQUFJLENBQUMsUUFBUSxDQUFDLHlCQUF5QixDQUFDLENBQUE7Z0JBQ3hDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFlO29CQUN6QixLQUFLLENBQUMsSUFBSSxFQUFFLENBQUE7aUJBQ2YsQ0FBQyxDQUFBO2FBQ0wsQ0FBQyxDQUFBO1NBQ0w7YUFBTSxJQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUM7WUFDOUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsc0JBQXNCLEVBQUUseUJBQXlCLENBQUMsQ0FBQTtZQUMxRSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLE1BQU0sS0FBSyxDQUFDLElBQUksRUFBRSxDQUFBO1NBQ3BFO0tBQ1A7SUFFRCxrQkFBa0IsQ0FBQyxJQUFZLEVBQUUsS0FBYSxFQUFFLGdCQUF1QjtRQUN0RSxNQUFNLE1BQU0sR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUE7UUFDdEMsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUNoQyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUE7UUFDM0QsSUFBSSxTQUFpQixDQUFBO1FBQ3JCLElBQUcsV0FBVyxFQUFDO1lBQ2QsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsR0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBO1lBQ2pFLFNBQVMsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUE7U0FDM0I7YUFBTTtZQUNOLFNBQVMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQzFDO1FBQ0ssSUFBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFDO1lBQ3JCLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSTtnQkFDdkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLElBQUksTUFBTSxLQUFLLE1BQU0sU0FBUyxFQUFFLENBQUMsQ0FBQTtnQkFDbEQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQTtnQkFDdEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQWU7b0JBQ3pCLGFBQWEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQTtpQkFDN0QsQ0FBQyxDQUFBO2FBQ0wsQ0FBQyxDQUFBO1NBQ0w7YUFBTSxJQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUM7WUFDOUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLElBQUksS0FBSyxJQUFJLFNBQVMsRUFBRSxFQUFFLEdBQUcsSUFBSSxNQUFNLEtBQUssTUFBTSxTQUFTLEVBQUUsQ0FBQyxDQUFBO1lBQzdGLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsSUFBSSxJQUFJLEtBQUssSUFBSSxTQUFTLEVBQUUsQ0FBQyxHQUFHLE1BQ3hELGFBQWEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQTtTQUM3RDtLQUNQO0lBRUQsa0JBQWtCLENBQUMsSUFBWSxFQUFFLEtBQWEsRUFBRSxnQkFBdUI7UUFDdEUsTUFBTSxLQUFLLEdBQUcsSUFBSSxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQTtRQUNsRyxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQTtRQUNoQyxJQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUM7WUFDckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJO2dCQUN2QixJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsSUFBSSxHQUFHLENBQUMsQ0FBQTtnQkFDakMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQTtnQkFDM0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQWU7b0JBQ3pCLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQTtpQkFDZixDQUFDLENBQUE7YUFDTCxDQUFDLENBQUE7U0FDTjthQUFNLElBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBQztZQUM3QixJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxVQUFVLElBQUksRUFBRSxFQUFFLFdBQVcsSUFBSSxHQUFHLENBQUMsQ0FBQTtZQUM3RCxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLElBQUksRUFBRSxDQUFDLEdBQUcsTUFBTSxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUE7U0FDL0Q7S0FDTjtJQUVELG1CQUFtQixDQUFDLElBQVksRUFBRSxLQUFhLEVBQUUsZ0JBQXVCO1FBQ3ZFLE1BQU0sS0FBSyxHQUFHLElBQUlDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxnQkFBZ0IsQ0FBQyxDQUFBO1FBQzdGLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFBO1FBQy9CLElBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBQztZQUNyQixJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUk7Z0JBQ3ZCLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxJQUFJLEVBQUUsQ0FBQyxDQUFBO2dCQUMvQixJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUE7Z0JBQzlCLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFlLEtBQUssS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUE7YUFDbEQsQ0FBQyxDQUFBO1NBQ0w7YUFBTSxJQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUM7WUFDOUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsVUFBVSxJQUFJLEVBQUUsRUFBRSxXQUFXLElBQUksR0FBRyxDQUFDLENBQUE7WUFDN0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxJQUFJLEVBQUUsQ0FBQyxHQUFHLE1BQU0sS0FBSyxDQUFDLElBQUksRUFBRSxDQUFBO1NBQzlEO0tBQ1A7SUFFRCxtQkFBbUIsQ0FBQyxJQUFZLEVBQUUsS0FBYztRQUMvQyxNQUFNLEtBQUssR0FBRyxJQUFJRixrQkFBZ0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUMzRSxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxxQkFBcUIsSUFBSSxHQUFHLENBQUMsQ0FBQTtRQUM3QyxJQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUM7WUFDckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJO2dCQUN2QixJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsSUFBSSxHQUFHLENBQUMsQ0FBQTtnQkFDakMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQTtnQkFDekIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQWUsT0FBTSxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUEsRUFBQyxDQUFDLENBQUE7YUFDcEQsQ0FBQyxDQUFBO1NBQ0w7YUFBTSxJQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUM7WUFDOUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsVUFBVSxJQUFJLEVBQUUsRUFBRSxXQUFXLElBQUksR0FBRyxDQUFDLENBQUE7WUFDN0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxJQUFJLEVBQUUsQ0FBQyxHQUFHLE1BQU0sS0FBSyxDQUFDLElBQUksRUFBRSxDQUFBO1NBQzlEO0tBQ1A7SUFFRCxzQkFBc0IsQ0FBQyxJQUFZLEVBQUUsS0FBYTtRQUNqRCxNQUFNLEtBQUssR0FBRyxJQUFJLG1CQUFtQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQzlFLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLHFCQUFxQixJQUFJLEdBQUcsQ0FBQyxDQUFBO1FBQzdDLElBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBQztZQUNyQixJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUk7Z0JBQ3ZCLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxJQUFJLEdBQUcsQ0FBQyxDQUFBO2dCQUNqQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFBO2dCQUN0QixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBZSxLQUFLLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFBO2FBQ2xELENBQUMsQ0FBQTtTQUNMO2FBQU0sSUFBRyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFDO1lBQzlCLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFVBQVUsSUFBSSxFQUFFLEVBQUUsV0FBVyxJQUFJLEdBQUcsQ0FBQyxDQUFBO1lBQzdELElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsSUFBSSxFQUFFLENBQUMsR0FBRyxNQUFNLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQTtTQUM5RDtLQUNQO0lBRUQsbUJBQW1CLENBQUMsWUFBb0I7UUFDdkMsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLFlBQVksQ0FBQyxDQUFBO1FBQzlGLElBQUcsSUFBSSxDQUFDLFNBQVMsRUFBQztZQUNqQixNQUFNLDJCQUEyQixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxZQUFZLENBQUMsQ0FBQTtZQUN2RyxJQUFHLDJCQUEyQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUM7Z0JBQ3pDLE1BQU0sa0JBQWtCLEdBQUcsMkJBQTJCLENBQUMsQ0FBQyxDQUFDLENBQUE7Z0JBQ3pELElBQUcsa0JBQWtCLENBQUMsT0FBTyxFQUFDO29CQUM3QixPQUFPLGtCQUFrQixDQUFDLFFBQVEsRUFBRSxDQUFBO2lCQUNwQztxQkFBTSxJQUFHLGdCQUFnQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUM7b0JBQ3JDLE9BQU8sZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUE7aUJBQzFCO2FBQ0Q7U0FDRDthQUFNLElBQUcsZ0JBQWdCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBQztZQUNwQyxPQUFPLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQzNCO0tBQ0Q7OztBQ3RSRixNQUFNLGVBQWU7SUFLakIsWUFBWSxNQUF5QjtRQUNqQyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQTtRQUNwQixJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtLQUMzQjtJQUVKLGlCQUFpQjtRQUNoQixJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FDZixJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDLElBQUksRUFBRSxZQUFZLEVBQUUsTUFBTTtZQUNqRSxJQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLDBCQUEwQixLQUM3RCxNQUFNLEtBQUssbUJBQW1CO2dCQUM5QixNQUFNLEtBQUssdUJBQXVCO2dCQUNsQyxNQUFNLEtBQUssbUJBQW1CO2dCQUM5QixNQUFNLEtBQUssNEJBQTRCLENBQUMsRUFBQztnQkFDekMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLGdCQUFnQixFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsSUFBSSxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQTtnQkFDekcsSUFBRyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBQztvQkFDbkIsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO29CQUNyQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtvQkFDaEIsSUFBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFDO3dCQUNoRSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUE7d0JBQ25CLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJOzRCQUNqQixJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFBOzRCQUNwQixJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsSUFBSSxDQUFDLFFBQVEsVUFBVSxDQUFDLENBQUE7NEJBQ2pELElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHO2dDQUNoQixNQUFNLDZCQUE2QixHQUFHLElBQUksNkJBQTZCLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQTtnQ0FDMUYsNkJBQTZCLENBQUMsSUFBSSxFQUFFLENBQUE7NkJBQ3BDLENBQUMsQ0FBQTt5QkFDRixDQUFDLENBQUE7cUJBQ0Y7eUJBQU07d0JBQ04sSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUE7d0JBQ2hFLElBQUksQ0FBQyxXQUFXLENBQUMscUJBQXFCLEVBQUUsQ0FBQTtxQkFDeEM7aUJBQ0Q7YUFDRDtTQUNRLENBQUMsQ0FDWCxDQUFDO0tBQ0Y7OztNQzNDbUIsV0FBWSxTQUFRQywwQkFBaUI7SUFHdEQsWUFBWSxXQUF3QjtRQUNoQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUE7UUFDbEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUE7S0FDbkI7OztNQ0hnQix1QkFBd0IsU0FBUVgsY0FBSztJQU90RCxZQUFZLEdBQVEsRUFBRSxNQUF5QixFQUFFLElBQVc7UUFDeEQsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1gsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDZixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUNyQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtLQUNuQjtJQUVELE1BQU07UUFDRixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxDQUFBO1FBQ2xELE1BQU0sb0JBQW9CLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsQ0FBQTtRQUN2RCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksV0FBVyxDQUFDLG9CQUFvQixDQUFDLENBQUE7UUFDbkQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLGNBQWMsQ0FBQyxDQUFBO1FBQzVDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUN2RSxJQUFJLENBQUMsV0FBVyxDQUFDLHFCQUFxQixFQUFFLENBQUE7UUFDeEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLO1lBQ3ZCLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUE7WUFDM0IsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFBO1NBQ2YsQ0FBQyxDQUFBO1FBQ0YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUE7S0FDL0I7OztBQ3RCTCxNQUFNLFNBQVMsR0FBNkI7SUFDeEMsV0FBVyxFQUFFLENBQUMsaUJBQWlCLENBQUM7SUFDaEMsZUFBZSxFQUFFLENBQUMsaUJBQWlCLENBQUM7SUFDcEMsY0FBYyxFQUFFLENBQUMsNEJBQTRCLENBQUM7SUFDOUMsUUFBUSxFQUFFLENBQUMsa0JBQWtCLENBQUM7SUFDOUIsWUFBWSxFQUFFLENBQUMsbUJBQW1CLEVBQUUsa0JBQWtCLENBQUM7SUFDdkQsUUFBUSxFQUFFLENBQUMsMkJBQTJCLENBQUM7Q0FDMUMsQ0FBQTtBQUVELE1BQU0sVUFBVSxHQUEyQjtJQUN2QyxPQUFPLEVBQUUsWUFBWTtJQUNyQixVQUFVLEVBQUUscUJBQXFCO0lBQ2pDLFlBQVksRUFBRSx5Q0FBeUM7SUFDdkQsWUFBWSxFQUFFLHVCQUF1QjtJQUNyQyxVQUFVLEVBQUUsc0JBQXNCO0NBQ3JDLENBQUE7QUFFRCxNQUFNLFNBQVMsR0FBMkI7SUFDdEMsT0FBTyxFQUFFLEVBQUU7SUFDWCxVQUFVLEVBQUUsR0FBRztJQUNmLFlBQVksRUFBRSxHQUFHO0lBQ2pCLFVBQVUsRUFBRSxHQUFHO0lBQ2YsWUFBWSxFQUFFLEdBQUc7Q0FDcEIsQ0FBQTtBQUVELE1BQU0sT0FBTztJQUNUO1FBQ0ksSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUE7UUFDbEIsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUE7UUFDZCxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQTtRQUNmLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLENBQUE7UUFDL0IsSUFBSSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUE7UUFDcEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFBO0tBQzNDO0lBRUQsTUFBTTtRQUNGLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUNwRSxNQUFNLGtCQUFrQixHQUFhLEVBQUUsQ0FBQTtRQUV2QyxNQUFNLFlBQVksR0FBYSxDQUFDLHlFQUF5RSxDQUFDLENBQUE7UUFDMUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sRUFBRTs7WUFFekQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQTtZQUN4QixNQUFNLFdBQVcsR0FBRyxjQUFjLElBQUksQ0FBQyxLQUFLO2dCQUN4QyxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxrQkFBa0I7Z0JBQ3hHLEVBQUUsR0FBRyxJQUFJLHFDQUFxQyxDQUFBO1lBQ3RELFlBQVksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUE7U0FDakM7YUFBTTs7WUFFSCxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFBO1lBQ3pCLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU87Z0JBQ2xDLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUU7b0JBQ25DLGtCQUFrQixDQUFDLElBQUksQ0FBQyxHQUFHLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFBO2lCQUNqRDthQUNKLENBQUMsQ0FBQztZQUNILGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxRQUFRO2dCQUMvQixPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsQ0FBQTtnQkFDbEMsTUFBTSxXQUFXLEdBQUcsR0FBRyxRQUFRLGNBQWMsSUFBSSxDQUFDLEtBQUs7b0JBQ25ELE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLGtCQUFrQjtvQkFDeEcsRUFBRSxHQUFHLElBQUksc0NBQXNDLENBQUE7Z0JBQ3ZELFlBQVksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUE7YUFDakMsQ0FBQyxDQUFBO1NBQ0w7UUFFRCxPQUFPLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7S0FDakM7OztBQ3RFTCxNQUFNLGVBQWdCLFNBQVFBLGNBQUs7SUFLL0IsWUFBWSxNQUF5QjtRQUNqQyxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ2pCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQTtLQUMvQjtJQUVELE1BQU07UUFDRixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQywrQ0FBK0MsQ0FBQyxDQUFBOztRQUVyRSxNQUFNLDZCQUE2QixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDaEUsTUFBTSxvQkFBb0IsR0FBRyxJQUFJLENBQUMsc0JBQXNCLENBQUMsNkJBQTZCLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQTtRQUN6RyxvQkFBb0IsQ0FBQyxVQUFVLENBQUMsNENBQTRDLENBQUMsQ0FBQTtRQUM3RSxvQkFBb0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFBO1FBQzlELG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLENBQUMsQ0FBQTs7UUFHL0UsTUFBTSwyQkFBMkIsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxDQUFBO1FBQzlELE1BQU0sdUJBQXVCLEdBQUcsMkJBQTJCLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDdkUsdUJBQXVCLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUE7UUFDbEQsTUFBTSxNQUFNLEdBQUcsSUFBSVcsMEJBQWlCLENBQUMsMkJBQTJCLENBQUMsQ0FBQTtRQUNqRSxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHO1lBQy9CLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO1lBQ3RDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFO2dCQUMzQixNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFBO2FBQ3ZCO1NBQ0osQ0FBQyxDQUFBO1FBQ0YsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEtBQXVEO1lBQ3BFLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQTtTQUM3QixDQUFDLENBQUE7O1FBR0YsTUFBTSxtQkFBbUIsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxDQUFBO1FBQ3RELE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxtQkFBbUIsRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUM1RSxZQUFZLENBQUMsVUFBVSxDQUFDLDBCQUEwQixDQUFDLENBQUE7UUFDbkQsWUFBWSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQ3pDLFlBQVksQ0FBQyxRQUFRLENBQUMsS0FBSztZQUN2QixJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUE7WUFDMUIsSUFBSSxDQUFDLEtBQUssRUFBRTtnQkFBRSxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQTthQUFFO2lCQUFNO2dCQUFFLGlCQUFpQixDQUFDLElBQUksRUFBRSxDQUFBO2FBQUU7U0FDN0UsQ0FBQyxDQUFBOztRQUdGLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsQ0FBQTtRQUNwRCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsaUJBQWlCLEVBQUUsTUFBTSxFQUFFLGdCQUFnQixDQUFDLENBQUE7UUFDdkYsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJO1lBQ2xCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtTQUMzQixDQUFDLENBQUE7UUFDRixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUU7WUFDckIsaUJBQWlCLENBQUMsSUFBSSxFQUFFLENBQUE7U0FDM0I7YUFBTTtZQUNILGlCQUFpQixDQUFDLElBQUksRUFBRSxDQUFBO1NBQzNCOztRQUVELE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsQ0FBQTtRQUNyRCxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsa0JBQWtCLEVBQUUsT0FBTyxFQUFFLG9DQUFvQyxDQUFDLENBQUE7UUFDOUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBLEVBQUUsQ0FBQyxDQUFBOztRQUczRCxNQUFNLHdCQUF3QixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDM0QsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSztZQUNoQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsd0JBQXdCLEVBQUUsS0FBSyxDQUFDLENBQUE7U0FDMUQsQ0FBQyxDQUFBOztRQUdGLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDekMsTUFBTSxVQUFVLEdBQUcsSUFBSVIsd0JBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUM5QyxVQUFVLENBQUMsYUFBYSxDQUFDLDBCQUEwQixDQUFDLENBQUE7UUFDcEQsVUFBVSxDQUFDLE9BQU8sQ0FBQztZQUNmLGNBQWMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFBO1NBQ2pELENBQUMsQ0FBQTs7UUFHRixNQUFNLHVCQUF1QixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDMUQsTUFBTSxjQUFjLEdBQUcsSUFBSVUsMEJBQWlCLENBQUMsdUJBQXVCLENBQUMsQ0FBQTtRQUNyRSxjQUFjLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDNUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLGFBQWEsQ0FBQyxDQUFBO0tBRXpEO0lBRUQsaUJBQWlCLENBQUMsU0FBeUIsRUFBRSxRQUFnQjtRQUN6RCxNQUFNLHNCQUFzQixHQUFHLFNBQVMsQ0FBQyxTQUFTLENBQUM7WUFDL0MsR0FBRyxFQUFFLHNDQUFzQztTQUM5QyxDQUFDLENBQUE7UUFDRixNQUFNLHFCQUFxQixHQUFHLHNCQUFzQixDQUFDLFNBQVMsQ0FBQztZQUMzRCxHQUFHLEVBQUUsb0NBQW9DO1NBQzVDLENBQUMsQ0FBQTtRQUNGLE1BQU0sWUFBWSxHQUFHLElBQUlYLHdCQUFlLENBQUMscUJBQXFCLENBQUMsQ0FBQTtRQUMvRCxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsS0FBSztZQUNqQyxJQUFJLEtBQUssSUFBSSxRQUFRLEVBQUU7Z0JBQ25CLFlBQVksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUE7YUFDOUI7U0FDSixDQUFDLENBQUE7UUFDRixZQUFZLENBQUMsUUFBUSxDQUFDLEtBQUs7WUFDdkIsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUU7Z0JBQ3RELElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTthQUN6QztZQUNELElBQUksQ0FBQyxLQUFLLEVBQUU7Z0JBQ1IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFBO2FBQzNDO1NBQ0osQ0FBQyxDQUFBO1FBQ0YsTUFBTSxVQUFVLEdBQUcsc0JBQXNCLENBQUMsU0FBUyxDQUFDO1lBQ2hELEdBQUcsRUFBRSxrQ0FBa0M7U0FDMUMsQ0FBQyxDQUFBO1FBQ0YsVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQTtLQUMvQjtJQUVELHNCQUFzQixDQUFDLFVBQTBCLEVBQUUsS0FBYTtRQUM1RCxNQUFNLHNCQUFzQixHQUFHLFVBQVUsQ0FBQyxTQUFTLENBQUM7WUFDaEQsR0FBRyxFQUFFLDhCQUE4QjtTQUN0QyxDQUFDLENBQUE7UUFDRixzQkFBc0IsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDckMsTUFBTSxPQUFPLEdBQUcsSUFBSUEsd0JBQWUsQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUMvQyxPQUFPLE9BQU8sQ0FBQTtLQUNqQjtJQUVELG9CQUFvQixDQUFDLFVBQTBCLEVBQUUsS0FBYSxFQUFFLGNBQXNCLEVBQUU7UUFDcEYsTUFBTSwwQkFBMEIsR0FBRyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUE7UUFDekQsMEJBQTBCLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQ3pDLE1BQU0sS0FBSyxHQUFHLElBQUlELHNCQUFhLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDM0MsS0FBSyxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUNqQyxPQUFPLEtBQUssQ0FBQTtLQUNmOzs7TUMxR2dCLGlCQUFrQixTQUFRYSxlQUFNO0lBQXJEOztRQUVDLHNCQUFpQixHQUFpQixFQUFFLENBQUE7S0ErUHBDO0lBM1BNLE1BQU07O1lBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1lBRzFCLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxJQUFJO2dCQUN0QyxNQUFNLFFBQVEsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFBO2dCQUM1QixNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQTtnQkFDN0IsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTthQUNyQyxDQUFDLENBQUE7WUFDRixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksMkJBQTJCLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3BFLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHO2dCQUMxQyxhQUFhLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQTthQUMvQyxDQUFDLENBQUM7WUFDSCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxXQUFXLEVBQUU7Z0JBQ3JELGNBQWMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUN4QyxDQUFDLENBQUMsQ0FBQztZQUNKLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLEtBQUs7Z0JBQzdELGtCQUFrQixDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUM1QyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDeEMsQ0FBQyxDQUFDLENBQUM7WUFHSixNQUFNLEdBQUcsR0FBR0MsVUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUN6RSxJQUFJLENBQUMsdUJBQXVCLENBQUMsR0FBRyxDQUFDLENBQUM7WUFFbEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7WUFFcEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLE1BQU0sSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDckUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLGVBQWUsRUFBRSxNQUFNLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBRTNFLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQ2YsRUFBRSxFQUFFLGVBQWU7Z0JBQ25CLElBQUksRUFBRSxlQUFlO2dCQUNyQixPQUFPLEVBQUU7b0JBQ1I7d0JBQ0MsU0FBUyxFQUFFLENBQUMsS0FBSyxDQUFDO3dCQUNsQixHQUFHLEVBQUUsR0FBRztxQkFDUjtpQkFDRDtnQkFDRCxRQUFRLEVBQUU7b0JBQ1QsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFBO29CQUMxQyxJQUFJLElBQUksQ0FBQyxJQUFJLFlBQVlQLHFCQUFZLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUU7d0JBQ3hELE1BQU0sa0JBQWtCLEdBQUcsSUFBSSx1QkFBdUIsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO3dCQUN0RixrQkFBa0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtxQkFDekI7aUJBQ0Q7YUFDRCxDQUFDLENBQUM7O1lBR0gsSUFBSSxDQUFDLFVBQVUsQ0FBQztnQkFDZixFQUFFLEVBQUUsdUJBQXVCO2dCQUMzQixJQUFJLEVBQUUsOEJBQThCO2dCQUNwQyxPQUFPLEVBQUU7b0JBQ1I7d0JBQ0MsU0FBUyxFQUFFLENBQUMsS0FBSyxDQUFDO3dCQUNsQixHQUFHLEVBQUUsR0FBRztxQkFDUjtpQkFDRDtnQkFDRCxRQUFRLEVBQUU7b0JBQ1QsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFBO29CQUMxQyxJQUFJLElBQUksQ0FBQyxJQUFJLFlBQVlBLHFCQUFZLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLEVBQUU7d0JBQzVILE1BQU0sS0FBSyxHQUFHLElBQUksNkJBQTZCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7d0JBQ3JFLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQTtxQkFDWjt5QkFBTTt3QkFDUyxJQUFJSixlQUFNLENBQUMseUJBQXlCLEVBQUUsSUFBSSxFQUFDO3FCQUMxRDtpQkFDRDthQUNELENBQUMsQ0FBQztZQUVILElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQ2YsRUFBRSxFQUFFLG9CQUFvQjtnQkFDeEIsSUFBSSxFQUFFLG9CQUFvQjtnQkFDMUIsUUFBUSxFQUFFO29CQUNULE1BQU0sU0FBUyxHQUFHLElBQUksZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFBO29CQUMzQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUE7aUJBQ2hCO2FBQ0QsQ0FBQyxDQUFDO1lBRUgsSUFBSSxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUE7U0FDekI7S0FBQTtJQUVELGlCQUFpQixDQUFDLE1BQXlCO1FBQzFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsUUFBUSxLQUFLLFFBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDO1FBQzlELE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDNUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGVBQWUsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUNqRCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxvQkFBb0IsRUFBRSxNQUFNLEVBQUUsZUFBZSxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNsRixNQUFNLENBQUMsZ0JBQWdCLENBQUMsZ0JBQWdCLEVBQUUsTUFBTSxFQUFFLGVBQWUsRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDOUUsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLHdCQUF3QixDQUFDLENBQUM7UUFDakYsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGVBQWUsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLHdCQUF3QixDQUFDLENBQUM7S0FDdkY7SUFFRCxnQkFBZ0IsQ0FBQyxZQUFvQixFQUFFLE1BQXlCLEVBQUUsWUFBWSxHQUFHLFdBQVcsRUFBRSxTQUFTLEdBQUcsaUJBQWlCLEVBQUUsWUFBWSxHQUFHLElBQUk7UUFDL0ksTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ2hFLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDO1lBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsR0FBRyxZQUFZLEdBQUcsUUFBUSxDQUFDLENBQUM7YUFDNUUsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUM7WUFBRSxPQUFPO2FBQzlCO1lBQ0osTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxZQUFZLENBQUMsQ0FBQztTQUNqRztLQUNEO0lBRUQsY0FBYyxDQUFDLFNBQXNCLEVBQUUsTUFBeUIsRUFBRSxZQUFZLEdBQUcsV0FBVyxFQUFFLFNBQVMsR0FBRyxpQkFBaUIsRUFBRSxZQUFZLEdBQUcsSUFBSTtRQUMvSSxNQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDO1FBQ2pDLE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUM7UUFDdkIsSUFBSSxRQUFRLEdBQUcsSUFBSSxnQkFBZ0IsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzlDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRO2dCQUN4QixJQUFJLFFBQVEsQ0FBQyxJQUFJLEtBQUssV0FBVyxFQUFFO29CQUNsQyxRQUFRLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7d0JBQzdCLElBQUksV0FBVyxJQUFJLENBQUMsRUFBRTs7NEJBRXJCLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLElBQUksT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQVEsS0FBSyxVQUFVLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLEVBQUU7Z0NBQzdHLElBQUksWUFBWSxFQUFFO29DQUNqQixNQUFNLFFBQVEsR0FBSSxDQUFpQixDQUFDLHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxDQUFDO29DQUN0RSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsUUFBUSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRTt3Q0FDekMsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBZ0IsQ0FBQzt3Q0FDeEMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLENBQUM7d0NBQzNCLElBQUksUUFBUSxDQUFDLGVBQWUsRUFBRTs0Q0FDN0Isd0JBQXdCLENBQUMsR0FBRyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7eUNBQ2xEO3FDQUNEO2lDQUNEO3FDQUNJO29DQUNKLG9CQUFvQixDQUFDLENBQWdCLENBQUMsQ0FBQztvQ0FDdkMsd0JBQXdCLENBQUMsR0FBRyxFQUFFLFFBQVEsRUFBRSxDQUFnQixFQUFFLEVBQUUsQ0FBQyxDQUFDO2lDQUM5RDs2QkFDRDt5QkFDRDtxQkFDRCxDQUFDLENBQUE7aUJBQ0Y7YUFDRCxDQUFDLENBQUE7U0FDRixDQUFDLENBQUM7UUFDSCxRQUFRLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUNuRixNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUNoQztJQUVELGlCQUFpQixDQUFDLEdBQVEsRUFBRSxTQUFvQzs7OztRQUkvRCxNQUFNLFlBQWEsU0FBUVksZUFBVTtZQUdwQyxZQUFZLFVBQWtDO2dCQUM3QyxLQUFLLEVBQUUsQ0FBQztnQkFDUixJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQTthQUM1QjtZQUVELEtBQUs7Z0JBQ0osSUFBSSxRQUFRLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDOUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBQ25DLFFBQVEsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsQ0FBQzs7Z0JBRXBDLE9BQU8sUUFBUSxDQUFDO2FBQ2hCO1lBRUQsV0FBVztnQkFDVixPQUFPLElBQUksQ0FBQzthQUNaO1NBQ0Q7UUFDRCxNQUFNLFFBQVEsR0FBRyxTQUFTLENBQUM7UUFDM0IsTUFBTSxVQUFVLEdBQUdDLGVBQVUsQ0FBQyxTQUFTLENBQ3RDO1lBR0MsWUFBWSxJQUFnQjtnQkFDM0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDL0M7WUFFRCxNQUFNLENBQUMsTUFBa0I7Z0JBQ3hCLElBQUksTUFBTSxDQUFDLFVBQVUsSUFBSSxNQUFNLENBQUMsZUFBZSxFQUFFO29CQUNoRCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7aUJBQ3REO2FBQ0Q7WUFFRCxPQUFPLE1BQU07WUFFYixnQkFBZ0IsQ0FBQ0MsTUFBZ0I7Z0JBQ2hDLElBQUksT0FBTyxHQUFHLElBQUlDLHdCQUFlLEVBQWMsQ0FBQztnQkFDaEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUU7b0JBQzNCLE9BQU8sT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO2lCQUN4QjtnQkFDRCxNQUFNLE1BQU0sR0FBR0QsTUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUNFLHdCQUFlLENBQWlCLENBQUM7Z0JBQ2pFLElBQUksY0FBYyxHQUFHLEVBQUUsQ0FBQztnQkFDeEIsS0FBSyxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxJQUFJRixNQUFJLENBQUMsYUFBYSxFQUFFO29CQUM1Q0csbUJBQVUsQ0FBQ0gsTUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQzt3QkFDOUIsSUFBSTt3QkFDSixFQUFFO3dCQUNGLEtBQUssRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTs0QkFDckIsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQ0ksK0JBQWtCLENBQUMsQ0FBQzs0QkFDakQsSUFBSSxVQUFVLEVBQUU7Z0NBQ2YsTUFBTSxLQUFLLEdBQUcsSUFBSSxHQUFHLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dDQUM3QyxNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLG1CQUFtQixDQUFDLENBQUM7Z0NBQzlDLE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7Z0NBQ3hDLE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQzs7Z0NBRTVDLElBQUksTUFBTSxJQUFJLENBQUMsT0FBTyxJQUFJLENBQUMsTUFBTSxFQUFFO29DQUNsQyxJQUFJLFFBQVEsR0FBR0osTUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQztvQ0FDcEQsUUFBUSxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7b0NBQ2xDLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxhQUFhLENBQUMsb0JBQW9CLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7b0NBQ2xGLElBQUksSUFBSSxFQUFFO3dDQUNULElBQUksV0FBVyxHQUFHLHlCQUF5QixDQUFDLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO3dDQUN2RSxJQUFJLFVBQVUsR0FBMkIsRUFBRSxDQUFDO3dDQUM1QyxLQUFLLElBQUksR0FBRyxJQUFJLFdBQVcsRUFBRTs0Q0FDNUIsVUFBVSxDQUFDLFlBQVksR0FBRyxHQUFHLENBQUMsR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7eUNBQ2xEO3dDQUNELElBQUksSUFBSSxHQUFHSyxlQUFVLENBQUMsSUFBSSxDQUFDOzRDQUMxQixVQUFVO3lDQUNWLENBQUMsQ0FBQzt3Q0FDSCxJQUFJLFFBQVEsR0FBR0EsZUFBVSxDQUFDLE1BQU0sQ0FBQzs0Q0FDaEMsTUFBTSxFQUFFLElBQUksWUFBWSxDQUFDLFVBQVUsQ0FBQzt5Q0FDcEMsQ0FBQyxDQUFDO3dDQUNILE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQzt3Q0FDbEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO3dDQUM1QixjQUFjLEdBQUcsVUFBVSxDQUFDO3FDQUM1QjtpQ0FDRDtxQ0FDSSxJQUFJLE1BQU0sSUFBSSxPQUFPLEVBQUU7b0NBQzNCLElBQUksSUFBSSxHQUFHQSxlQUFVLENBQUMsSUFBSSxDQUFDO3dDQUMxQixVQUFVLEVBQUUsY0FBYztxQ0FDMUIsQ0FBQyxDQUFBO29DQUNGLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztpQ0FDNUI7NkJBQ0Q7eUJBQ0Q7cUJBQ0QsQ0FBQyxDQUFBO2lCQUVGO2dCQUNELE9BQU8sT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO2FBQ3hCO1NBQ0QsRUFDRDtZQUNDLFdBQVcsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVc7U0FDL0IsQ0FDRCxDQUFDO1FBQ0YsT0FBTyxVQUFVLENBQUM7S0FDbEI7SUFFRCxRQUFRO1FBQ1AsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEtBQUssUUFBUSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUM7UUFDNUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0tBQzNDO0lBRUssWUFBWTs7WUFDakIsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1NBQzNFO0tBQUE7SUFFSyxZQUFZOztZQUNqQixJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUE7WUFDbkQsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUNuQztLQUFBOzs7OzsifQ==
